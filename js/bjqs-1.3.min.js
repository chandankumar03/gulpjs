!function(e){"use strict";e.fn.bjqs=function(n){var t={width:700,height:400,animtype:"fade",animduration:200,animspeed:4e3,automatic:!0,showcontrols:!0,centercontrols:!0,nexttext:"Next",prevtext:"Prev",showmarkers:!0,centermarkers:!0,keyboardnav:!0,hoverpause:!0,usecaptions:!0,randomstart:!1,responsive:!1},i=e.extend({},t,n),r=this,d=r.find("ul.bjqs"),s=d.children("li"),a=null,l=null,c=null,o=null,u=null,h={slidecount:s.length,animating:!1,paused:!1,currentslide:1,nextslide:0,currentindex:0,nextindex:0,interval:null},x={width:null,height:null,ratio:null},f={fwd:"forward",prev:"previous"},m=function(){d.find("img:first").addClass("onn"),s.addClass("bjqs-slide").css("z-index","-10"),d.find("li:first").css("z-index","10"),d.find("img").addClass("off"),i.responsive?p():v(),h.slidecount>1?(i.randomstart&&C(),i.showcontrols&&w(),i.showmarkers&&g(),i.hoverpause&&i.automatic&&q()):i.automatic=!1,i.usecaptions&&k(),"slide"!==i.animtype||i.randomstart||(h.currentindex=1,h.currentslide=2),d.show(),s.eq(h.currentindex).show(),i.automatic&&(h.interval=setInterval(function(){j(f.fwd,!1)},i.animspeed))},p=function(){x.width=r.outerWidth(),x.ratio=x.width/i.width,x.height=i.height*x.ratio,"fade"===i.animtype&&s.children("img").css({height:i.height,width:"100%"})},v=function(){},w=function(){if(a=e('<ul class="bjqs-controls"></ul>'),l=e('<li class="bjqs-next"><a href="#" data-direction="'+f.fwd+'">'+i.nexttext+"</a></li>"),c=e('<li class="bjqs-prev"><a href="#" data-direction="'+f.prev+'">'+i.prevtext+"</a></li>"),a.on("click","a",function(n){n.preventDefault();var t=e(this).attr("data-direction");h.animating||(t===f.fwd&&j(f.fwd,!1),t===f.prev&&j(f.prev,!1))}),c.appendTo(a),l.appendTo(a),a.appendTo(r),i.centercontrols){a.addClass("v-centered");var n=(r.height()-l.children("a").outerHeight())/2,t=n/i.height*100,d=t+"%";l.find("a").css("top",d),c.find("a").css("top",d)}},g=function(){if(o=e(".bjqs-markers"),e(".bjqs-markers > li").each(function(n,t){var r=n+1,d=n+1;"slide"===i.animtype&&(d=n+2),r===h.currentslide&&e(this).addClass("active-marker"),e(this).mouseover("li",function(e){e.preventDefault(),h.currentslide!==d&&j(!1,d)})}),u=o.find("li"),i.centermarkers){o.addClass("h-centered");var n=(i.width-o.width())/2;o.css("left",n)}},q=function(){r.hover(function(){h.paused||(clearInterval(h.interval),h.paused=!0)},function(){h.paused&&(h.interval=setInterval(function(){j(f.fwd,!1)},i.animspeed),h.paused=!1)})},k=function(){e.each(s,function(n,t){var i=e(t).children("img:first-child").attr("title");i||(i=e(t).children("a").find("img:first-child").attr("title")),i&&(i=e('<p class="bjqs-caption">'+i+"</p>"),i.appendTo(e(t)))})},C=function(){var e=Math.floor(Math.random()*h.slidecount)+1;h.currentslide=e,h.currentindex=e-1},b=function(e){e===f.fwd?s.eq(h.currentindex).next().length?(h.nextindex=h.currentindex+1,h.nextslide=h.currentslide+1):(h.nextindex=0,h.nextslide=1):s.eq(h.currentindex).prev().length?(h.nextindex=h.currentindex-1,h.nextslide=h.currentslide-1):(h.nextindex=h.slidecount-1,h.nextslide=h.slidecount)},j=function(e,n){if(h.animating=!0,n?(h.nextslide=n,h.nextindex=n-1):b(e),"fade"===i.animtype){i.showmarkers&&(u.removeClass("active-marker"),u.eq(h.nextindex).addClass("active-marker"));h.currentindex;s.eq(h.currentindex).css("z-index","-10"),s.eq(h.currentindex).find("img").removeClass("onn"),s.eq(h.nextindex).find("img").addClass("onn"),s.eq(h.nextindex).css("z-index","10"),h.animating=!1,h.currentslide=h.nextslide,h.currentindex=h.nextindex}if("slide"===i.animtype){if(i.showmarkers){var t=h.nextindex-1;t===h.slidecount-2?t=0:-1===t&&(t=h.slidecount-3),u.removeClass("active-marker"),u.eq(t).addClass("active-marker")}i.responsive&&x.width<i.width?h.slidewidth=x.width:h.slidewidth=i.width,d.animate({left:-h.nextindex*h.slidewidth},i.animduration,function(){h.currentslide=h.nextslide,h.currentindex=h.nextindex,"last"===s.eq(h.currentindex).attr("data-clone")?(d.css({left:-h.slidewidth}),h.currentslide=2,h.currentindex=1):"first"===s.eq(h.currentindex).attr("data-clone")&&(d.css({left:-h.slidewidth*(h.slidecount-2)}),h.currentslide=h.slidecount-1,h.currentindex=h.slidecount-2),h.animating=!1})}};m()}}(jQuery);