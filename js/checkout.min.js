"use strict";var PF=PF||{};void 0===PF.UTILITIES&&function(){var _node=document.createElement("script");_node.type="text/javascript",_node.src=("http:"==window.location.protocol?root_url:secure_url)+"/js/utilities.js",document.getElementsByTagName("head")[0].appendChild(_node)}();var checkout_scripts={initialize:function(){function paymentNavActive(){var activeMenuTop=$("#ckPaymentMethodNav li.active").position().top;$("#checkoutNavActive").css("top",activeMenuTop+"px")}$(document).on("click tap","#ckCashPayDoorstep",function(){var cbc_amount=0;$("#cbc_default_option, .cbc_radio_block .bank_select_wrap, #cbc_deposit_cash").hide(),$("#cbc_collect_cash").show(),cbc_amount=parseInt($("#cbc_added_amount").attr("data-cbc-amount"));var total=parseInt($("#total_pay_amount").val()),growtreeVal=0;$("#growTree").is(":checked")&&(growtreeVal=parseInt(donation)),cbc_amount>0?($("#cbc_amt").text("of "+cbc_amount),$("#cbc_charge_show").text("+ Rs."+cbc_amount),$("#cbc_charge_show, #cbc_collect_cash").show(),$("#non-refund-cbc-note").text("Non Refundable CashPay charge of "+cbc_amount+" applicable").show(),$(".cbc_charges").text("Rs."+(total+growtreeVal)+" + Rs."+cbc_amount).show()):$("#non-refund-cbc-note").hide(),$(".cashpay-deposit-container, .cashpay-default-container").hide(),$(".cashpay-doorstep-container").show()}),$(document).on("click tap","#ckCashPayDeposit",function(){$("#cbc_collect_cash, #cbc_default_option, #cbc_charge_show, #non-refund-cbc-note, .cbc_charges").hide(),$("#cbc_deposit_cash, .cbc_radio_block .bank_select_wrap").show(),$(".cashpay-doorstep-container, .cashpay-default-container").hide(),$(".cashpay-deposit-container").show()}),$("#codAgreement1").on("click",function(){$("#codAgreement1").is(":checked")&&$("#show_checkout_agreement_error").slideUp(250,"linear")}),$("#ckPaymentMethodNav").on("click tap","li:not(.active)",function(){var id=$(this).attr("id");$(this).addClass("active").siblings().removeClass("active"),$("#ckPaymentMethodContainer").find(".ck-tab-content").hide(),$("#"+id+"Container").show(),paymentNavActive()}),$("#ckPaymentMethodNav").on("click tap","li:not(#checkoutPartPay)",function(){$(".checkout-partpay-amount").hide()}),$("#ckPaymentMethodNav").on("click tap","li#checkoutPartPay",function(){$(".checkout-partpay-amount, #partPayBreakupDetail, #partPayBreakupDetail .partpay-collapse-breakup").show(),$("#partPayDropDown, #partPayOptionArea, #partPayAmtView, #partPayBreakupDetail .partpay-expand-breakup").hide(),$("#partPayAgreement").prop("checked",!1),$("#checkoutPaySecureBtn").addClass("disabled")}),$(document).on("change","#emiBankList",function(){$(".emi-bank-container").show()}),$(".emi-bank-container").on("click tap",".ck-emi-tr:not(:hidden)",function(e){if("input"==e.target.nodeName.toLowerCase());else{var _id=$(this).attr("id");$("#emi"+_id).trigger("click")}}),$(".partpay-collapse-breakup").on("click tap",".show-breakup",function(){$(this).closest(".partpay-collapse-breakup").slideUp(),$("#partPayBreakupDetail").find(".partpay-expand-breakup").slideDown()}),$(".partpay-expand-breakup").on("click tap",".hide-breakup",function(){$(this).closest(".partpay-expand-breakup").slideUp(),$("#partPayBreakupDetail").find(".partpay-collapse-breakup").slideDown()}),$("#partPayAgreement").on("click tap",function(){$(this).is(":checked")?($("#ckPaymentMethodNav").find("li").not("#checkoutPartPay").hide(),$("#checkoutPaySecureBtn").removeClass("disabled"),$("#partPayBreakupDetail").slideUp(),$("#partPayAmtView, #partPayDropDown, .ck-backpay-action").show()):($("#ckPaymentMethodNav").find("li").not("#checkoutPartPay").show(),$("#checkoutPaySecureBtn").removeClass("disabled"),$("#partPayAmtView, #partPayDropDown, .ck-backpay-action").hide(),$("#partPayBreakupDetail").slideDown()),paymentNavActive()}),$("#ckPaymentMethodNav").on("click tap",".ck-backpay-action",function(){$(this).hide(),$("#ckPaymentMethodNav").find("li").show(),paymentNavActive()}),$("#partPayAmtView").on("click tap",".ck-partpay-detail",function(){$(this).attr("data-detail")&&"off"!=$(this).attr("data-detail")?"on"==$(this).attr("data-detail")&&($(this).attr("data-detail","off"),$("#partPayBreakupDetail").slideUp()):($(this).attr("data-detail","on"),$("#partPayBreakupDetail").slideDown()),$("#partPayBreakupDetail .partpay-collapse-breakup").hide(),$("#partPayBreakupDetail .partpay-expand-breakup").show()}),$("#partPayDropDown").on("change","#partPayDropDownOption",function(){var selectedOpt=$(this).val();$("#partPayOptionArea > div").hide(),PF.CHECKOUT.resetBankSelection();var growTreeSelect=$("#growTree").prop("checked");switch($("#s2id_partPayDropDownOption").select2("val",selectedOpt),$("#payment_form")[0].reset(),$('input[type="checkbox"][id="partPayAgreement"]').prop("checked","checked"),growTreeSelect&&$("#growTree").prop("checked","checked"),$("#checkoutPaySecureBtn").removeClass("disabled"),selectedOpt){case"DEBIT_CARD":case"CREDIT_CARD":case"NET_BANKING":case"PAYPAL":case"PAYUMONEY":$("#partPayOptionArea").show(),$("#partpay_checkout"+selectedOpt+"Container").show();break;case"WALLET":$("#partPayOptionArea").show(),$("#partpay_checkout"+selectedOpt+"Container").show(),parseInt($(".checkout-partpay-amount").attr("data-netpayable"))>wallet_price_check?$("#checkoutPaySecureBtn").addClass("disabled"):$("#checkoutPaySecureBtn").removeClass("disabled")}}),$("#ckShippingAddress").on("click tap",".checkout-address-action a",function(){$("#billingAddressOpenCont").hide(),$("#ckShippingAddress").addClass("active"),$("#ckBillingAddress").removeClass("active"),$("#ckShippingAddress").hasClass("guest_user")?($("#shippingAddressOpenCont").slideDown(),$("#shippingAddressFormCont .add-address-action").fadeOut(500,function(){$("#shippingAddressFormCont").find(".add-address_form").fadeIn()})):($("#shippingAddressFormCancel").click(),$("#shippingAddressOpenCont").slideDown())}),$("#ckShippingAddress").on("click tap",".checkout-add-box-close a",function(){$("#ckShippingAddress").hasClass("guest_user")||PF.CHECKOUT.resetForm(),$("#ckShippingAddress").removeClass("active"),$("#shippingAddressOpenCont").slideUp(),$("#shippingAddressFormCont").find(".add-address_form").hide(),$("#shippingAddressFormCont .add-address-action").show(),PF.CHECKOUT.checkAssemblyPincode()}),$("#shippingAddressOpenCont").on("click tap",".ship-address-row:not(.active)",function(){$(this).find('input[type="radio"]').is(":checked")||($(this).addClass("active").siblings().removeClass("active"),$(this).find('input[type="radio"]').click())}),$("#shippingAddressOpenCont .ship-address-action a").on("click tap",function(){$(this).closest(".ship-address-row").addClass("active").siblings().removeClass("active"),$(this).closest(".ship-address-row").find("input[type=radio]").prop("checked",!0),$("#shippingAddressFormCont").find(".add-address_form").removeClass("white_bg"),$("#shippingAddressFormCont").find(".add-address_form").find(".edt-blk-title").html("Edit your address")}),$("#shippingAddressFormCont .add-address-action").on("click tap",function(){$("#shippingAddressFormCont").find(".add-address_form").addClass("white_bg"),$("#shippingAddressFormCont").find(".add-address_form").find(".edt-blk-title").html("Enter a new Address")}),$("#shippingAddressFormCancel").on("click tap",function(){$("#ckShippingAddress").hasClass("guest_user")||PF.CHECKOUT.resetForm(),$("#shippingAddressFormCont").find(".add-address_form").fadeOut(500,function(){$("#shippingAddressFormCont .add-address-action").fadeIn()}),$(".btn_blue").removeClass("disabled"),isFreeGiftErrorshow||$(".btn_green, .btn_green_big").removeClass("disabled"),PF.CHECKOUT.handlePanasonicErrorMsg(),PF.CHECKOUT.checkAssemblyPincode()}),$("#ckBillingAddress").on("click tap",".checkout-address-action a",function(){$("#shippingAddressOpenCont").hide(),$("#ckBillingAddress").addClass("active"),$("#ckShippingAddress").removeClass("active"),$("#ckBillingAddress").hasClass("guest_user")?($("#billingAddressOpenCont").slideDown(),$("#billingAddressFormCont .add-address-action").fadeOut(500,function(){$("#billingAddressFormCont").find(".add-address_form").fadeIn()})):($("#billingAddressFormCancel").click(),$("#billingAddressOpenCont").slideDown())}),$("#ckBillingAddress").on("click tap",".checkout-add-box-close a",function(){$("#ckBillingAddress").hasClass("guest_user")||PF.CHECKOUT.resetForm(),$("#ckBillingAddress").removeClass("active"),$("#billingAddressOpenCont").slideUp(),$("#billingAddressFormCont").find(".add-address_form").hide(),$("#billingAddressFormCont .add-address-action").show()}),$("#billingAddressOpenCont").on("click tap",".ship-address-row:not(.active)",function(){$(this).find('input[type="radio"]').is(":checked")||($(this).addClass("active").siblings().removeClass("active"),$(this).find('input[type="radio"]').click())}),$("#billingAddressOpenCont .ship-address-action a, #billingAddressFormCont .add-address-action a").on("click tap",function(e){"edit_address"!=$(this).attr("class")&&$(".billing-all-address .ship-address-row").length>=10?($("#saveAddressBill").prop("checked",!1).val(0).attr("disabled","disabled"),$("#save_billing_address").val(0)):($("#saveAddressBill").val(0).removeAttr("disabled"),$("#save_billing_address").val(1)),$("#billingAddressFormCont .add-address-action").fadeOut(500,function(){$("#billingAddressFormCont").find(".add-address_form").fadeIn()})}),$("#billingAddressOpenCont .ship-address-action a").on("click tap",function(){$(this).closest(".ship-address-row").addClass("active").siblings().removeClass("active"),$(this).closest(".ship-address-row").find("input[type=radio]").prop("checked",!0),$("#billingAddressFormCont").find(".add-address_form").removeClass("white_bg"),$("#billingAddressFormCont").find(".add-address_form").find(".edt-blk-title").html("Edit your Address")}),$("#billingAddressFormCont .add-address-action").on("click tap",function(){$("#billingAddressFormCont").find(".add-address_form").addClass("white_bg"),$("#billingAddressFormCont").find(".add-address_form").find(".edt-blk-title").html("Enter a new Address")}),$("#billingAddressFormCancel").on("click tap",function(){$("#ckBillingAddress").hasClass("guest_user")||PF.CHECKOUT.resetForm(),$("#billingAddressFormCont").find(".add-address_form").fadeOut(500,function(){$("#billingAddressFormCont .add-address-action").fadeIn()})}),$(".right-checkout-content label > img").on("click",function(){$("#"+$(this).parent("label").attr("for")).click()}),$(".home-login-m-login-link").on("click",function(){$(".home-login-forgot-reseted-wrap,.home-login-forgot-wrap,.home-login-reg-wrap").hide(),$(".home-login-guest-modal,.home-login-frm-wrap").show(),PF.CHECKOUT.allInputReset()}),$(".popup_overlay").click(function(){PF.CHECKOUT.form_fild_reset()}),$(".ck-addr-frm-row .ck-pincode-ip").on("keyup",function(){PF.CHECKOUT.postCodeCheck()}),$(".ck-del-addr-list-item .ck-del-addr-list-edit").click(function(){$("#editdeladdr").html("EDIT ADDRESS");var _id=$(this).data("addressid");$("html, body").animate({scrollTop:$(".ck-addr-selection-left-wrap").offset().top},2e3),$(".ck-del-addr-list-wrap").slideUp(100),$(".ck-saved-addr-back-wrap").show(200),$(".ck-del-addr-add-new").hide(),$(".ck-del-addr-add-frm-wrap").slideDown(300),$("#save_address").val(1),$("#update_id").val(_id),PF.CHECKOUT.showAddressForEdit(_id,"shipping")}),$(".ck-bil-addr-slide-edit").click(function(e){$(".ck-bil-addr-sel-wrap, .ck-bil-addr-add-new").hide(),$(".ck-bill-addr-add-new").hide(),$(".ck-bill-addr-frm-wrap").show(),e.stopPropagation(),$("#save_address_bill").val(0),$("#save_bill").val(0);var _id=$(this).data("addressid");$("#update_id_bill").val(_id),PF.CHECKOUT.showAddressForEdit(_id,"billing")})}},SHIP_TOGETHER=function(){var o={};return $(function(){function select_link_ele(){document.querySelector(".shipstooltip")&&(o.tol_link=document.getElementById("shipTogether").checked?$(".shipsborder-chk"):$(".shipsborder"))}function set_hover_menu_position(){if(document.querySelector(".shipstooltip")){var obj=document.getElementById("shipTogether").checked?$(".shipsborder-chk"):$(".shipsborder");o.tol_obj.show();var p=obj.offset(),h=o.tol_obj.height(),x=p.left,t=p.top-30-h,tx=x+parseInt(obj.width()/2),client_width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;client_width-tx-30<obj.width()?o.tol_obj.css({left:client_width-200+"px",top:t+"px"}):o.tol_obj.css({left:x+"px",top:t+"px"})}}document.querySelector(".shipstooltip")&&(o.tol_obj=$(".shipstooltip"),o.remainder_left=0,o.scroll_width=0,o.tol_link=0,o.left_flag,o.left_rem,o.scroll_amt,o.main_scroll_ele=$("#ships-product-scroll"),o.tooltip_arrow_controller(),select_link_ele(),$(".checkout-shipstogether-lbl label").click(function(e){var t=e.target||e.srcElement;"shipsborder"!==t.className&&"shipsborder-chk"!==t.className&&($(".shipstogetherUncheck").toggleClass("hide show"),$(".shipstogetherCheck").toggleClass("show hide"))}),$(".shipsborder,.shipsborder-chk").bind("click",function(e){o.tol_obj.is(":visible")?(o.tol_obj.hide(),e.preventDefault(),e.stopPropagation()):(set_hover_menu_position(),e.preventDefault(),e.stopPropagation())}),$("#shipTogether").click(function(){select_link_ele()}),o.scroll_width=0,o.left_flag=0,o.left_rem,o.scroll_amt=0,$("#ships-product-scroll .ships-product-scroll-slide ").each(function(){o.scroll_width+=$(this).width()+20}),o.main_scroll_ele.css("width",o.scroll_width+"px"),o.remainder_left=o.scroll_width-$(".shipstooltip-wrap").width(),o.left_rem=o.remainder_left,$("#ships-product-next").click(function(){0==o.left_flag&&(o.left_flag=1,o.left_rem>90?(o.scroll_amt=parseInt(o.main_scroll_ele.css("left"))-80,o.left_rem-=80,o.main_scroll_ele.animate({left:o.scroll_amt},350,function(){o.left_flag=0})):(o.scroll_amt=parseInt(o.main_scroll_ele.css("left"))-80,o.left_rem=0,o.main_scroll_ele.animate({left:o.scroll_amt},350,function(){o.left_flag=0}),$("#ships-product-next").addClass("inactive")),$("#ships-product-prev").removeClass("inactive"))}),$("#ships-product-prev").click(function(){0==o.left_flag&&(o.left_flag=1,parseInt(o.main_scroll_ele.css("left"))<-80?(o.scroll_amt=parseInt(o.main_scroll_ele.css("left"))+80,o.left_rem+=80,o.main_scroll_ele.animate({left:o.scroll_amt},350,function(){o.left_flag=0})):(o.scroll_amt=o.remainder_left-o.left_rem,o.left_rem=o.remainder_left,o.main_scroll_ele.animate({left:0},350,function(){o.left_flag=0}),$("#ships-product-prev").addClass("inactive")),$("#ships-product-next").removeClass("inactive"))}),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||($(document).mousemove(function(event){var mouse_x=event.pageX,mouse_y=event.pageY;(mouse_x<o.tol_obj.offset().left||o.tol_obj.offset().left+o.tol_obj.outerWidth()<mouse_x)&&o.tol_obj.hide(),mouse_y<o.tol_obj.offset().top?o.tol_obj.hide():o.tol_link.offset().left>mouse_x&&o.tol_obj.offset().top+o.tol_obj.outerHeight()<mouse_y?o.tol_obj.hide():o.tol_link.offset().left+o.tol_link.outerWidth()<mouse_x&&o.tol_obj.offset().top+o.tol_obj.outerHeight()<mouse_y?o.tol_obj.hide():o.tol_link.offset().top+o.tol_link.outerHeight()<mouse_y&&o.tol_obj.hide()}),$(".shipsborder,.shipsborder-chk").bind("mouseover",function(e){o.tol_obj.is(":visible")?(o.tol_obj.hide(),e.preventDefault(),e.stopPropagation()):(set_hover_menu_position(),e.preventDefault(),e.stopPropagation())})),$(document).click(function(event){var mouse_x=event.pageX,mouse_y=event.pageY;(mouse_x<o.tol_obj.offset().left||o.tol_obj.offset().left+o.tol_obj.outerWidth()<mouse_x)&&o.tol_obj.hide(),mouse_y<o.tol_obj.offset().top?o.tol_obj.hide():o.tol_link.offset().left>mouse_x&&o.tol_obj.offset().top+o.tol_obj.outerHeight()<mouse_y?o.tol_obj.hide():o.tol_link.offset().left+o.tol_link.outerWidth()<mouse_x&&o.tol_obj.offset().top+o.tol_obj.outerHeight()<mouse_y?o.tol_obj.hide():o.tol_link.offset().top+o.tol_link.outerHeight()<mouse_y&&o.tol_obj.hide()}))}),o.reset_scroll_bar=function(){document.querySelector(".shipstooltip")&&(o.scroll_width=0,o.left_flag=0,o.left_rem,o.scroll_amt=0),$("#ships-product-scroll .ships-product-scroll-slide ").each(function(){o.scroll_width+=$(this).width()+20}),o.main_scroll_ele.css("width",o.scroll_width+"px"),o.remainder_left=o.scroll_width-$(".shipstooltip-wrap").width(),o.left_rem=o.remainder_left,o.tol_link=$(".shipsborder"),o.main_scroll_ele.css("left","0px"),o.tooltip_arrow_controller()},o.tooltip_arrow_controller=function(){o.main_scroll_ele.find("span").length<3&&($("#ships-product-next").addClass("inactive"),$("#ships-product-prev").addClass("inactive"))},o}(),cbcObj={charge:1,oid:1};void 0===PF.CHECKOUT&&(!function(z,$){var utils=z.UTILITIES,o={timeToLive:3e4,timedObjects:{},cachedObjects:{},pageType:"",non_serviceable_items:[],isShipTogetherOpted:0,isCouponApplied:0,listen:{change:{"#fe_points":["PF.CHECKOUT.feCheckBoxChange","#page"]},click:{'[data-modal="ckGiftModal"]':["PF.CHECKOUT.trackEvent","#page"],"#ckFGYes":["PF.CHECKOUT.trackEvent","#page"],"#ckGiftModal":["PF.CHECKOUT.trackEvent","#page"],"#gvSubmit":["PF.CHECKOUT.giftcard.gift_voucher_apply","#page"],".gv_rmv_voucher":["PF.CHECKOUT.giftcard.remove_giftvocher","body"],".ck-sku-add-wl-link":["PF.CHECKOUT.addWishlistToWishlist","body"],".ck-item-wl-msg-wrap":["PF.CHECKOUT.removeProductFromWishlist","body"],".ck-non-del-rmv-link":["PF.CHECKOUT.addWishlistToWishlist","body"],".ck-non-oos-rmv-link":["PF.CHECKOUT.addWishlistToWishlist","body"],".ck-pgc-remove":["PF.CHECKOUT.giftcard.remove_giftvocher","body"]},keyup:{".input-gv-number":["PF.CHECKOUT.giftcard.inputValidate","body"],".input-gv-pin":["PF.CHECKOUT.giftcard.inputValidate","body"]}},trackEvent:function(){_label="click";if($("#ckFGYes").is(":visible"))var _label="I want this";dataLayer.push({category:"Free Gifts",action:"gift :T-Shirt|page type:Checkout order summary - web",label:_label,event:"event Free Gifts"})},init:function(){checkout_scripts.initialize(),utils.listen(o.listen),$("#fe_form_pin").length&&""!=$("#fe_form_pin").val()&&(o.exchange_pincode=$("#fe_form_pin").val()),$("input#pin_code").length?o.pageType="OrderSummary":$("#ckShippingAddress").length?(o.pageType="AddressSelection",$("#ckShippingAddress").length&&o.checkAssemblyPincode()):$("#guestUser").length&&(o.pageType="FirstTime",$("#postcode").length>0&&""!=$("#postcode").val()&&o.checkAssemblyPincode($("#postcode").val(),"postcode"),$("#bill_postcode").length>0&&""!=$("#bill_postcode").val()&&o.checkAssemblyPincode($("#bill_postcode").val(),"bill_postcode")),$(".mScrollBillingAddress").length>0&&global_function.mCustomScrollInit("mScrollBillingAddress"),"IN"==$("select.country_common").val()&&(window.last_verified_pin=$("#postcode").val(),window.last_bill_pin=$("#bill_postcode").val(),$("#postcode").attr("maxlength",6),$("#bill_postcode").attr("maxlength",6),o.postCodeCheck()),this.setEventHandlers(),"IN"!=$("#bill_postcode").val()&&$("#bill_postcode").attr("maxlength",10),"IN"!=$("#bill_country_id").val()?$("#s2id_bill_region_select").css("display","none"):$("#s2id_bill_region_select").css("display","inline-block"),$("#page").on("change","select#bill_country_id, select#country_id, #fe_points",function(e){switch($(this).attr("id").toLowerCase()){case"bill_country_id":"in"!=(_country=$.trim($(this).val().toLowerCase()))?($("#bill_region_select").val("").trigger("change").removeAttr("validate").attr("disabled","disabled").next(".select2-container").hide(),$("#bill_region_txtbox").val("").show().removeAttr("disabled").attr("validate","1").focus(),$("#bill_postcode").attr("type","text").attr("maxlength",10).removeAttr("validate").removeAttr("data-valid-attr"),$("#bill_postcode").off("blur").off("keydown").off("keyup").off("keypress"),$("#billAddAddrFrm").find("div").removeClass("frm-success-wrap").removeClass("frm-error-wrap"),$("#billAddAddrFrm").find(".error-msg").hide()):($("#bill_region_txtbox").val("").removeAttr("validate").attr("disabled","disabled").hide(),$("#bill_region_select").val("").trigger("change").removeAttr("disabled").attr("validate","1").next(".select2-container").show(),$("#bill_postcode").attr("type","number").attr("maxlength",6).attr("validate","1").attr("data-valid-attr","pincode"),PF.CHECKOUT.postCodeCheck());break;case"country_id":var _country=$.trim($(this).val().toLowerCase());if("in"!=_country){var defaultState=$("#region_select option:eq(0)").val();$("#s2id_region_select").select2("val",defaultState),$("#s2id_region_select").css("display","none"),$("#region_txtbox").show().focus()}else $("#region_txtbox").val("").hide(),$("#s2id_region_select").css("display","inline-block");break;case"fe_points":var fe_discount=parseInt($("#fe_points").val()),currentOfferPrice=parseInt($("#offer_price").attr("data-offer-price"));if($("#fe_points").is(":checked")){if(void 0!==o.exchange_pincode){var _pin=utils.readCookie("serviceable_pincode");$("#fe_error_msg").find(".error_msg_pincode").html(o.exchange_pincode),$("#form_fe_error_msg").find(".error_msg_pincode").html(o.exchange_pincode),utils.isNumber(_pin)&&_pin!=o.exchange_pincode&&($("#fe_error_msg").slideDown(),$("#form_fe_error_msg").slideDown())}_final=currentOfferPrice-fe_discount;$("#offer_price").attr("data-offer-price",_final),$("#offer_price .price-nmbr").html("<strong>Rs. "+utils.currencyFormat(Math.ceil(_final))+"</strong>")}else{$("#fe_error_msg").slideUp(),$("#form_fe_error_msg").slideUp();var _final=currentOfferPrice+fe_discount;$("#offer_price").attr("data-offer-price",_final),$("#offer_price .price-nmbr").html("<strong>Rs. "+utils.currencyFormat(Math.ceil(_final))+"</strong>")}o.totalPay()}}),$(document).on("keypress","input.quntity-input, input#coupon_code, input#pin_code",function(e){if(e.which==$.ui.keyCode.ENTER){switch($(this).attr("class").toLowerCase()){case"quntity-input":e.preventDefault();var _id=$(this).attr("id").split("_"),_val=parseInt($.trim($(this).val())),maxAvailableQty=$(this).data("avl-qty"),currentQty=$(this).attr("data-val");if(maxAvailableQty=maxAvailableQty>max_cart_qty?max_cart_qty:maxAvailableQty,$("#cart_product_"+_id[1]).hide(),$(this).siblings(".ck-sku-qty-minus").removeClass("disabled"),utils.isNumber(_val)&&_val<=maxAvailableQty&&_val>0)$(".cart-loader").show(),o.updateCartQty();else if($(this).val(currentQty),utils.isNumber(_val))if(_val>maxAvailableQty){var _text=" quantity.";maxAvailableQty>1&&(_text=" quantities."),$("#cart_product_"+_id[1]).html("You can not choose more than "+maxAvailableQty+_text).show()}else _val<=0&&1==currentQty&&$(this).siblings(".ck-sku-qty-minus").addClass("disabled");else $("#cart_product_"+_id[1]).html("Please choose a valid quantity").show();break;case"inputcoupon":0==o.isCouponApplied&&(o.isCouponApplied=1,$("#cpn_check_btn").trigger("click"));break;case"order_summary_pincode":$(".ck-pg-pincheck-bar").trigger("#pin_check");$(".order_summary_pincode").val();o.checkAssemblyPincode($(this).val())}e.stopPropagation()}}),$(".tooltip").mouseover(function(){$(this).siblings(".tooltip-txt").fadeIn()}).mouseout(function(){$(this).siblings(".tooltip-txt").fadeOut()}),$("#page").on("click",".ck-sku-qty-minus, .ck-sku-qty-add, a.edit_address, input.address_select_input",function(e){switch($(this).attr("class").toLowerCase()){case"ck-sku-qty-minus":$(".cart-loader").show();var _id=(_el=$(this).parent().find(".quntity-input")).attr("id").split("_"),_val=parseInt($.trim(_el.val()));if(maxAvailableQty=(maxAvailableQty=_el.attr("data-avl-qty"))>max_cart_qty?max_cart_qty:maxAvailableQty,$("#cart_product_"+_id[1]).hide(),$(this).removeClass("disabled"),utils.isNumber(_val))if((_val-=1)<=maxAvailableQty&&_val>0)_el.val(_val),o.updateCartQty();else{if(_el.val(_el.attr("data-val")),_val>maxAvailableQty){_text=" quantity.";maxAvailableQty>1&&(_text=" quantities."),$("#cart_product_"+_id[1]).html("You can not choose more than "+maxAvailableQty+_text).show()}else $(this).addClass("disabled");$(".cart-loader").hide()}else _el.val(_el.attr("data-val")),$("#cart_product_"+_id[1]).html("Please choose a valid quantity").show(),$(".cart-loader").hide();break;case"ck-sku-qty-add":$(".cart-loader").show();var _el=$(this).parent().find(".quntity-input"),_id=_el.attr("id").split("_"),_val=parseInt($.trim(_el.val())),maxAvailableQty=_el.data("avl-qty");if(maxAvailableQty=maxAvailableQty>max_cart_qty?max_cart_qty:maxAvailableQty,$("#cart_product_"+_id[1]).hide(),$(this).siblings(".ck-sku-qty-minus").removeClass("disabled"),utils.isNumber(_val))if((_val+=1)<=maxAvailableQty&&_val>0)_el.val(_val),o.updateCartQty();else{if(_el.val(_el.attr("data-val")),_val>maxAvailableQty){var _text=" quantity.";maxAvailableQty>1&&(_text=" quantities."),$("#cart_product_"+_id[1]).html("You can not choose more than "+maxAvailableQty+_text).show()}else $(this).siblings(".ck-sku-qty-minus").addClass("disabled");$(".cart-loader").hide()}else _el.val(_el.attr("data-val")),$("#cart_product_"+_id[1]).html("Please choose a valid quantity").show(),$(".cart-loader").hide();break;case"edit_address":o.resetForm();_id=$(this).data("addressid");$("#update_id").val(_id),o.showAddressForEdit(_id);break;case"address_select_input":var _id=$(this).val(),_type=$(this).attr("name").split("_").shift();1==$(this).is(":checked")&&o.setDefaultAddress(_id,_type)}}),$(".ck-pg-pincheck-bar").bind("#pin_check",function(e){var _thspin=$(".order_summary_pincode").val();if(void 0===_thspin||!utils.isNumber(_thspin)||6!=_thspin.length)return $(".ck-pin-input-error-wrap").css("display","block"),$(".ck-pin-input-error-wrap").siblings("div").addClass("invld-pin"),!1;$(".order_summary_pincode").val(_thspin),$(".ck-pin-entered span").text(_thspin)}),$("#page").on("click","a#assembly_product_count, a#form_assembly_product_count, a#okay_got_it, a#form_okay_got_it, a#empty_user_cart, a#scroll_to_cart, a#form_remove_non_serviceable_items, a#remove_non_serviceable_items, #shpt, #shptFinalPage, #ck-pin-entered-edit, input.order_summary_pincode_btn",function(e){switch($(this).attr("id").toLowerCase()){case"assembly_product_count":$("#assembly_error_product_msg").is(":visible")||$("#assembly_error_product_msg").slideDown();break;case"form_assembly_product_count":$("#form_assembly_error_product_msg").is(":visible")||$("#form_assembly_error_product_msg").slideDown();break;case"okay_got_it":$("#assembly_error_product_msg").is(":visible")&&$("#assembly_error_product_msg").slideUp();break;case"form_okay_got_it":$("#form_assembly_error_product_msg").is(":visible")&&$("#form_assembly_error_product_msg").slideUp();break;case"empty_user_cart":o.emptyCart(e);break;case"scroll_to_cart":$("html, body").animate({scrollTop:$("#ck-sku-list-wrap").offset().top},1e3);break;case"remove_non_serviceable_items":case"form_remove_non_serviceable_items":o.removeNonServiceableItem();break;case"shpt":e.stopImmediatePropagation(),o.handleShipTogether();break;case"shptfinalpage":e.stopImmediatePropagation(),o.isShipTogetherOpted||(o.isShipTogetherOpted++,$("#shipTogether").prop("checked","checked"),o.handleShipTogetherFinalPage());break;case"pin_check":$(".ck-pg-pincheck-bar").trigger("#pin_check");var _cur_pin=$(".order_summary_pincode").val();o.checkAssemblyPincode(_cur_pin);break;case"ck-pin-entered-edit":$(".ck-pin-entered,.ck-pin-input-error-wrap").hide(),$(".ck-pin-input-error-wrap").siblings("div").removeClass("invld-pin"),$(".ck-pin-input-wrap").show()}}),$(".ck-addr-auto-pre-head .ck-bill-modal-link").click(function(){if($("#auto-pincode").length>0&&""!=$.trim($("#auto-pincode").text())&&$("#bill_postcode").val($.trim($("#auto-pincode").text())),$("#auto-fn").length>0&&""!=$.trim($("#auto-fn").text())&&$("#bill_firstname").val($.trim($("#auto-fn").text())),$("#auto-ln").length>0&&""!=$.trim($("#auto-ln").text())&&$("#bill_lastname").val($.trim($("#auto-ln").text())),$("#auto-addr-txt").length>0&&""!=$.trim($("#auto-addr-txt").text())&&$("#bill_street").val($.trim($("#auto-addr-txt").text())),$("#auto-area").length>0&&""!=$.trim($("#auto-area").text())&&$("#bill_street2").val($.trim($("#auto-area").text())),$("#auto-landmark").length>0&&""!=$.trim($("#auto-landmark").text())&&$("#bill_landmark").val($.trim($("#auto-landmark").text())),$("#auto-city").length>0&&""!=$.trim($("#auto-city").text())&&$("#bill_city").val($.trim($("#auto-city").text())),$("#auto-country").length>0&&""!=$.trim($("#auto-country").text())){var bill_country_id="";$("#bill_country_id option").each(function(){$(this).text()==$.trim($("#auto-country").text())&&(bill_country_id=$(this).val())}),$("#bill_country_id").val(bill_country_id),"india"!=$.trim($("#auto-country").text().toLowerCase())?($("#bill_region_txtbox").val($.trim($("#auto-state").text())).removeAttr("disabled").attr("validate","1").focus().show(),$("#bill_region_select").val("").trigger("change").removeAttr("validate").attr("disabled","disabled").next(".select2-container").hide(),$("#bill_postcode").attr("type","text").attr("maxlength",10).removeAttr("validate").removeAttr("data-valid-attr"),$("#bill_postcode").off("blur").off("keydown").off("keyup").off("keypress"),$("#billAddAddrFrm").find("div").removeClass("frm-success-wrap").removeClass("frm-error-wrap"),$("#billAddAddrFrm").find(".error-msg").hide()):($("#bill_region_select").val($("#auto-state").text()).trigger("change").removeAttr("disabled").attr("validate","1").next(".select2-container").show(),$("#bill_region_txtbox").val("").removeAttr("validate").attr("disabled","disabled").hide(),$("#bill_postcode").attr("type","number").attr("maxlength",6).attr("validate","1").attr("data-valid-attr","pincode"),PF.CHECKOUT.postCodeCheck())}$("#auto-mobile").length>0&&""!=$.trim($("#auto-mobile").text())&&$("#bill_mobile").val($.trim($("#auto-mobile").text())),$(".ck-bill-addr-frm-wrap").show()}),$(".ck-del-addr-add-new").click(function(){$("#editdeladdr").html("ADD NEW ADDRESS"),$(".ck-del-addr-list-wrap").slideUp(100),$(".ck-saved-addr-back-wrap").show(200),$(this).hide(),$("#save_address").val(1),$(".ck-del-addr-add-frm-wrap").slideDown(300),$("html, body").animate({scrollTop:$(".ck-addr-selection-left-wrap").offset().top},2e3),$("#pincode_error_shipping").length>0&&$("#pincode_error_shipping").html(""),utils.createCookie("pincode_service_call","add_address"),o.removeAllAddressMessages(),PF.HEADER.resetFormByFormID("address_select_form")}),$(".ck-saved-addr-back-wrap").click(function(){$(this).hide(),$(".ck-del-addr-list-wrap").slideDown(300),$(".ck-del-addr-add-new").slideDown(300),$(".ck-del-addr-add-frm-wrap,.ck-del-addr-edit-frm-wrap").slideUp(100),o.serviceCallForSelectedAddress()}),$(".ck-addr-frm-cancel-btn").click(function(){$(".ck-saved-addr-back-wrap").hide(),$(".ck-del-addr-add-frm-wrap,.ck-del-addr-edit-frm-wrap").slideUp(100),$(".ck-del-addr-list-wrap").slideDown(300),$(".ck-del-addr-add-new").slideDown(300),"address_select_form"==$(this).parents("form").attr("id")&&o.serviceCallForSelectedAddress(),$("#billing_address_changed")||o.checkAssemblyPincode()}),$(".clear-form-fields").click(function(){PF.HEADER.resetFormByFormID($(this).parents("form").attr("id"))}),$(".newbillingaddr .ck-addr-frm-cancel-btn").click(function(){$(this).closest(".popup-box").fadeOut(200),$("#popup_overlay,.popup_overlay").hide(100),$("body").removeClass("active")}),$(".serviceCallForSelectedAddress").click(function(){o.serviceCallForSelectedAddress()}),$(".ck-bil-addr-slide").click(function(){$(".ck-bil-addr-slide").removeClass("selected"),$(this).addClass("selected")}),$(".ck-bill-addr-add-new").click(function(){$(".ck-bil-addr-sel-wrap, .ck-bill-addr-add-new").hide(),$(".ck-bill-addr-frm-wrap").show(),PF.HEADER.resetFormByFormID("billAddAddrFrm")}),$(".ck-addr-frm-cancel-btn").click(function(){$(".ck-bill-addr-frm-wrap,.ck-bill-addr-edit-frm-wrap").hide(),$(".ck-bil-addr-sel-wrap,.ck-bil-addr-add-new-wrap, .ck-bill-addr-add-new").show()}),$(".ck-del-addr-list-item-content label").click(function(){$(".ck-del-addr-list-item").removeClass("selected"),$(this).closest(".ck-del-addr-list-item").addClass("selected")});var AutoPopulateArray=[{"auto-fn":{firstname:"text"}},{"auto-ln":{lastname:"text"}},{"auto-addr-txt":{street:"text"}},{"auto-area":{street2:"text"}},{"auto-landmark":{landmark:"text"}},{"auto-city":{city:"text"}},{"auto-pincode":{postcode:"text"}},{"auto-state":{region_select:"select"}},{"auto-country":{country_id:"select"}},{"auto-mobile":{mobile:"text"}}];$.each(AutoPopulateArray,function(index,item){$.each(item,function(autoFillnode,node){$.each(node,function(mainNode,fieldType){"text"==fieldType&&0==$("#billing_address_changed").val()?(""==$.trim($("#"+autoFillnode).text())&&$("#"+autoFillnode).text($("#"+mainNode).val()),$("#"+mainNode).bind("keypress change keyup",function(){0==$("#billing_address_changed").val()&&($("#"+autoFillnode).text($("#"+mainNode).val()),$(".add_address_first_time").length>0&&($("#hidden_"+mainNode).val($("#"+mainNode).val()),$("#hidden_bill_"+mainNode).val($("#"+mainNode).val())))})):"select"==fieldType&&0==$("#billing_address_changed").val()&&(""==$.trim($("#"+autoFillnode).find(":selected").text())&&$("#"+autoFillnode).text($("#"+mainNode).find(":selected").text()),$("#"+mainNode).bind("change",function(){0==$("#billing_address_changed").val()&&($("#"+autoFillnode).text($("#"+mainNode).find(":selected").text()),$(".add_address_first_time").length>0&&($("#hidden_"+$("#"+mainNode).attr("name")).val($("#"+mainNode).val()),$("#hidden_bill_"+$("#"+mainNode).attr("name")).val($("#"+mainNode).val())))}))})})}),$(".ck-bill-change-link").click(function(){$(".ck-bil-addr-sel-wrap, .ck-bil-addr-add-new-wrap,.ck-bill-addr-add-new").show(),$(".ck-bill-addr-frm-wrap,.ck-bill-addr-edit-frm-wrap").hide()}),$(".ck-bil-addr-slide").click(function(e){$(".ck-bil-addr-slide").removeClass("selected"),$(this).addClass("selected"),$(this).closest(".popup-box").fadeOut(200),$("#popup_overlay,.popup_overlay").hide(100),$("body").removeClass("active");var entity_id=$(this).children('[name="billing_address_id"]').val();utils.createCookie("billing_address_changed",1),o.setBillingAddress(entity_id),e.stopPropagation()}),$("#btn_save_shipping").click(function(){var string=$("#street").val();string=string.replace(/\s\s+/g," "),$("#address_select_form #street").val(string),$("#address_select_form").submit()}),$("#btn_save_billing").click(function(){if(!PF.HEADER.validateForm("","billAddAddrFrm")){var string=$("#bill_street").val();if(string=string.replace(/\s\s+/g," "),$("#bill_street").val(string),$("#billing_address_changed").length>0){var billform=$(".ck-bill-addr-frm-wrap"),shipform=$(".ck-addr-frm-wrap");if(billform.find(".ck-pincode-ip").val()==shipform.find(".ck-pincode-ip").val()&&billform.find(".ck-fname-ip").val()==shipform.find(".ck-fname-ip").val()&&billform.find(".ck-lname-ip").val()==shipform.find(".ck-lname-ip").val()&&billform.find(".ck-addr-ip").val()==shipform.find(".ck-addr-ip").val()&&billform.find(".ck-city-ip").val()==shipform.find("#city").val()&&billform.find(".ck-state-select").val()==shipform.find(".ck-state-select").val()&&billform.find("#bill_street2").val()==shipform.find("#street2").val()&&billform.find("#bill_landmark").val()==shipform.find("#landmark").val()&&billform.find(".ck-mobile-ip").val()==shipform.find(".ck-mobile-ip").val())$("#billing_address_changed").val("0"),$("#save_billing_address").val("0"),utils.createCookie("billing_address_changed",0);else{var AutoPopulateArray=[{"auto-fn":{firstname:"text"}},{"auto-ln":{lastname:"text"}},{"auto-addr-txt":{street:"text"}},{"auto-area":{street2:"text"}},{"auto-landmark":{landmark:"text"}},{"auto-city":{city:"text"}},{"auto-pincode":{postcode:"text"}},{"auto-state":{region_select:"select"}},{"auto-country":{country_id:"select"}},{"auto-mobile":{mobile:"text"}}];$.each(AutoPopulateArray,function(index,item){$.each(item,function(autoFillnode,node){$.each(node,function(mainNode,fieldType){"text"==fieldType?($("#"+autoFillnode).text($("#bill_"+mainNode).val()),$("#hidden_bill_"+mainNode).val($("#bill_"+mainNode).val())):"select"==fieldType&&($("#"+autoFillnode).text($("#bill_"+mainNode).find(":selected").text()),$("#hidden_bill_"+$("#"+mainNode).attr("name")).val($("#bill_"+mainNode).val())),"country_id"==mainNode&&"IN"!=$("#bill_"+mainNode).val()&&($("#hidden_bill_region").val($("#bill_region_txtbox").val()),$("#auto-state").text($("#bill_region_txtbox").val()))})})}),$("#billing_address_changed").val("1"),$("#save_billing_address").val("1"),utils.createCookie("billing_address_changed",1)}$(".popup-close").trigger("click")}else $("#billAddAddrFrm").submit()}}),$("#guestAddressSubmit").click(function(){PF.HEADER.validateForm("","address_select_form")||$("#address_select_form").submit()}),utils.createCookie("pincode_service_call","select_address"),o.displayCashbackMessage(),o.emiOptionDisplay(),o.billAddrSelSlider(),o.initSliders(),$(".ck-state-select").length>0&&$(".ck-state-select,.ck-country-select").select2()},setEventHandlers:function(){$(".ck-sku-row-wrap").on("click",".trash, div.ck-item-rmd-msg-wrap, div.ck-item-wl-msg-wrap",function(e){switch(e.preventDefault(),$(".cart-loader").show(),$(this).attr("class").toLowerCase()){case"trash":o.deleteProductFromCart(this),$(".pf-tooltip").remove();break;case"ck-item-rmd-msg-wrap":case"ck-item-wl-msg-wrap":o.undoDeleteProductFromCart(this),$(".pf-tooltip").remove()}}),$("select.country_common:visible").change(function(){"IN"!=$(this).val()?($("#postcode").attr("maxlength",10),$("#bill_postcode").attr("maxlength",10)):($("#postcode").attr("maxlength",6),$("#bill_postcode").attr("maxlength",6),o.postCodeCheck())}),$(".ck-gb-select").on({change:function(e){try{var el=$(e.target).find("option:selected");"cbc"==$("#payment_method").val().toLowerCase()&&(cbcObj.charge=parseFloat(el.data("cbccharge")),cbcObj.oid=parseFloat(el.data("oid"))),parseInt(el.val())?o.setPaymentMethod(el.val(),el.text()):$(".emi-bank-container").css("display","none")}catch(error){}}}),$('#ckPaymentMethodContainer input[type="radio"]').length>0&&($("#ckPaymentMethodContainer select").each(function(){var id=$(this).attr("id");if(void 0!==id){var el=$("#s2id_"+id);$(this).is(":hidden")&&el.hide()}}),$('#ckPaymentMethodContainer input[type="radio"]').change(function(){if(o.resetBankSelection(),$(this).is(":checked")){var value=$(this).val(),preId="",isPartPay=$("#checkoutPartPayContainer").css("display");"none"!=isPartPay&&void 0!==isPartPay&&(preId="partpay_");var input_type=$("#payment_method").val().toLowerCase();if("emi"==input_type){$("#tenure").html($("#"+value+" label").html().toLowerCase()),$("#charge").html($("#"+value+" .ck-emi-td.rate").html()),emidisc=0,$("#emi_disc").css("display","none");var emidisc=$(this).closest(".ck-emi-tr").find(".nc-emi-discount").text();0!=emidisc&&($("#emi_disc").css("display","block"),$("#emi_intr").html(emidisc)),$("#no_bank").css("display","none"),$("#emi_note").css("display","block")}else if("credit_card"==input_type)0==parseInt(value)?($(" #"+preId+"credit_bank_select").show(),$(" #s2id_"+preId+"credit_bank_select").show()):($("#"+preId+"credit_bank_select").hide(),$(" #s2id_"+preId+"credit_bank_select").hide(),$("#credit_bank_select").siblings(".select2-container").hide());else if("debit_card"==input_type)$(" #"+preId+"bank_select_visa").hide(),$(" #"+preId+"bank_select_master").hide(),$(" #"+preId+"bank_select_maestro").hide(),$(" #s2id_"+preId+"bank_select_visa").hide(),$(" #s2id_"+preId+"bank_select_master").hide(),$(" #s2id_"+preId+"bank_select_maestro").hide(),$("#bank_select_maestro").siblings(".select2-container").hide(),$("#bank_select_visa").siblings(".select2-container").hide(),$("#bank_select_master").siblings(".select2-container").hide(),0==parseInt(value)&&($(" #"+preId+"bank_select_maestro").show(),$(" #s2id_"+preId+"bank_select_maestro").show(),$(" #"+preId+"bank_select_maestro").siblings(".select2-container").show(),$(this).parent(".ck-payment-cards").click());else if("cod"==input_type){var total_pay=parseInt($("#total_pay_amount").val())-parseInt($("#online_shipping_charge").val())+parseInt($("#cod_shipping_charge").val()),shipping_cod=parseInt($("#online_shipping_charge").val())+parseInt($("#cod_shipping_charge").val()),cod_ship=utils.currencyFormat(Math.ceil(shipping_cod));$("#shipping_cod").html("Rs. "+cod_ship);_pmt=utils.currencyFormat(Math.ceil(total_pay));$("#payment_form").find(".final-pricing-checkout .txt-red").html("Rs. "+_pmt),$("#total_pay_coupon_top").html("Rs. "+_pmt),$(".total_pay_coupon_top").html("Rs. "+_pmt),$("#grow-tree-contri").css("display","none"),_pmt=cod_ship=""}else"paypal"==input_type&&$(this).parent().addClass("active");if("cbc"!=input_type)$("#payment_"+input_type).val(value),$("#payment_option_selected").val(value);else if("net_banking"!=input_type){var defaultselect=$("#ckPaymentMethodContainer #partPayOptionArea select").find("option:first").val();$("#s2id_partpay_bank_select").select2("val",defaultselect)}if("cbc"==input_type){var growtreeVal=0;$("#growTree").is(":checked")&&(growtreeVal=parseInt(donation));var cbc_charge=parseFloat($(this).data("cbccharge"));if((value=parseFloat($(this).data("oid")))?($("#payment_"+input_type).val(value),$("#payment_option_selected").val(value)):"cashpayDeposit"==$(this).attr("id")?$("#s2id_bank_select_deposit").show():"cashpayDoorstep"==$(this).attr("id")&&$("#s2id_bank_select_pickup").show(),isNaN(cbc_charge)){var total=parseInt($("#total_pay_amount").val()),total_pay=total+growtreeVal,_pmt=utils.currencyFormat(Math.ceil(total_pay));$("#payment_form").find(".final-pricing-checkout .txt-red").html("Rs. "+_pmt),$("#total_pay_coupon_top").html("Rs. "+_pmt),$(".total_pay_coupon_top").html("Rs. "+_pmt),_pmt="",$("#cbc_added_amount").attr("data-cbc-amount",0),$("#payment_option_selected").val("")}else{var cbc_added=(total=parseInt($("#total_pay_amount").val()))*parseFloat(cbc_charge)/100,total_pay=total+Math.ceil(cbc_added)+growtreeVal,shipping_cod=parseInt($("#online_shipping_charge").val())+Math.ceil(cbc_added),_pmt=utils.currencyFormat(Math.ceil(total_pay));$("#payment_form").find(".final-pricing-checkout .txt-red").html("Rs. "+_pmt),$("#shipping_cod").html("Rs. "+shipping_cod),$("#total_pay_coupon_top").html("Rs. "+_pmt),$(".total_pay_coupon_top").html("Rs. "+_pmt),_pmt="",shipping_cod="",$("#cbc_added_amount").attr("data-cbc-amount",Math.ceil(cbc_added));var _final_cbc_added=Math.ceil(cbc_added);_final_cbc_added>0&&"cashpayDoorstep"==$(this).attr("id")&&($("#cbc_amt").text("of "+_final_cbc_added),$("#cbc_charge_show").text("+ Rs."+_final_cbc_added),$("#cbc_charge_show, #cbc_collect_cash").show(),$("#non-refund-cbc-note").text("Non Refundable CashPay charge of "+_final_cbc_added+" applicable").show(),$(".cbc_charges").text("Rs."+(total+growtreeVal)+" + Rs."+_final_cbc_added).show())}o.checkCBCrange(total_pay)}}})),$("#partPayAgreement").length>0&&$("#partPayAgreement").change(function(){if($(this).is(":checked")){var total=parseInt($("#total_pay_amount").val()),part_remaining_amount=parseInt($("#net_part_payment_remaining").attr("data-net_part_payment_remaining")),newpartamtval=$.cookie("newpartamt");if(!isNaN(part_remaining_amount)){var complete_remaining_amount=total-part_remaining_amount,convenience_fee=parseInt($("#convenience_fee").attr("data-convenience_fee"));isNaN(convenience_fee)||(complete_remaining_amount+=convenience_fee),complete_remaining_amount=$("#growTree").is(":checked")?parseInt(complete_remaining_amount)+parseInt(donation):$(".checkout-partpay-amount").attr("data-netpayable"),$(".final-pricing-checkout .txt-red").html("Rs. "+utils.currencyFormat(Math.ceil(complete_remaining_amount))),$("#total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(complete_remaining_amount))),$(".total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(complete_remaining_amount)))}$("#total_pay_coupon1").html("Rs. "+utils.currencyFormat(Math.ceil(complete_remaining_amount))),$("#total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(complete_remaining_amount))),$(".total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(complete_remaining_amount))),o.handlePartPay("checked",part_remaining_amount,complete_remaining_amount)}else{$("#checkoutPaySecureBtn").addClass("disabled"),$("#partPayBreakupDetail").slideDown(),$("#partPayAmtView, #partPayDropDown").hide();var complete_remaining_amount=parseInt($("#total_pay_amount").val()),newpartamtval=$.cookie("newpartamt");$("#growTree").is(":checked")&&(complete_remaining_amount=newpartamtval),$(".final-pricing-checkout .txt-red").html("Rs. "+utils.currencyFormat(Math.ceil(complete_remaining_amount))),$("#total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(complete_remaining_amount))),$(".total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(complete_remaining_amount))),o.handlePartPay("unchecked")}}),$("#growTree").change(function(){if($(this).is(":checked")){if(o.handleGrowTree("checked"),$(".cbc_panel").is(":visible")){var cbc_added_amount=0,total=parseInt($("#total_pay_amount").val());if($("#cbc_added_amount").length>0){cbc_amount=parseInt($("#cbc_added_amount").attr("data-cbc-amount"));isNaN(cbc_amount)||(cbc_added_amount=cbc_amount)}cbc_added_amount>0&&$(".cbc_charges").text("Rs."+(total+parseInt(donation))+" + Rs."+cbc_added_amount);complete_total=total+cbc_added_amount+parseInt(donation);$("#payment_form").length>0&&($("#payment_form").find(".final-pricing-checkout .txt-red").html("Rs. "+utils.currencyFormat(Math.ceil(complete_total))),$("#total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(complete_total))),$(".total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(complete_total)))),o.checkCBCrange(complete_total)}}else if(o.handleGrowTree(),$(".cbc_panel").is(":visible")){var cbc_added_amount=0,total=parseInt($("#total_pay_amount").val());if($("#cbc_added_amount").length>0){var cbc_amount=parseInt($("#cbc_added_amount").attr("data-cbc-amount"));isNaN(cbc_amount)||(cbc_added_amount=cbc_amount)}cbc_added_amount>0&&$(".cbc_charges").text("Rs."+total+" + Rs."+cbc_added_amount);var complete_total=total+cbc_added_amount;$("#payment_form").length>0&&($("#payment_form").find(".final-pricing-checkout .txt-red").html("Rs. "+utils.currencyFormat(Math.ceil(complete_total))),$("#total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(complete_total))),$(".total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(complete_total)))),o.checkCBCrange(complete_total)}o.handleWalletError()}),"undefined"!=$("a.btn_green, a.btn_green_big, a.green-action-btn").data("isloading")&&$("a.btn_green, a.btn_green_big, a.green-action-btn").on("click",function(e){e.preventDefault(),"undefined"!=$(this).attr("data-isloader")&&"1"==$(this).attr("data-isloader")&&"undefined"!=$(this).attr("href")&&"javascript:void(0)"!=$(this).attr("href")&&(o.changeButtonState("loading"),location.href=$(this).attr("href"))})},deleteProductFromCart:function(el){var pid=$.trim($(el).data("id"));if(""!=pid){var _url=root_url+"/cart/removeitem/"+pid+"/1/1",_params={pid:pid.split(","),evt:el,evt_class:$.trim($(el).attr("class"))};utils.makeRequest(_url,"POST",{},o.handleDeleteCartProduct,o.handleError,"",_params)}},handleDeleteCartProduct:function(_data,_params){$(".cart-loader").hide();var data,_param_class="";try{data=$.parseJSON(_data)}catch(_error){data=_data}var valid_item=parseInt(data.valid_items)>1?data.valid_items+" Items":data.valid_items+" Item";switch($("h2.ck-pg-title span").text("("+valid_item+")"),$.each(_params.pid,function(inx,el){var _params_pid=el,giftcount=$("#gift_card_count").val(),physicalGiftCount=data.physical_giftcard_count;if(o.removecartgtm(_params_pid),giftcount>0){var isGiftCard=$("#giftcard_"+_params_pid).val(),giftCardNature=$("#giftcard_nature_"+_params_pid).val();1==isGiftCard&&(giftcount-=1,$("input#gift_card_count").val(giftcount)),giftCardNature&&"physical"==(giftCardNature=giftCardNature.toLowerCase())&&$("input#physical_giftcard_count").val(physicalGiftCount)}switch(giftcount<=5&&$("#maxGiftcard_error_msg").css("display","none"),void 0!==physicalGiftCount&&0!=physicalGiftCount||($("#physical_gc_charge").attr("data-gc-amount",0),$("#physical_gc_charge .price-nmbr").html("Rs. 0"),$("#physical_gc_charge div").hide(),$("#physical_gc_charge_hidden").val(0)),_params.evt_class){case"trash":$("#cartitem_"+_params_pid).siblings(".ck-item-rmd-msg-wrap").attr("data-hash",data.removed_item),$('div[id^="cartitem_'+_params_pid+'"]').closest(".ck-sku-row-content").siblings(".ck-item-rmd-msg-wrap").slideDown("300"),$('div[id^="cartitem_'+_params_pid+'"]').closest(".ck-sku-row-wrap .ck-sku-row-content").slideUp("300"),$("#additional_discount").length>0&&o.removeRowDiscount(),o.cachedObjects[data.removed_item]=$.extend(!0,{},$("#cartitem_"+_params_pid)),o.timedObjects[data.removed_item]=setTimeout(function(){1==$(".ck-sku-row-wrap").length&&$(".btn_green_big").addClass("disabled"),o.deleteTimedObject(_params_pid,data.removed_item)},o.timeToLive),$('.ck-sku-row-wrap div[id^="cartitem_'+_params_pid+'"]').remove();break;case"ck-sku-add-wl-link":$("#cartitem_"+_params_pid).siblings(".ck-item-wl-msg-wrap").attr("data-hash",data.removed_item),$('div[id^="cartitem_'+_params_pid+'"]').closest(".ck-sku-row-content").siblings(".ck-item-wl-msg-wrap").slideDown("300"),$('div[id^="cartitem_'+_params_pid+'"]').closest(".ck-sku-row-wrap .ck-sku-row-content").slideUp("300"),o.cachedObjects[data.removed_item]=$.extend(!0,{},$("#cartitem_"+_params_pid)),o.timedObjects[data.removed_item]=setTimeout(function(){1==$(".ck-sku-row-wrap").length&&$(".btn_green_big").addClass("disabled"),o.deleteTimedObject(_params_pid,data.removed_item)},o.timeToLive),$('.ck-sku-row-wrap div[id^="cartitem_'+_params_pid+'"]').remove();break;case"ck-non-del-rmv-link":if($("#cartitem_"+_params.pid[0]).siblings(".ck-item-wl-msg-wrap").attr("data-hash",data.removed_item),_param_class=$(".ck-non-del-rmv-link"),(nonDelItemsCnt=$('div[id^="rm_cartitem_'+_params.pid[0]+'"].ck-non-del-product-slide').parents(".ck-non-del-product-slider-wrap").children(".ck-non-del-product-slide").length)>1){_param_class.parents(".ck-non-del-product").find(".ck-non-del-wl-msg").css("display","inline-block"),_param_class.closest('div[id^="rm_cartitem_'+_params.pid[0]+'"].ck-non-del-product-slide').slideUp().remove(),o.osNonDelSlider();var set_itm_lenth=$(".os-non-del-ext-wrap .ck-non-del-product-slider-wrap"),nchildren=set_itm_lenth.children(".ck-non-del-product-slide").length;set_itm_lenth.siblings(".ck-non-del-product-cnt ").children(".ck-non-del-product-cnt-no").text(nchildren),$(".ck-non-rmd-msg-wrap .txt-cnt").text(parseInt(nonDelItemsCnt)-1),setTimeout(function(){$(".ck-non-del-rmv-wl-wrap .ck-non-del-wl-msg").hide()},5e3)}else $(".ck-non-rmd-msg-wrap .final-rmtxt").text("added to wishlist"),$(".ck-non-del-rmv-link").parents(".ck-non-del-wrap").hide(),$(".ck-non-del-rmv-link").parents(".os-non-del-ext-wrap").children(".ck-non-rmd-msg-wrap").slideDown(100),$(".ck-non-del-rmv-link").closest(".ck-non-del-product-slide").slideUp().remove(),setTimeout(function(){$(".ck-non-rmd-msg-wrap").hide()},5e3);o.cachedObjects[data.removed_item]=$.extend(!0,{},$("#cartitem_"+_params.pid[0])),o.deleteTimedObject(_params.pid[0],data.removed_item),$('.ck-sku-row-wrap div[id^="cartitem_'+_params.pid[0]+'"]').remove();break;case"ck-non-oos-rmv-link":_param_class=$(".ck-non-oos-rmv-link");var nonDelItemsCnt=$('div[id^="rm_cartitem_'+_params.pid[0]+'"].ck-non-del-product-slide').parents(".ck-non-del-product-slider-wrap").children(".ck-non-del-product-slide").length;if(_param_class.closest('div[id^="rm_cartitem_'+_params.pid[0]+'"].ck-non-del-product-slide').slideUp().remove(),nonDelItemsCnt>1){_param_class.parents(".ck-non-del-product").find(".ck-non-del-wl-msg").css("display","inline-block");var notify_ids=$(".ck-non-oos-rm-btn").attr("data-id"),notify_arr=JSON.parse("["+notify_ids+"]");notify_arr=jQuery.grep(notify_arr,function(value){return value!=_params.pid[0]}),$(".ck-non-oos-rm-btn").attr("data-id",notify_arr.toString());var notify_ids=$('input[name="ck_oos_notify_btn"]').attr("data-id"),notify_arr=JSON.parse("["+notify_ids+"]");notify_arr=jQuery.grep(notify_arr,function(value){return value!=_params.pid[0]}),$('input[name="ck_oos_notify_btn"]').attr("data-id",notify_arr.toString()),o.osOosSlider(),$(".ck-oos-rmd-msg-wrap .txt-cnt").text(parseInt(nonDelItemsCnt)-1),setTimeout(function(){$(".ck-non-del-rmv-wl-wrap .ck-non-del-wl-msg").hide()},5e3)}else $(".ck-oos-rmd-msg-wrap .final-rmtxt").text("added to wishlist"),$(".ck-non-oos-rm-btn").parents(".ck-non-del-wrap").hide(),$(".ck-non-oos-rm-btn").parents(".os-oos-ext-wrap").children(".ck-oos-rmd-msg-wrap").slideDown(100),$(".ck-non-oos-rm-btn").closest(".ck-non-del-product-slide").slideUp().remove(),setTimeout(function(){$(".ck-oos-rmd-msg-wrap").hide()},5e3)}}),o.handleCartBehaviour(data),_params.evt_class){case"ck-non-oos-rm-btn":if((_param_class=$(".ck-non-oos-rmv-link")).parents(".ck-non-del-wrap").hide(),_param_class.parents(".os-oos-ext-wrap").children(".ck-oos-rmd-msg-wrap").slideDown(100),_param_class.closest(".ck-non-del-product-slide").slideUp().remove(),data.pincode&&data.pincode_failed){var data_pincode_failed=data.pincode_failed;o.createPincodeErrorblock(data_pincode_failed),o.osOosSlider(),$("#ckNonDelWrap").css("display","block"),$(".os-non-del-ext-wrap").css("display","block")}setTimeout(function(){$(".ck-oos-rmd-msg-wrap").hide()},3e3);break;case"ck-non-del-rm-btn":_param_class=$(".ck-non-del-rmv-link");var cart_failed_itms=$(_params.evt).attr("data-id").split(",");cart_failed_itms&&$.each(cart_failed_itms,function(inx,el){o.cachedObjects[data.removed_item]=$.extend(!0,{},$("#cartitem_"+el)),o.deleteTimedObject(el,data.removed_item),$('.ck-sku-row-wrap div[id^="cartitem_'+el+'"]').remove()}),_param_class.parents(".ck-non-del-wrap").hide(),_param_class.parents(".os-non-del-ext-wrap").children(".ck-non-rmd-msg-wrap").slideDown(100),_param_class.closest(".ck-non-del-product-slide").slideUp().remove(),setTimeout(function(){$(".ck-non-rmd-msg-wrap").hide()},3e3)}data.free_gift_panasonic_details.dummy_id_present&&!data.free_gift_panasonic_details.status?(PF.CHECKOUT.disabled_proceed_to_checkout=!0,$(".btn_green").hasClass("disabled")||$(".btn_green").addClass("disabled"),$(".btn_green_big").hasClass("disabled")||$(".btn_green_big").addClass("disabled")):PF.CHECKOUT.disabled_proceed_to_checkout=!1,void 0!==data.ships_together&&o.updateShipTogetherStatus(data.ships_together),o.displayCashbackMessage(),0!=typeof data.giftcard_count&&data.giftcard_count>0?$(".pincode_serviceable_error_block").length>0&&($(".pincode_serviceable_error_block").html(""),$(".ck-addr-submit-btn").removeClass("disabled"),$(".ck-del-addr-list-item").length>0&&$(".ck-del-addr-list-item").removeClass("ck-del-addr-error")):setTimeout(function(){0==$("#ckNonDelSilder").children().length&&0==$("#ckOosProductSlider").children().length&&0==$(".ck-sku-row-content").children().length&&o.emptyCart()},4e3)},deleteTimedObject:function(pid,hash){try{$('div[data-hash="'+hash+'"]').hide().removeAttr("data-hash"),clearTimeout(o.timedObjects[hash]),delete o.timedObjects[hash],delete o.cachedObjects[hash],0==$(".ck-sku-row-content").length&&o.emptyCart()}catch(error){}},undoDeleteProductFromCart:function(el){var productNode=$(el).attr("data-id"),productHash=$(el).attr("data-hash"),id=productNode.split("_");id=id[1];var _url=root_url+"/cart/undo_removeitem",_params={id:id,productNode:productNode,hash:productHash},_data={hash:productHash};utils.makeRequest(_url,"POST",_data,o.handleUndoDeleteCartProduct,o.handleError,"",_params)},handleUndoDeleteCartProduct:function(data,_params){$(".cart-loader").hide();var el=o.cachedObjects[_params.hash];el.insertBefore($('div[data-hash="'+_params.hash+'"]').hide()),el.slideDown("300");var _json,giftcount=$("#gift_card_count").val();try{_json=$.parseJSON(data)}catch(e){_json=data}var physicalGiftCount=_json.physical_giftcard_count,coupon=_json.coupon;o.deleteTimedObject(_params.id,_params.hash),1==$("#giftcard_"+_params.id).val()&&(giftcount=parseInt(giftcount)+1,$("input#gift_card_count").val(giftcount));var giftCardNature=$("#giftcard_nature_"+_params.id).val();void 0!==giftCardNature&&(giftCardNature=giftCardNature.toLowerCase()),"physical"==giftCardNature&&$("input#physical_giftcard_count").val(physicalGiftCount),void 0!==physicalGiftCount&&0!=physicalGiftCount&&$("#physical_gc_charge").length>0&&($("#physical_gc_charge").attr("data-gc-amount",phsical_gc_charge),$("#physical_gc_charge .price-nmbr").html("Rs. "+phsical_gc_charge),$("#physical_gc_charge div").show(),$("#physical_gc_charge_hidden").val(phsical_gc_charge)),void 0!==coupon.success&&1==coupon.success||($("#checkout_grow_tree").show(),$("#shipping_handling").slideDown(500)),o.setPricing(data,_params.id);var valid_item=parseInt(_json.valid_items)>1?_json.valid_items+" Items":_json.valid_items+" Item";$("h2.ck-pg-title span").text("("+valid_item+")"),o.addOrRemoveGiftCardData(_json.free_gift,_json.total_amount,_json.free_gift_data,_json.is_free_gift_in_cart,_json.delete_free_item),o.updateShipTogetherStatus(_json.ships_together),1==$(".ck-sku-row-wrap").length&&($(".btn_green_big").addClass("disabled"),$(".btn_green").addClass("disabled")),"AddressSelection"==o.pageType&&$(".ck-sku-row-wrap .delivery-details  .checkout-message").is(":visible")&&($(".btn_green_big").addClass("disabled"),$(".btn_green").addClass("disabled")),giftcount>5&&($("#maxGiftcard_error_msg").css("display","block"),$(".btn_green_big").addClass("disabled"),$(".btn_green").addClass("disabled"))},addWishlistToWishlist:function(el){var itemK=$(this).attr("data-id"),parent_id=$(this).attr("data-parent_id");parent_id>0?PF.UTILITIES.addToWishlist(parent_id,"",0,0,$(this)):PF.UTILITIES.addToWishlist(itemK,"",0,0,$(this)),$(".cart-loader").show()},removeProductFromWishlist:function(el){var id=$(this).attr("data-id").split("_");id=id[1],parseInt($(this).attr("data-parent-id"))&&(id=parseInt($(this).attr("data-parent-id"))),id&&($(".cart-loader").show(),PF.UTILITIES.addToWishlist(id,"OrderSummary"))},setPricing:function(_data,id){var data;try{data=$.parseJSON(_data)}catch(_error){data=_data}var extra_discount=0,additional_discount=0,shipping_charge=0,growtree_amount=0,coupon=data.coupon,total_tax=0,total_discount=0,exchange_discount=0;if(void 0!==data.online_shipping_charge&&$("#shipping_handling").length>0&&($("#shipping_handling").attr("data-shipping-handling-amount",data.online_shipping_charge),0==data.online_shipping_charge?($("#shipping_handling .ck-price-detail-col .ck-free-txt").is(":visible")||$("#shipping_handling .ck-price-detail-col .ck-free-txt").show(),$("#shipping_handling .price-nmbr").html("Rs. "+data.online_shipping_charge)):($("#shipping_handling .ck-price-detail-col .ck-free-txt").hide(),$("#shipping_handling .price-nmbr").html("Rs. "+data.online_shipping_charge))),void 0!==coupon.success&&1==coupon.success&&$("#additional_discount").length>0){o.updateRowDiscount(coupon.items_discount,data.cart_item),$("#additional_discount").attr("data-additional-discount-amount",parseInt(coupon.discount_amount)).find(".price-nmbr").html("-Rs. "+utils.currencyFormat(Math.ceil(parseInt(coupon.discount_amount)))),$("#coupon-msgs").html(coupon.message);var tax=coupon.tax_info,total_tax=parseInt(tax.total_tax);0!=Math.ceil(total_tax)&&$("#taxes").css("display","block"),$("#taxes").attr("data-total-tax",total_tax).find(".price-nmbr").html("Rs. "+utils.currencyFormat(Math.ceil(total_tax))),0==total_tax&&$("#taxes").slideUp()}else $("#coupon_code").val("").removeAttr("readonly"),$("#coupon-msgs").slideUp(500),$("#additional_discount").attr("data-additional-discount-amount","0"),$("#taxes").attr("data-total-tax","0"),$("#offer_price").attr("data-offer-price","0"),$("#additional_discount, #taxes, #offer_price").slideUp(500);o.applyFurnitureExchangeDiscount(data.furniture_exchange),$("#extra_discount").length>0&&(total_discount+=extra_discount=parseInt($("#extra_discount").attr("data-extra-discount-amount"))),$("#additional_discount").length>0&&(total_discount+=additional_discount=parseInt($("#additional_discount").attr("data-additional-discount-amount"))),$("#shipping_handling").length>0&&(shipping_charge=parseInt($("#shipping_handling").attr("data-shipping-handling-amount")),o.handleShippingChargesMsg(shipping_charge)),$("#growtree_contribution").length>0&&(growtree_amount=parseInt($("#growtree_contribution").attr("data-growtree-amount"))),$("#fe_points").length>0&&$("#fe_points").is(":checked")&&(total_discount+=exchange_discount=parseInt($("#fe_discount").attr("fe-discount-amount"))),$("#taxes").length>0&&(total_tax=parseInt($("#taxes").attr("data-total-tax")));var cart_total_pay=parseInt(Math.ceil(data.total_amount));o.updateOfferPrice(cart_total_pay,total_discount);var total_pay=cart_total_pay+total_tax+growtree_amount+shipping_charge-additional_discount-extra_discount-exchange_discount;$("#item_total").attr("data-total-amount",cart_total_pay).find(".price-nmbr").html("Rs. "+utils.currencyFormat(Math.ceil(cart_total_pay))),$("#total_pay_coupon").html("Rs. "+utils.currencyFormat(Math.ceil(total_pay)));var cart_qty=0;$(".item_list_input").each(function(){cart_qty+=parseInt($(this).val())}),$("#shoppingcart").length>0&&$("#shoppingcart span").html(cart_qty),$("div[data-id='delcartitem_"+id+"']").slideUp("300",function(){var proceed_btn=$(".column a.btn_green"),proceed_btn1=$(".cart-details a.btn_green_big");if(0==$(".order_row_ofs").length&&(proceed_btn.hasClass("disabled")||proceed_btn1.hasClass("disabled"))){proceed_btn.removeClass("disabled"),proceed_btn1.removeClass("disabled");var proceed_to_addr_rel=$(".column .btn_green").attr("rel");void 0!==proceed_to_addr_rel&&!1!==proceed_to_addr_rel?(proceed_btn.addClass("link_popup"),proceed_btn.attr("href","javascript://")):(proceed_btn.attr("href",root_url+"/checkout/onepage"),proceed_btn1.attr("href",root_url+"/checkout/onepage"))}var _pin=utils.readCookie("serviceable_pincode");void 0!==_pin&&_pin&&("OrderSummary"==o.pageType?$(".order_summary_pincode_btn").click():"AddressSelection"==o.pageType&&o.checkAssemblyPincode())}),o.displayCashbackMessage(),o.emiOptionDisplay()},createAddressPincodeErrorblock:function(pincode_data,pincode_service_call){var addr_pincode_error_html="",total_count=0,ids="",block_id="";return block_id="add_address"==pincode_service_call?"ckAddNewDelAddrSliderWrap":"ckDelAddrSelNonDelWrap",addr_pincode_error_html+='<div class="ck-non-del-wrap pf-padding-20 pf-padding-10-h pf-white pf-border-width-1 pf-border-style-solid pf-border-red pf-round-medium">',addr_pincode_error_html+='<p class="ck-non-del-ttl font-13 pf-semi-bold-text pf-text-red pf-margin-0">Sorry, These item(s) can\'t be shipped to this PINCODE. You may either change the delivery pincode above or remove the item from your order to continue.</p>',addr_pincode_error_html+='<div class="ck-non-del-product">',addr_pincode_error_html+='<div class="ck-non-del-product-slider-wrap" id="'+block_id+'">',$.each(pincode_data,function(inx,el){addr_pincode_error_html+='<div class="ck-non-del-product-slide pf-padding-10">',addr_pincode_error_html+='<div class="ck-non-del-product-img">',addr_pincode_error_html+='<img src="'+js_cdn_img_1+el.image+'">',addr_pincode_error_html+="</div>",addr_pincode_error_html+="</div>",ids+=inx+",",total_count++}),ids=ids.substring(0,ids.length-1),addr_pincode_error_html+="</div>",addr_pincode_error_html+='<span class="ck-non-del-product-cnt font-12 pf-semi-bold-text"><span class="ck-non-del-product-cnt-no">'+total_count+"</span> items</span>",addr_pincode_error_html+='<a href="javascript:void(0)" id="ck-non-del-product-prev" class="ck-bill-addr-prev inactive"></a>',addr_pincode_error_html+='<a href="javascript:void(0)" id="ck-non-del-product-next" class="ck-bill-addr-next"></a>',addr_pincode_error_html+='<div class="ck-non-del-rmv-wl-wrap">',addr_pincode_error_html+='<a href="javascript:void(0)" data-id="'+ids+'" onclick="PF.CHECKOUT.deliveryFailed(this)" class="ck-non-del-rm-btn pf-light-blue pf-round-small">Remove these items</a>',addr_pincode_error_html+="</div>",addr_pincode_error_html+="</div>",addr_pincode_error_html+="</div>"},create_assembly_info_block:function(data){var assembly_info,delivery_info,ships_together;void 0!==data.assembly_info&&(assembly_info=data.assembly_info),void 0!==data.delivery_info&&(delivery_info=data.delivery_info),void 0!==data.ships_together&&(ships_together=data.ships_together),void 0!==data.valid_items&&data.valid_items;var assembly_info_html="";return $.each(assembly_info,function(inx,el){for(var ships_together_status=!1,i=0;i<ships_together.pids.length;i++)if(ships_together.pids[i]==inx){ships_together_status=!0;break}var Delivery_Date="";!0===ships_together_status&&void 0!==ships_together.date_range.start_date&&void 0!==ships_together.date_range.end_date?Delivery_Date=ships_together.date_range.start_date+" - "+ships_together.date_range.end_date:void 0!==delivery_info[inx]&&""!=delivery_info[inx].tentative_delivery_date.start_day&&null!==delivery_info[inx].tentative_delivery_date.start_day&&""!=delivery_info[inx].tentative_delivery_date.end_day&&null!==delivery_info[inx].tentative_delivery_date.end_day&&(Delivery_Date=delivery_info[inx].tentative_delivery_date.start_day+" - "+delivery_info[inx].tentative_delivery_date.end_day),assembly_info_html+='<div class="row ck-del-ass-sku-row">',assembly_info_html+='<div class="pf-col xs-2">',assembly_info_html+='<div class="ck-del-ass-sku-img-wrap">',assembly_info_html+='<img src="'+js_cdn_img_1+el.image+'">',assembly_info_html+="</div>",assembly_info_html+="</div>",assembly_info_html+='<div class="pf-col xs-4">',assembly_info_html+='<div class="ck-del-dtl">',assembly_info_html+='<span class="ck-sku-dtl-txt font-13 pf-semi-bold-text pf-text-grey">Delivery</span>',assembly_info_html+='<span class="ck-sku-dtl-subtxt font-14 pf-text-dark-grey">'+Delivery_Date+"</span>",assembly_info_html+="</div>",assembly_info_html+="</div>",assembly_info_html+='<div class="pf-col xs-6">',assembly_info_html+='<div class="ck-ass-dtl">',assembly_info_html+='<span class="ck-sku-dtl-txt font-13 pf-semi-bold-text pf-text-grey">Assembly</span>',assembly_info_html+='<span class="ck-sku-dtl-subtxt font-14 pf-text-dark-grey">'+el.assembly+"</span>",assembly_info_html+='<a href="javascript:void(0)" class="ck-sku-dtl-tt-link pf-text-blue font-12">',assembly_info_html+='<span class="pf-semi-bold-text" data-tooltip="'+el.tooltip_assembly+'">Details</span>',assembly_info_html+="</a>",assembly_info_html+="</div>",assembly_info_html+="</div>",assembly_info_html+="</div>"}),void 0!==data.virtual_giftcards&&""!=data.virtual_giftcards&&(assembly_info_html+='<div class="ck-kerala-pin-msg pf-border-yellow pf-border-width-1 pf-border-style-solid pf-padding-10 font-13 pf-semi-bold-text" style="">',assembly_info_html+="E-Gift Card(s) Will Be Directly Mailed To You.",assembly_info_html+="</div>"),assembly_info_html},checkAssemblyPincode:function(_pin,id){try{if(void 0!==PF.CHECKOUT.disabled_proceed_to_checkout&&PF.CHECKOUT.disabled_proceed_to_checkout)return!0;if(""==$("#update_id").val()&&0==$("#update_id").val()){if(void 0!==$('#ckShippingAddress input[name="country_id"]').val()){var cnt=$('#ckShippingAddress input[name="country_id"]').val().toLowerCase();""!=cnt&&"india"!=cnt&&(o.removeAllAddressMessages(),$("#address_error_msg").html("Some Of Your Products are not available for international shipping.").show(),$(".ck-addr-proceed-btn").addClass("disabled"))}$(".btn_green, .btn_green_big, .btn_blue").addClass("disabled")}var _country="india";if(void 0===_pin&&$('#ckShippingAddress input[name="postcode"]').length>0&&(_pin=$('#ckShippingAddress input[name="postcode"]').val(),_country=$('#ckShippingAddress input[name="country_id"]').val().toLowerCase()),void 0===_pin||!utils.isNumber(_pin)||6!=_pin.length)return!1;$(".ck-pin-input-error-wrap").css("display","none"),$(".ck-sku-dtl-ispin").css("display","none"),$("#pin_check").parent().removeClass("invld-pin"),$(".ck-pin-input-wrap,.ck-pin-input-error-wrap,.ck-sku-delivery-details .ck-sku-dtl-subtxt").hide(),$(".ck-pin-entered").show();var cityId="",regionId="",type="";if(void 0!==id&&("billing"==(type=id.indexOf("bill_")>-1?"billing":"shipping")?(cityId="bill_city",regionId="bill_region_select"):(cityId=$("#city").length>0?"city":"city_txtbox",regionId="region_select")),"india"==_country){var _data={pincode:_pin},lastPincode=utils.readCookie("serviceable_pincode");"billing"!=type&&utils.createCookie("serviceable_pincode",_pin,30);var _url=root_url+"/pincode/check_assembly_pincode",_params={pincode:_pin,lastPincode:lastPincode,cityId:cityId,regionId:regionId,type:type};$(".ck-pin-input-wrap .btn-loader").show(),utils.makeRequest(_url,"POST",_data,o.handleAssemblyResponse,o.handleError,"",_params)}}catch(error){PF.ERROR.raiseError(error)}},handleAssemblyResponse:function(_data,_params){var data;try{data=$.parseJSON(_data)}catch(e){data=_data}var proceed=1;$(".add_noassembly_input").remove(),$(".ck-pin-input-wrap .btn-loader").hide(),$(".gb-loader").hide();var fe_option=$("#fe_points").is(":checked"),_shippingAddressId=$("input[name='shipping_address_id']:checked").val();if($("#billing_form_shipping_address_id").val(_shippingAddressId),void 0!==data.data){var _serviceableCheck=data.data.serviceable,is_exchange_pincode_servicable=data.data.is_exchange_pincode_servicable,pincode_service_call=(data.data.exchange_pincode,data.data.onlyVirtualGiftcard,utils.readCookie("pincode_service_call"));if(void 0===o.pageType||"FirstTime"!=o.pageType&&"AddressSelection"!=o.pageType||"bill_city"!=_params.cityId?void 0===o.pageType||"FirstTime"!=o.pageType&&"AddressSelection"!=o.pageType||o.removeAllAddressMessages():delete data.data.additional_requirement,void 0!==data.data.additional_requirement){var add_req=data.data.additional_requirement.template;void 0!==add_req&&"not required"!=add_req&&$("#additional_required").length>0&&($("#additional_required").html(add_req),$("#additional_req_state").html(add_req_state))}var add_req_state=data.data.state,isPartPay=parseInt(data.data.part_pay_check),is_cod_exists=data.data.is_cod_exists;if(void 0!==data.data.assembly_info)data.data.assembly_info;if(void 0!==data.data.delivery_info)var delivery_info=data.data.delivery_info;if(void 0!==data.data.ships_together)data.data.ships_together;if(void 0!==data.data.valid_items&&data.data.valid_items,$("#guestAddressSubmit").length>0&&$("#guestAddressSubmit").removeClass("disabled"),o.hideErrors(),void 0!==data.data.onlyVirtualGiftcard&&0==data.data.onlyVirtualGiftcard?""!=data.data.city&&""!=data.data.state?"bill_city"==_params.cityId?($("#billAddAddrFrm #bill_city").val(data.data.city).trigger("change"),$("#billAddAddrFrm #bill_region_select ").val(data.data.state).trigger("change")):($("#address_select_form #city").val(data.data.city).trigger("change"),$(" #address_select_form #region_select ").val(data.data.state).trigger("change").parent(".ck-state-in-wrap").addClass("disabled")):(void 0!==_params.cityId&&"city"==_params.cityId&&0!==$("#address_select_form #city").length&&0!==$("#address_select_form #region_select").length&&($("#address_select_form #city").val("").trigger("change"),$("#address_select_form #region_select").val("").trigger("change").parent(".ck-state-in-wrap").removeClass("disabled")),void 0!==_params.cityId&&"bill_city"==_params.cityId&&0!==$("#billAddAddrFrm #bill_city").length&&0!==$("#billAddAddrFrm #bill_region_select").length&&($("#billAddAddrFrm #bill_city").val("").trigger("change"),$("#billAddAddrFrm #bill_region_select ").val("").trigger("change"))):$(".ck-addr-proceed-btn").removeClass("disabled"),void 0!==_params.type&&""==_params.type&&0==_serviceableCheck||void 0!==_params.type&&"shipping"==_params.type&&0==_serviceableCheck){if(void 0!==o.pageType&&"AddressSelection"==o.pageType){_srvcError=data.data.pincode_error;if(!$.isEmptyObject(_srvcError)){_AddrError=o.createAddressPincodeErrorblock(_srvcError,pincode_service_call);$(".ck-non-del-wrap").length>0&&$(".ck-non-del-wrap").remove(),"select_address"==pincode_service_call?$("#pincode_error_"+_shippingAddressId).html(_AddrError).show():$("#pincode_error_shipping").length>0&&$("#pincode_error_shipping").html(_AddrError),$("#product_assembly_message").hide(),$(".ck-non-del-wrap").slideDown(),$(".ck-addr-proceed-btn").addClass("disabled"),$("#item_addr_block_"+_shippingAddressId).addClass("ck-del-addr-error"),o.initSliders()}}else if(void 0!==o.pageType&&"FirstTime"==o.pageType){_srvcError=data.data.pincode_error;if(utils.createCookie("pincode_service_call","add_address"),!$.isEmptyObject(_srvcError)&&void 0!==data.data.onlyVirtualGiftcard&&0==data.data.onlyVirtualGiftcard){var _AddrError=o.createAddressPincodeErrorblock(_srvcError,pincode_service_call);$("#pincode_error_guest_shipping").length>0&&$("#pincode_error_guest_shipping").html(_AddrError),$("#guestAddressSubmit").length>0&&$("#guestAddressSubmit").addClass("disabled")}o.initSliders()}if(void 0!==o.pageType&&"OrderSummary"==o.pageType)if(0==$(".os-oos-ext-wrap .ck-non-del-wrap:visible").length){var _srvcError=data.data.pincode_error;if(o.non_serviceable_items.length=0,Object.keys(_srvcError).length>0){for(var i in _srvcError)_srvcError.hasOwnProperty(i)&&($(".ck-sku-row-wrap #cartitem_"+i).css("display","none"),$(".ck-sku-row-wrap #cartitem_"+i).parent().css("display","block"),o.non_serviceable_items.push(parseInt(i)));o.createPincodeErrorblock(_srvcError),$("#ckNonDelWrap").css("display","block"),$(".os-non-del-ext-wrap").css("display","block"),o.non_serviceable_items.length>2&&$(".os-non-del-ext-wrap .ck-bill-addr-prev,.os-non-del-ext-wrap .ck-bill-addr-next,.os-non-del-ext-wrap .ck-non-del-product-cnt").show()}o.non_serviceable_items.length>0&&"OrderSummary"==o.pageType?$(".btn_green_big").addClass("disabled"):$(".btn_green_big").removeClass("disabled"),$('.ck-sku-row-wrap div[id^="cartitem_"]').each(function(){var _id=parseInt($(this).attr("id").split("_")[1]);-1==$.inArray(_id,o.non_serviceable_items)&&($('div[id^="cartitem_'+_id+'"]').css("display","block"),$(this).parent().css("display","block"),$(this).css("display","block")),0==is_cod_exists?$("span cod_status_"+_id).html("Not Available"):1==$('div[id^="cartitem_'+_id+'"] .cod_msg').data("cod-flag")&&$("span cod_status_"+_id).html("Available")})}else{var _nonServiceItems=data.data.pincode_error,non_serviceable_prds=[];if(Object.keys(_nonServiceItems).length>0)for(var i in _nonServiceItems)_nonServiceItems.hasOwnProperty(i)&&non_serviceable_prds.push(parseInt(i));$('.ck-sku-row-wrap div[id^="cartitem_"]').each(function(){var _id=parseInt($(this).attr("id").split("_")[1]);-1==$.inArray(_id,non_serviceable_prds)?($(".ck-sku-row-wrap #cartitem_"+_id+" .ck-sku-details .ck-sku-delivery-details .ck-sku-dtl-range-txt").show(),$("#p_delivery_date_"+_id).show(),$(".ck-sku-row-wrap #cartitem_"+_id+" .ck-sku-details .ck-sku-delivery-details .ck-sku-dtl-subtxt").hide(),$(".ck-sku-row-wrap #cartitem_"+_id+" .ck-sku-details .ck-sku-assembly-details").show()):($(".ck-sku-delivery-details #serviceable_pincode_"+_id).text(data.data.pincode),$(".ck-sku-row-wrap #cartitem_"+_id+" .ck-sku-details .ck-sku-delivery-details .ck-sku-dtl-subtxt").show(),$(".ck-sku-row-wrap #cartitem_"+_id+" .ck-sku-details .ck-sku-assembly-details").hide(),$(".ck-sku-row-wrap #cartitem_"+_id+" .ck-sku-details .ck-sku-cod-details").hide())})}proceed=0}else if(void 0!==_params.type&&""==_params.type&&1==_serviceableCheck||void 0!==_params.type&&"shipping"==_params.type&&1==_serviceableCheck){if(void 0!==o.pageType&&"AddressSelection"==o.pageType){if($("#item_addr_block_"+_shippingAddressId).removeClass("ck-del-addr-error"),$(".ck-addr-proceed-btn").removeClass("disabled"),$(".ck-non-del-wrap").length>0&&$(".ck-non-del-wrap").slideUp(),void 0!==add_req&&"not required"!=add_req&&($("#additional_req_state").html(add_req_state),$("#additional_req").slideDown()),$("#display_assembly_pincode").length>0&&$("#display_assembly_pincode").html(_params.pincode),$(".assemblyInfoScroll").length>0&&global_function.mCustomScrollDestroy("assemblyInfoScroll"),void 0!==_params.lastPincode&&_params.lastPincode!=_params.pincode){$("#product_assembly_message").show();assembly_info_html=o.create_assembly_info_block(data.data);$("#delivery-assembly").html(assembly_info_html)}global_function.mCustomScrollInit("assemblyInfoScroll"),global_function.tooltip_call()}else if(void 0!==o.pageType&&"FirstTime"==o.pageType){if(void 0!==add_req&&"not required"!=add_req&&($("#additional_req_state").html(add_req_state),$("#additional_req").slideDown()),$(".assemblyInfoScroll").length>0&&global_function.mCustomScrollDestroy("assemblyInfoScroll"),$("#pincode_error_guest_shipping").length>0&&$("#pincode_error_guest_shipping").html(""),$("#display_assembly_pincode").length>0&&$("#display_assembly_pincode").html(_params.pincode),$("#guestAddressSubmit").length>0&&$("#guestAddressSubmit").removeClass("disabled"),void 0!==_params.lastPincode&&_params.lastPincode!=_params.pincode){$("#product_assembly_message").show();var assembly_info_html=o.create_assembly_info_block(data.data);$("#delivery-assembly").html(assembly_info_html)}global_function.mCustomScrollInit("assemblyInfoScroll"),global_function.tooltip_call()}$(".os-non-del-ext-wrap").css("display","none"),$(".ck-sku-delivery-details .ck-sku-dtl-range-txt").show(),$(".ck-sku-delivery-details .ck-sku-dtl-range-txt").parent("span").show(),o.non_serviceable_items.length=0,$('.ck-sku-row-wrap div[id^="cartitem_"]').each(function(){$(this).parent().css("display","block"),$(this).css("display","block");var _id=parseInt($(this).attr("id").split("_")[1]);0==is_cod_exists?$("span cod_status_"+_id).html("Not Available"):1==$('div[id^="cartitem_'+_id+'"] .cod_msg').data("cod-flag")&&$("span cod_status_"+_id).html("Available")})}var valid_item=parseInt(data.data.valid_items)>1?data.data.valid_items+" Items":data.data.valid_items+" Item";$("h2.ck-pg-title span").text("("+valid_item+")"),isPartPay?$(".partpay_available").show():$(".partpay_available").hide(),1!=is_exchange_pincode_servicable&&$("#fe_points").length?o.handleFurnitureExchangeError(data.data,fe_option):1==is_exchange_pincode_servicable&&$("#fe_points").length&&($("#fe_points").val()>0&&($("#fe_checkbox").fadeIn(),$(".show_fe").fadeIn()),$("#fe_error_msg").hide(),$("#form_fe_error_msg").hide());var productsWithAssemblyError=[];if(1==data.data.assembly_check){if($("#assembly_error_header_msg .error_msg_pincode").html(_params.pincode),void 0!==data.data.product)var _count=Object.keys(data.data.product).length;var _text="";_text=_count>1?"these "+_count+" products":"this "+_count+" product",$("#assembly_error_header_msg #assembly_product_count").html(_text),$("#assembly_error_header_msg").slideDown();var _nonAssemblyItems=data.data.product,_nonAssemblyText="";for(var i in _nonAssemblyItems)_nonAssemblyItems.hasOwnProperty(i)&&(_nonAssemblyText+='<a class="prod" href="'+root_url+"/"+_nonAssemblyItems[i].url+'"><img src="'+product_image_url+_nonAssemblyItems[i].image+'"></a>',productsWithAssemblyError.push(i));$("#assembly_error_product_msg .ck-product-notdeliverable").html(_nonAssemblyText),-1!=$.inArray(o.pageType,["AddressSelection","FirstTime"])&&($("#form_assembly_error_header_msg .error_msg_pincode").html(_params.pincode),$("#form_assembly_error_header_msg #form_assembly_product_count").html(_text),$("#form_assembly_error_header_msg").slideDown(),$("#form_assembly_error_product_msg .ck-product-notdeliverable").html(_nonAssemblyText))}try{if(1==_serviceableCheck)if(0==productsWithAssemblyError.length)$('span[id^="assembly_status_"]').each(function(){var _node=$(this),_id=_node.attr("id").split("_").pop();o.updateAssemblyInfoOfNodes(_id,_node,data.data.assembly_info)});else for(i=0;i<productsWithAssemblyError.length;i++){var _node=$('span[id="assembly_status_'+productsWithAssemblyError[i]+'"]'),_id=productsWithAssemblyError[i];o.updateAssemblyInfoOfNodes(_id,_node,data.data.assembly_info)}}catch(_error){}if(void 0!==add_req&&"not required"!=add_req&&($("#vip_add_popup").html(add_req),$("#additional_req_state").html(add_req_state),$("#additional_req").slideDown(),-1!=$.inArray(o.pageType,["FirstTime"])&&($("#form_additional_req_state").html(add_req_state),$("#form_additional_req").slideDown())),void 0!==delivery_info)for(var i in delivery_info)delivery_info.hasOwnProperty(i)&&("2015-01-01"!=delivery_info[i].db_delivery_date&&""!=delivery_info[i].tentative_delivery_date.start_day&&null!==delivery_info[i].tentative_delivery_date.start_day&&""!=delivery_info[i].tentative_delivery_date.end_day&&null!==delivery_info[i].tentative_delivery_date.end_day?($("#delivery_date_cart_"+i).html(delivery_info[i].tentative_delivery_date.start_day+" - "+delivery_info[i].tentative_delivery_date.end_day),$("#delivery_date_cart_"+i).show(),$("#p_delivery_date_"+i).show()):$("#p_delivery_date_"+i).hide());proceed&&$(".ck-sku-row-content").length&&0==$(".out-of-stock-box").length&&($(".btn_blue").removeClass("disabled"),isFreeGiftErrorshow||("IN"!=$("#country_id").val()&&"/checkout/onepage/"==$current?$(".btn_green_big").addClass("disabled"):$(".btn_green, .btn_green_big").removeClass("disabled"))),$("#gift_card_count").val()>5&&$(".btn_green, .btn_green_big").addClass("disabled"),$("#address_select_form").hasClass("add_address_first_time")&&$(".first_time").addClass("disabled"),o.updateShipTogetherStatus(data.data.ships_together),o.handlePanasonicErrorMsg()}},removeAllAddressMessages:function(){void 0===o.pageType||"AddressSelection"!=o.pageType&&"FirstTime"!=o.pageType||($("#product_assembly_message").hide(),$("#additional_req").hide(),$("#address_error_msg").hide(),$(".ck-non-del-wrap").remove())},setBillingAddress:function(entity_id){if(""!=entity_id){var _url=root_url+"/checkout/setbillingaddress",_data={entity_id:entity_id},_params={entity_id:entity_id};utils.makeRequest(_url,"POST",_data,o.handleSetBillingAddress,o.handleError,"",_params)}},handleSetBillingAddress:function(_data,_params){$(".ck-bill-addr-content").html($(".ck-bil-addr-slide.selected").children(".class-billing-front").html())},updateAssemblyInfoOfNodes:function(_id,_node,assembly_info){$(".ck-sku-row-wrap #cartitem_"+_id+" .ck-sku-details .ck-sku-assembly-details").show(),_node.attr("data-assembly",assembly_info[_id].assembly),_node.attr("data-assembly-provider",assembly_info[_id].assembly_provider),_node.attr("data-assembly-brand",assembly_info[_id].assembly_brand),_node.find("span.ck-sku-dtl-subtxt").html(assembly_info[_id].assembly),_node.closest(".ck-sku-assembly-details").find(".ck-dtl-tt-link-wrap span").attr("data-tooltip",assembly_info[_id].tooltip_assembly)},setAssemblyMessaging:function(_id,productsWithAssemblyError,_node){var assembly=$.trim(_node.attr("data-assembly").toLowerCase()),assemblyProvider=$.trim(_node.attr("data-assembly-provider").toLowerCase()),assemblyBrand=$.trim(_node.attr("data-assembly-brand"));$.inArray(assembly,["assembly by pepperfry","carpenter assembly","assembly by brand"])>=0?"to be arranged by yourself"==assemblyProvider?_node.find("b").removeAttr("class").addClass("txt-red").html("To be arranged by yourself"):"available_by_pepperfry"==assemblyProvider?_node.find("b").removeAttr("class").addClass("txt-green").html("Offered by Pepperfry"):$.inArray(assembly,["assembly by pepperfry","carpenter assembly"])>=0?_node.find("b").removeAttr("class").addClass("txt-green").html("Offered by Pepperfry"):"assembly by brand"==assembly&&_node.find("b").removeAttr("class").addClass("txt-green").html("Provided by "+assemblyBrand):"self assembly"==assembly?_node.find("b").removeAttr("class").addClass("txt-green").html("Can be self-assembled"):"Not Required"==assembly&&_node.find("b").removeAttr("class").addClass("txt-green").html("Not Required")},handleFurnitureExchangeError:function(data){var fe_selected=utils.readCookie("furnitureExchange");utils.isNumber(data.exchange_pincode)&&(o.exchange_pincode=data.exchange_pincode,1==fe_selected&&void 0!==data.exchange_pincode&&data.exchange_pincode.toString().length>0&&($("#fe_error_msg").find(".error_msg_pincode").html(data.exchange_pincode),$("#form_fe_error_msg").find(".error_msg_pincode").html(data.exchange_pincode),$("#fe_error_msg").slideDown(),$("#form_fe_error_msg").slideDown()))},hideErrors:function(){$("#additional_req").hide(),$("#serviceability_error_msg").hide(),$("#assembly_error_header_msg").hide(),$("#assembly_error_product_msg").hide(),$("#fe_error_msg").hide(),$("#serviceablity_error_msg .error_msg_pincode").text(""),$("#serviceablity_error_msg").hide(),$("div[id^=cartitem]").removeClass("no_stock"),$('div[id^="is_serviceable_info_"]').show(),$('div[id^="is_serviceable_info_"] p').show(),$(".ck-sku-row-wrap .checkout-message.error").hide(),$("#serviceablity_error_product_msg .prod").remove(),$("#serviceablity_error_product_msg").hide(),$("#assembly_error_header_msg .error_msg_pincode").html(""),$("#assembly_error_header_msg #assembly_product_count").html(""),$("#assembly_error_header_msg").hide(),$("#assembly_error_product_msg .ck-product-notdeliverable").html(""),$("#additional_req").hide(),$("#form_additional_req").hide(),"AddressSelection"!=o.pageType&&"FirstTime"!=o.pageType||($("#form_serviceability_error_msg").hide(),$("#form_assembly_error_header_msg").hide(),$("#form_assembly_error_product_msg").hide(),$("#form_fe_error_msg").hide(),$("#form_serviceablity_error_msg .error_msg_pincode").text(""),$("#form_serviceablity_error_msg").hide(),$("#form_serviceablity_error_product_msg .prod").remove(),$("#form_serviceablity_error_product_msg").hide(),$("#form_assembly_error_header_msg .error_msg_pincode").html(""),$("#form_assembly_error_header_msg #form_assembly_product_count").html(""),$("#form_assembly_error_header_msg").hide(),$("#form_assembly_error_product_msg .ck-product-notdeliverable").html(""))},applyCoupon:function(e,action){$(".ck-cpn-input-wrap").removeClass("invld-cpn"),e.preventDefault?e.preventDefault():e.returnValue=!1;var coupon_code=$("#coupon_code").val();if(void 0!==coupon_code&&""!=coupon_code){var _data={coupon_code:coupon_code};switch(action){case"apply":_data.apply=action,$("#cpn_check_btn").attr("disabled","disabled"),$("#cpn_check_btn").addClass("disabled");break;case"cancel":_data.cancel=action,o.removeRowDiscount();break;default:return!1}var _url=root_url+"/checkout/validate_coupon/0/"+coupon_code+"/1",_params={action:action};utils.makeRequest(_url,"POST",_data,o.handleCouponResponse,o.handleError,"",_params)}else $("#coupon-msg-wrong span").text("Enter a valid Coupon"),$(".ck-cpn-error-wrap").show(),$(".ck-cpn-input-wrap").addClass("invld-cpn")},handleCouponResponse:function(_data,_params){var data;try{data=$.parseJSON(_data)}catch(_error){data=_data}var _response=data.data.success;if(void 0!==_response&&1==_response){var _pay="";switch(o.applyFurnitureExchangeDiscount(data.data.furniture_exchange),_params.action){case"apply":var discount_amount=data.data.discount_amount,total_tax=data.data.tax_info.total_tax;1==(bespoke_coupon=data.bespoke_coupon)&&($("#checkout_grow_tree").hide(),$("#shipping_handling").slideUp(500),$("#shipping_handling").attr("data-shipping-handling-amount","0"),$("#growtree_contribution").attr("data-growtree-amount","0"),$("#growtree_contribution").hide(),$("#growTree").attr("checked",!1)),$("#additional_discount").attr("data-additional-discount-amount",parseInt(discount_amount)),o.updateRowDiscount(data.data.items_discount),$("#taxes").attr("data-total-tax",parseInt(total_tax)),$("#taxes .price-nmbr").html("Rs. "+utils.currencyFormat(Math.ceil(total_tax))),_pay=o.totalPay(),$("#coupon-msgs").html(data.data.message).addClass("valid_coupon"),$("#coupon-msg-wrong").hasClass("invalid_coupon")&&$("#coupon-msg-wrong").removeClass("invalid_coupon");var additional_discount=utils.currencyFormat(discount_amount);$("#additional_discount .price-nmbr").html("-Rs. "+additional_discount);var discount=parseInt(discount_amount)+_pay.exchange_discount;if(o.updateOfferPrice(_pay.item_total,discount),$("#additional_discount, #coupon-msgs, #offer_price").slideDown(500),$(".coupon_discount_amount").show(200),$(".ck-cpn-input-wrap").removeClass("invld-cpn"),$(".ck-cpn-input-wrap,.ck-cpn-error-wrap").hide(),$(".ck-cpn-applied-wrap span.pf-semi-bold-text").text(data.data.code),$(".ck-cpn-applied-wrap").show(),$("#cpn_check_btn").removeAttr("disabled"),$("#cpn_check_btn").removeClass("disabled"),total_tax>0&&($("#taxes").slideDown(500),$("#cart_incl_note").slideUp(500)),data.data.free_gift){var promo_skus=$.parseJSON(data.data.items_discount).promo_sku[0].sku,all_data=$.parseJSON(data.cart_data);o.handlePanasonicErrorMsg(all_data);var cart_items=all_data.cart_item;$.each(promo_skus,function(key,value){all_data.pincode;var item_data=cart_items[value],str="",delivery_info=item_data.delivery_info;if(PF.CHECKOUT.disabled_proceed_to_checkout=!1,str=str+'<div id="cartitem_'+value+'" class="ck-sku-row-content clearfix "><div class="product-thumbnail"><div class="display-tbl"><div class="table-cell"><a href="'+root_url+"/"+item_data.url+'" class=""><img src="'+product_image_url+item_data.image+'" alt=""></a></div></div></div><div class="pro-name-quantity"><div class="display-tbl"><div class="table-cell"><div class="table-cell"><a href="'+root_url+"/"+item_data.url+'">'+item_data.name+'</a></div><div class="quntity_blc"></div></div></div></div><div class="delivery-details "><div class="display-tbl"><div class="table-cell"><div id="is_serviceable_info_'+value+'">',void 0!==delivery_info&&""!=delivery_info.tentative_delivery_date.start_day&&null!==delivery_info.tentative_delivery_date.start_day&&""!=delivery_info.tentative_delivery_date.end_day&&null!==delivery_info.tentative_delivery_date.end_day){var start_day=new Date(delivery_info.tentative_delivery_date.start_day).toDateString(),array_date=start_day.split(" ");start_day=array_date[0]+", "+array_date[1]+" "+array_date[2];var end_day=new Date(delivery_info.tentative_delivery_date.end_day).toDateString();array_date={},str=str+'<span id="p_delivery_date_'+value+'">Delivery: <span class="txt-green status" id="delivery_date_cart_'+value+'">'+start_day+" - "+(end_day=(array_date=end_day.split(" "))[0]+", "+array_date[1]+" "+array_date[2])+'</span></p><p>COD: <b class="txt-red cod_msg" data-cod-flag="0">Not Available</b></span>'}str+='</div></div></div></div><div class="ck-sku-details"><div class="display-tbl"><div class="table-cell"><div class="strike_txt"></div><div class="final_pricing "><span class="txt-red"> Free!</span></div></div></div></div><div class="trash-order-product"><div class="display-tbl"><div class="table-cell"></div></div></div></div>',$(".ck-sku-row-wrap:last-child").append(str),$(".btn_green").hasClass("disabled")&&$(".btn_green").removeClass("disabled"),$(".btn_green_big").hasClass("disabled")&&$(".btn_green_big").removeClass("disabled")})}break;case"cancel":$("#coupon-msgs").html="",$("#coupon-msgs").slideUp(500,function(){$(this).html=""});var bespoke_coupon=data.bespoke_coupon;if(null==bespoke_coupon){var shippingCharge=$("#shipping_handling_hidden").val();$("#checkout_grow_tree").show(),$("#shipping_handling").slideDown(500),$("#shipping_handling").attr("data-shipping-handling-amount",shippingCharge),$("#shipping_handling_amt").html("Rs. "+shippingCharge)}if($("#additional_discount").attr("data-additional-discount-amount","0"),$("#taxes").attr("data-total-tax","0"),$("#additional_discount, #taxes, #offer_price").slideUp(500),$("#cart_incl_note").slideDown(500),$(".coupon_discount_amount").hide(300,function(){$(".ck-sku-row-content .final_pricing").each(function(){$(this).addClass("new_price p_left"),$(this).removeClass("old_price grey_text")})}),$("#cpn_check_btn").removeAttr("disabled"),$("#cpn_check_btn").removeClass("disabled"),$("#coupon_code").removeAttr("readonly"),$("#coupon_code").val(""),data.free_gift){all_data=$.parseJSON(data.cart_data);o.handlePanasonicErrorMsg(all_data);all_data.cart_item;var removed_items=$.parseJSON(data.pids_removed);$.each(removed_items,function(key,val){$("#cartitem_"+val).siblings(".ck-item-rmd-msg-wrap").attr("data-hash",data.removed_item),$("#cartitem_"+val).slideUp(function(){}),o.cachedObjects[data.removed_item]=$.extend(!0,{},$("#cartitem_"+val)),o.deleteTimedObject(val,data.removed_item),$("#cartitem_"+val).parent(".ck-sku-row-wrap").children(".out-of-stock-box").hide().removeClass("out-of-stock-box"),o.handleCartBehaviour(all_data,val),o.updateShipTogetherStatus(all_data.ships_together)}),all_data.free_gift_panasonic_details.dummy_id_present&&!all_data.free_gift_panasonic_details.status&&($(".btn_green").hasClass("disabled")||$(".btn_green").addClass("disabled"),$(".btn_green_big").hasClass("disabled")||$(".btn_green_big").addClass("disabled"),PF.CHECKOUT.disabled_proceed_to_checkout=!0)}var _res=o.totalPay()}}else void 0!==_response&&0==_response&&"apply"==_params.action&&($("#coupon-msg-wrong span").html(data.data.message).addClass("invalid_coupon"),$("#cpn_check_btn").removeAttr("disabled"),$("#cpn_check_btn").removeClass("disabled"),$(".ck-cpn-error-wrap").show(),$(".ck-cpn-input-wrap").addClass("invld-cpn"));o.isCouponApplied=0;"apply"==_params.action?_pay.total_pay:"cancel"==_params.action&&_res.total_pay,o.displayCashbackMessage(),o.emiOptionDisplay()},emiOptionDisplay:function(){$("#emi-select2").select2();var price=o.totalPay().total_pay;if("string"==typeof price&&(price=price.replace(/\,/g,""),price=parseInt(price,10)),flag_NCE&&price>=flag_NCE_RSCHK){if($(".ck-nc-emi-txt-warp").css("display","block"),$("#emi_breakup").length>0){var emi_data=$("#emi_breakup").val(),emi_breakup=$.parseJSON(emi_data),lowest_price=price;for(var key in emi_breakup){if(1==(0==emi_breakup[key].no_cost_emi?0:1)&&flag_NCE){o.PMTR(emi_breakup[key].rate/1200,emi_breakup[key].bu,price).toFixed(2);payment=price/emi_breakup[key].bu}else var payment=o.PMT(emi_breakup[key].rate/1200,emi_breakup[key].bu,-price).toFixed(2);payment<=lowest_price&&(lowest_price=Math.round(payment))}$(".ck-nc-emi-txt-warp").html('<span class="pf-text-grey font-13 pf-italic-txt">No Cost EMI available. EMI starting Rs. '+utils.currencyFormat(Math.floor(lowest_price))+"/month</span>"),$("#emi_breakup").html(utils.currencyFormat(Math.ceil(price)))}}else $(".ck-nc-emi-txt-warp").css("display","none")},PMT:function(i,n,p){return i*p*Math.pow(1+i,n)/(1-Math.pow(1+i,n))},PMTR:function(i,n,ap){return ap*(1-Math.pow(1+i,-n))/(i*n)},updateRowDiscount:function(items_discount_json,items_details){var itemDiscountObj;try{itemDiscountObj=$.parseJSON(items_discount_json)}catch(_error){itemDiscountObj=items_discount_json}$.each(itemDiscountObj,function(key,val){if($.isNumeric(key)){val=parseFloat(val);var elem=$("#cartitem_"+key);if(0==val){var _originalPrice=0;return void 0!==items_details?_originalPrice=parseInt(items_details[key].total):""==(_originalPrice=$.trim(elem.find(".strike_txt").html()))&&(_originalPrice=$.trim(elem.find(".final_pricing").html())),elem.find(".final_pricing").html(_originalPrice),elem.find(".strike_txt").html(""),elem.find(".saving-price").html(""),!0}var _oldPrice=0,_oldPriceAmount=0;if(void 0!==items_details){var cartPrice=parseFloat(items_details[key].total);_oldPrice="Rs. "+utils.currencyFormat(cartPrice),_oldPriceAmount=cartPrice}else _oldPrice=$.trim(elem.find(" .final_pricing").html()),_oldPriceAmount=parseFloat($.trim(_oldPrice.replace(/Rs./gi,"").replace(/,/gi,"")));var discounted_price=utils.currencyFormat(_oldPriceAmount-val),saved_price=utils.currencyFormat(val);elem.find(" .strike_txt").html(_oldPrice),elem.find(" .final_pricing").html("Rs. "+discounted_price),elem.find(" .saving-price").html("Coupon applied, Rs "+saved_price+" saved")}})},removeRowDiscount:function(){$(".ck-sku-row-content .ck-sku-qty-wrap .ck-sku-qty-price").each(function(){var strikeThroughPrice=$.trim($(this).find(".strike_txt").html());""!=strikeThroughPrice&&$(this).find(".final_pricing").html(strikeThroughPrice),$(this).find(".strike_txt").html(""),$(this).find(".saving-price").html("")})},applyFurnitureExchangeDiscount:function(furnitureExchange){var fe_points=0;if(void 0!==furnitureExchange&&null!=furnitureExchange&&void 0!==furnitureExchange.fe_details){if(fe_points=furnitureExchange.fe_details.fe_points,$(".shipping_holder").length>0){var address_id=$('#shipping_address_wrapper .address_holder.active input[name="shipping_address_id"]').val(),postcode=$(".shipping_holder").find('input[value="'+address_id+'"]').parent().parent().children('input[name="postcode"]').val();o.checkAssemblyPincode(postcode)}$("#fe_points").val(fe_points),$("#fe_points").parent().find("label").html("Use <b>"+utils.currencyFormat(fe_points)+"</b> Upgrade Points, get Rs. "+utils.currencyFormat(fe_points)+" OFF"),$("#fe_donation").val(furnitureExchange.fe_donation),$("#fe_discount").find(".price-nmbr").html("-Rs. "+utils.currencyFormat(fe_points)),$("#fe_discount").attr("fe-discount-amount",fe_points),$(".show_fe,#fe_checkbox").show(300);var fe_selected=utils.readCookie("furnitureExchange"),_pin=utils.readCookie("serviceable_pincode");utils.isNumber(furnitureExchange.fe_pincode)&&(o.exchange_pincode=furnitureExchange.fe_pincode),1==fe_selected&&void 0!==furnitureExchange.fe_pincode&&utils.isNumber(_pin)&&utils.isNumber(furnitureExchange.fe_pincode)&&furnitureExchange.fe_pincode!=_pin&&($("#fe_error_msg").find(".error_msg_pincode").html(furnitureExchange.fe_pincode),$("#form_fe_error_msg").find(".error_msg_pincode").html(furnitureExchange.fe_pincode),$("#fe_error_msg").show(300),$("#form_fe_error_msg").show(300))}else o.removeFurnitureExchange(),$(".show_fe,#fe_checkbox,#fe_discount").hide(300),$("#fe_error_msg").hide(300),$("#form_fe_error_msg").hide(300);fe_points=utils.currencyFormat(fe_points),$("#fe_point_display").text("Use "+fe_points+" exchange points, get Rs. "+fe_points+" OFF")},displayCashbackMessage:function(){if("OrderSummary"==o.pageType||"AddressSelection"==o.pageType){var cashback_data_amount=$(".checkout-cashback").data("amt"),cashback_data_percentage=$(".checkout-cashback").data("prc"),total_amount=o.totalPay().total_pay;"string"==typeof total_amount&&(total_amount=total_amount.replace(/\,/g,""),total_amount=parseInt(total_amount,10)),$(".checkout-cashback").html("");var cashback_msg_txt="",cashback_price="";""!=total_amount&&total_amount&&""!=cashback_data_amount&&(total_amount>=cashback_data_amount-5e3&&total_amount<cashback_data_amount?cashback_msg_txt='<div class="pf-padding-10-h pf-padding-15 pf-border-primary-color pf-border-width-2 pf-border-style-solid"><img src="'+root_url+'/images/cashback.png" /><span class="font-12 pf-text-dark-grey">Let’s sweeten the deal! Add more products to make the cart worth more than <span>Rs.'+cashback_data_amount+"</span> and get an extra "+cashback_data_percentage+'% cashback. <a href="'+root_url+'/promotions.html" target="_blank" class="cashbk-tnc-link"><u>See Terms</u></a></span></div>':total_amount>=cashback_data_amount&&(cashback_price=(total_amount-cashback_data_amount)*cashback_data_percentage/100,cashback_msg_txt='<div class="pf-padding-10-h pf-padding-15 pf-border-primary-color pf-border-width-2 pf-border-style-solid"><img src="'+root_url+'/images/cashback.png" /><span class="font-12 pf-text-dark-grey">Awesome! You are eligible for a <b class="pf-semi-bold-text">Cashback of Rs.'+utils.currencyFormat(Math.floor(cashback_price))+'</b> on prepaid orders. Cashback will be credited within 9 working days. <a href="'+root_url+'/promotions.html" target="_blank" class="cashbk-tnc-link"><u>See Terms</u></a></span></div>')),""!=cashback_msg_txt&&$(".checkout-cashback").html(cashback_msg_txt)}},addOrRemoveGiftCardData:function(free_gift,total_amount,freeData,is_free_gift_in_cart,delete_free_item){$("#ckGiftBox").remove(),$("#show_gift_card_error").html(""),$(".continue-empty-btn  .os-fg-img-wrapper").remove(),"OrderSummary"==PF.CHECKOUT.pageType?$("#free_gift_module_cms_block").html(""):$("#os_fg_addr_box").hide();var show_gift_wraper=0;if(0==is_free_gift_in_cart?show_gift_wraper=1:""!=delete_free_item&&void 0!==delete_free_item&&($("#cartitem_"+delete_free_item).remove(),$("#show_gift_card_error").html('<div class="checkout-message error" id="free_gift_error_msg">Your order value is less than Rs 2,000 and you are no longer eligible for the free tee shirt.</div>')),""!=free_gift&&void 0!==free_gift){1==show_gift_wraper&&""!=free_gift&&("OrderSummary"==PF.CHECKOUT.pageType?$("#empty_user_cart").after(free_gift):$("#os_fg_addr_box").show());var _url=root_url+"/checkout/createFreeGiftModel",_data={free_gift_data:btoa(freeData)};utils.makeRequest(_url,"POST",_data,o.getFreecartPopup,o.handleError)}},getFreecartPopup:function(result){var data="";try{data=$.parseJSON(result)}catch(_error){data=result}$("#free_gift_module_cms_block").after(data)},removeFurnitureExchange:function(){if($("#fe_points").removeAttr("checked"),utils.eraseCookie("furnitureExchange"),o.showAddBlock("exchange"),"none"!=$("#offer_price").css("display")){var itemTotal=parseInt($("#item_total").attr("data-total-amount")),discount=parseInt($("#additional_discount").attr("data-additional-discount-amount"));o.updateOfferPrice(itemTotal,discount),o.totalPay()}$("#fe_points").val("0")},showAddBlock:function(type){"choose"==type?("none"!=$("#furniture_exchange").css("display")?($("#shipping_address_wrapper").find(".address_holder.active").removeClass("active"),$("#shipping_address_wrapper").find(".address_holder .radio_wrap.active").removeClass("active"),$("#address_popup").find('input[name="shipping_address_id"]').val("")):($("a.btn_green").removeClass("btn_disable"),$("a.btn_green").removeClass("btn_disable").attr("onclick","PF.CHECKOUT.addressselect();")),$(".noassembly_box, #furniture_exchange, .same_as_pickup").slideUp(700)):"exchange"==type&&($("#address_select_form").length>0&&$("a.btn_green").removeClass("btn_disable").attr("onclick","PF.CHECKOUT.addressselect();"),$(".noassembly_box, #furniture_exchange, .same_as_pickup, #fe_discount").slideUp(700))},setDefaultAddress:function(_id,_type){var _address;try{_address=$.parseJSON(address_data)}catch(_error){_address=address_data}if(void 0===(_address=_address[_id]))return!1;var elem="",_checkAssembly=0;switch(_type){case"billing":elem="ckBillingAddress";break;case"shipping":elem="ckShippingAddress",_checkAssembly=1}var _originalID=parseInt($("#"+elem+" .checkout-address-main input").val());if(parseInt(_id)!=_originalID){$("#"+elem+" .checkout-address-main input").val(_id),$("#"+elem+" .checkout-address-main p:eq(0)").html(_address.fname+" "+_address.lname);var info=_address.street[0];void 0===_address.street[1]&&""!=_address.landmark?info+="</br>Landmark-"+_address.landmark+","+_address.city+","+_address.state:void 0!==_address.street[1]&&""==_address.landmark?info+="</br>Area-"+_address.street[1]+","+_address.city+","+_address.state:void 0===_address.street[1]&&""==_address.landmark?info+=_address.city+","+_address.state:void 0!==_address.street[1]&&""!=_address.landmark&&(info+="</br>Area-"+_address.street[1]+"</br>Landmark-"+_address.landmark+","+_address.city+","+_address.state),info=(info+="-"+_address.postcode+","+_address.country).replace(/,{2,}/g,","),$("#"+elem+" .checkout-address-main p:eq(1)").html(info),$("#"+elem+" .checkout-address-main p:eq(2)").html("T: "+_address.mobile);var el=$("#"+elem);if(el.find('input[type="hidden"][name="firstname"]').val(_address.fname),el.find('input[type="hidden"][name="lastname"]').val(_address.lname),el.find('input[type="hidden"][name="street"]').val(_address.street),el.find('input[type="hidden"][name="street1"]').val(_address.street2),el.find('input[type="hidden"][name="landmark"]').val(_address.landmark),el.find('input[type="hidden"][name="city"]').val(_address.city),el.find('input[type="hidden"][name="region"]').val(_address.state),el.find('input[type="hidden"][name="postcode"]').val(_address.postcode),el.find('input[type="hidden"][name="country_id"]').val(_address.country),el.find('input[type="hidden"][name="mobile"]').val(_address.mobile),"ckBillingAddress"==elem){$(".cart-loader").show();var selectedShippingAddressId=$("input[name=shipping_address_id]:checked").val();utils.createCookie("billing_address_changed",1);var _url=root_url+"/checkout/addressSelect/"+selectedShippingAddressId+"/"+_id,_params={},_data={};utils.makeRequest(_url,"POST",_data,o.handleSuccess,o.handleError,"",_params)}else if("ckShippingAddress"==elem){$(".cart-loader").show();var billing_address_value=null!==utils.readCookie("billing_address_changed")?utils.readCookie("billing_address_changed"):0,selectedBillingAddressId=$("input[name=billing_address_id]:checked").val(),_params={};if(1==billing_address_value)_url=root_url+"/checkout/addressSelect/"+_id+"/"+selectedBillingAddressId;else var _url=root_url+"/checkout/addressSelect/"+_id+"/"+_id,_params={post_action:"setBillingAddress",entity_id:_id};_data={};utils.makeRequest(_url,"POST",_data,o.handleSuccess,o.handleError,"",_params)}_checkAssembly&&o.checkAssemblyPincode()}},setBillingAsShipping:function(_id,_type){$(".cart-loader").show();var _address;try{_address=$.parseJSON(address_data)}catch(_error){_address=address_data}if(void 0===(_address=_address[_id]))return!1;var elem="ckBillingAddress";parseInt($("#"+elem+" .checkout-address-main input").val());$("#"+elem+" .checkout-address-main input").val(_id),$("#"+elem+" .checkout-address-main p:eq(0)").html(_address.fname+" "+_address.lname);var info=_address.street[0];void 0===_address.street[1]&&""!=_address.landmark?info+="</br>Landmark-"+_address.landmark+","+_address.city+","+_address.state:void 0!==_address.street[1]&&""==_address.landmark?info+="</br>Area-"+_address.street[1]+","+_address.city+","+_address.state:void 0===_address.street[1]&&""==_address.landmark?info+=_address.city+","+_address.state:void 0!==_address.street[1]&&""!=_address.landmark&&(info+="</br>Area-"+_address.street[1]+"</br>Landmark-"+_address.landmark+","+_address.city+","+_address.state),info=(info+="-"+_address.postcode+","+_address.country).replace(/,{2,}/g,","),$("#"+elem+" .checkout-address-main p:eq(1)").html(info),$("#"+elem+" .checkout-address-main p:eq(2)").html("T: "+_address.mobile);var el=$("#"+elem);el.find('input[type="hidden"][name="firstname"]').val(_address.fname),el.find('input[type="hidden"][name="lastname"]').val(_address.lname),el.find('input[type="hidden"][name="street"]').val(_address.street),el.find('input[type="hidden"][name="street1"]').val(_address.street2),el.find('input[type="hidden"][name="landmark"]').val(_address.landmark),el.find('input[type="hidden"][name="city"]').val(_address.city),el.find('input[type="hidden"][name="region"]').val(_address.state),el.find('input[type="hidden"][name="postcode"]').val(_address.postcode),el.find('input[type="hidden"][name="country_id"]').val(_address.country),el.find('input[type="hidden"][name="mobile"]').val(_address.mobile),$(".cart-loader").show();var _url=root_url+"/checkout/addressSelect/"+_id+"/"+_id,_params={},_data={};utils.makeRequest(_url,"POST",_data,o.handleSuccess,o.handleError,"",_params)},handleSuccess:function(_data,_params){if(void 0!==_params.post_action&&"setBillingAddress"==_params.post_action){$(this).children('[name="billing_address_id"]').val();$(".ck-bil-addr-slide").removeClass("selected"),$("#billing_address_"+_params.entity_id).parent().addClass("selected"),$("#bill_addressBook"+_params.entity_id).prop("checked",!0),o.setBillingAddress(_params.entity_id)}$(".cart-loader").hide()},showAddressForEdit:function(_id,_form){var _address;try{_address=$.parseJSON(address_data)}catch(_error){_address=address_data}if(void 0===(_address=_address[_id]))return!1;if(!_form)return!1;var fieldPrefix="";"billing"===_form?(fieldPrefix="bill_",$("#bill_update_id").val(_id),$("form#billAddAddrFrm").find(".error-msg").html("")):utils.createCookie("pincode_service_call","add_address"),$("#"+fieldPrefix+"firstname").val(_address.fname).parent().addClass("input-filled").removeClass("frm-success-wrap").removeClass("frm-error-wrap"),$("#"+fieldPrefix+"lastname").val(_address.lname).parent().addClass("input-filled").removeClass("frm-success-wrap").removeClass("frm-error-wrap"),$("#"+fieldPrefix+"mobile").val(_address.mobile).parent().addClass("input-filled").removeClass("frm-success-wrap").removeClass("frm-error-wrap"),$("#"+fieldPrefix+"street").val(_address.street).parent().addClass("input-filled").removeClass("frm-success-wrap").removeClass("frm-error-wrap"),$("#"+fieldPrefix+"street2").val(_address.street2).parent().addClass("input-filled").removeClass("frm-success-wrap").removeClass("frm-error-wrap"),$("#"+fieldPrefix+"landmark").val(_address.landmark).parent().addClass("input-filled").removeClass("frm-success-wrap").removeClass("frm-error-wrap"),$("#"+fieldPrefix+"postcode").val(_address.postcode).parent().addClass("input-filled").removeClass("frm-success-wrap").removeClass("frm-error-wrap"),$("#"+fieldPrefix+"city").val(_address.city).parent().addClass("input-filled").removeClass("frm-success-wrap").removeClass("frm-error-wrap"),$("#"+fieldPrefix+"country_id").val(_address.country_id).parent().addClass("input-filled").removeClass("frm-success-wrap").removeClass("frm-error-wrap"),"billing"!=_form&&"in"!=$.trim(_address.country_id.toLowerCase())?($("#"+fieldPrefix+"region_select").val("").trigger("change").attr("validate","1").removeAttr("disabled").trigger("change").parent().removeClass("frm-success-wrap").removeClass("frm-error-wrap"),$("#"+fieldPrefix+"region_select").next(".select2-container").show(),$("#"+fieldPrefix+"country_id").val("IN").attr("validate","1").trigger("change").show().parent().removeClass("frm-success-wrap").removeClass("frm-error-wrap")):"in"!=$.trim(_address.country_id.toLowerCase())?($("#"+fieldPrefix+"region_txtbox").val(_address.state).attr("validate","1").removeAttr("disabled").show().parent().removeClass("frm-success-wrap").removeClass("frm-error-wrap"),$("#"+fieldPrefix+"region_select").val("").trigger("change").attr("disabled","disabled").removeAttr("validate","1").parent().removeClass("frm-success-wrap").removeClass("frm-error-wrap"),$("#"+fieldPrefix+"region_select").next(".select2-container").hide()):"india"==$.trim(_address.country.toLowerCase())&&($("#"+fieldPrefix+"region_select").val(_address.state).attr("validate","1").removeAttr("disabled").trigger("change").parent().removeClass("frm-success-wrap").removeClass("frm-error-wrap"),$("#"+fieldPrefix+"region_select").next(".select2-container").show(),$("#"+fieldPrefix+"region_txtbox").val("").attr("disabled","disabled").removeAttr("validate","1").hide().parent().removeClass("frm-success-wrap").removeClass("frm-error-wrap")),"billing"!=_form&&o.checkAssemblyPincode($.trim(_address.postcode)),$(".address-future-save").hide()},changeButtonState:function(_state){switch(void 0===utils._backUpText&&(utils._backUpText=$(".btn_green_big").html()),_state){case"loading":$(".btn_green_big,.btn_green,.green-action-btn ").addClass("loading disabled");break;case"original":default:$(".btn_green_big,.btn_green,.green-action-btn").removeClass("loading disabled")}$("#address_select_form").hasClass("add_address_first_time")&&$(".first_time").addClass("disabled")},getSelectedPanel:function(){var _form="";if($("#ckShippingAddress").hasClass("active"))_form="shipping";else if($("#ckBillingAddress").hasClass("active"))_form="billing";else{if(!$(".checkout-fst-time-user").length)return!1;_form="first_time"}return _form},addAddress:function(_form){var _formType,_addressState="";"billAddAddrFrm"==_form?(_formType="billing",_addressState=""==$("#update_id_bill").val()?"new":"existing"):"address_select_form"==_form&&(_formType="shipping",_addressState=""==$("#update_id").val()?"new":"existing");var userAction=_formType+"_"+_addressState,guest="";switch($("#address_select_form").hasClass("guest_user")&&(guest="guest"),"billing_new"==userAction&&utils.createCookie("billing_address_changed",1),userAction){case"shipping_new":case"shipping_existing":break;case"billing_new":$('form input[name="billing_address_id"]').removeAttr("checked"),""==guest?($("#saveAddressBill").is(":checked"),$("#save_billing_address").val(1)):$("#save_billing_address").val(1),$("#update_id").val("");break;case"billing_existing":case"first_time_new":break;default:return!1}return PF.HEADER.validateForm("",_form)||o.addressselect(_formType),!1},addressSelectRedirect:function(){var _form=o.getSelectedPanel(),_shippingAddressId=$("input[name='shipping_address_id']:checked").val(),_billingAddressId=$("input[name='billing_address_id']:checked").val();if(!_form&&0==$(".checkout-address-main.gb-scroll").length)return!1;if(_form&&$(".add-address_form").is(":visible")&&!PF.HEADER.validateForm("",_form))return!1;var valid=!0;o.changeButtonState("loading"),$("#shippingAddressOpenCont .ship-address-row").length>10&&$("#save_billing_address").val(0);var _postcode=$('#ckShippingAddress input[name="postcode"]');""!=_postcode.val()&&("IN"==$('#ckShippingAddress input[name="country_id"]').val()?(6!=_postcode.val().length||isNaN(parseInt(_postcode.val())))&&($("#pincode-error-msg").show(),_postcode.addClass("input_error").parent().addClass("input_error"),o.changeButtonState("original"),valid=!1):($("#bill_postcode").attr("maxlength",10),$("#postcode").attr("maxlength",6))),!0===valid&&(window.location.href=root_url+"/checkout/addressSelectRedirect/"+_shippingAddressId+"/"+_billingAddressId)},addressselect:function(_formType){var _form="";if("billing"==_formType?_form="billAddAddrFrm":"shipping"==_formType&&(_form="address_select_form"),!_form&&0==$(".checkout-address-main.gb-scroll").length)return!1;if(_form&&$(".add-address_form").is(":visible")&&!o.loginValidation(_form))return!1;var valid=!0;o.changeButtonState("loading"),$("#shippingAddressOpenCont .ship-address-row").length>10&&$("#save_billing_address").val(0);var _postcode=$('#ckShippingAddress input[name="postcode"]');if(""!=_postcode.val()&&"IN"==$('#ckShippingAddress input[name="country_id"]').val()&&(6!=_postcode.val().length||isNaN(parseInt(_postcode.val())))&&($("#pincode-error-msg").show(),_postcode.addClass("input_error").parent().addClass("input_error"),o.changeButtonState("original"),valid=!1),!0===valid){var data=$("#"+_form).serialize(),addressType="";$("#ckShippingAddress").hasClass("guest_user")&&$("#ckShippingAddress").hasClass("active")?addressType="shipping":$("#ckBillingAddress").hasClass("guest_user")&&$("#ckBillingAddress").hasClass("active")&&(addressType="billing"),""!=addressType&&(data=data+"&updated_address_type="+addressType);var _url=root_url+"/checkout/addressSelect",_params={pincode:"",service_error:!1};utils.makeRequest(_url,"POST",data,o.handleAddressSelectResponse,o.addressSelectError,"",_params)}},addressSelectError:function(){return $("html, body").animate({scrollTop:$("#address_select_form").offset().top-50},500),o.changeButtonState("original"),!1},handleAddNewShippingAddressResponse:function(data,_params){utils.l.href=root_url+"/checkout/onepage"},handleAddressSelectResponse:function(_data,_params){var data;try{data=$.parseJSON(_data)}catch(_error){data=_data}if(void 0!==data.data.success&&1==data.data.success)if($("#address_error_msg").html("").hide(),parseInt(data.data.new_address_id)){var _id=parseInt(data.data.new_address_id);if(1!=utils.readCookie("billing_address_changed")){var _url=root_url+"/checkout/addressSelect/"+_id+"/"+_id,_params={},_data={};utils.makeRequest(_url,"POST",_data,o.handleAddNewShippingAddressResponse,"","",_params)}else utils.l.href=root_url+"/checkout/onepage"}else utils.l.href=root_url+"/checkout/onepage";else if(void 0!==data.data.success&&0==data.data.success){$(".btn_blue").removeClass("disabled");var address_error=data.data.addresserror;if("success"==address_error)window.location.href=root_url+"/checkout/onepage";else if(o.changeButtonState("original"),void 0!==address_error.save_error)"An error has occurred. Please refresh the page and try again."==address_error.save_error?o.changeButtonState("original"):"none"==$("#shipping_address_form").css("display")?($("#address_error_msg").html(address_error.save_error).show(),$(".popup_close").click()):($("#address_error_msg").html(address_error.header).show(),$("html, body").animate({scrollTop:$("#ckShippingAddress").offset().top-50},500),$(".ck-addr-proceed-btn").addClass("disabled"));else if(void 0!==address_error.header)"none"!=$("#billAddAddrFrm").css("display")&&$("#bill_address_error_msg").html(address_error.header).show(),"none"!=$("#shipping_address_form").css("display")?$("#address_error_msg").html(address_error.header).show():($("#address_error_msg").html(address_error.header).show(),$("html, body").animate({scrollTop:$("#ckShippingAddress").offset().top-50},500),$(".ck-addr-proceed-btn").addClass("disabled"));else{var total_items=0;$.each(address_error,function(i,val){if("pincode_header"!=i&&"pincode_error"!=i&&"region"!=i)$("#"+i).parent().siblings(".error-text").html(val);else if("region"==i)$("#region_select").parent().siblings(".error-text").html(val);else if("pincode_header"==i)_params.service_error||$(".not_serviceable").addClass("not_serviceable").find(".ucase strong").html(val);else if("pincode_error"==i){var pincode_error=address_error.pincode_error;if(_params.service_error){if("none"!=$("#shipping_address_form").css("display")){var product=address_error.pincode_error;o.disableShippingFormSubmit(product,"Item(s) cannot be delivered <u>here</u>")}}else{var html="";$(".noassembly_prod").remove(),$.each(pincode_error,function(j,value){html+="<a href='javascript:void(0)' class='noassembly_prod' data-item-info='"+j+"'>",html+="<img src='"+product_image_url+val[j].image+"' alt='' />",html+="<span class='title_1'>"+val[j].name+"</span>",html+="<span class='del_prod' onclick='PF.CHECKOUT.deleteItem("+j+",1);'>&nbsp;</span></a>",total_items++}),$(".popup_close").click(),$(".noassembly_box .clearfix").before(html),$("#address_error").show(),$(".noassembly_box").addClass("not_serviceable").slideDown(1e3),$(".noassembly_prod .del_prod").on("click",function(e){$(this).parent().animate({opacity:0,height:0,width:0,borderWidth:0,padding:0,margin:0},500),e.preventDefault()})}}}),o.changeButtonState("original"),"none"==$("#shipping_address_form").css("display")&&(total_items>1?$(".noassembly_box .text_1").html("The following items are not deliverable to your location "+_params.pincode):$(".noassembly_box .text_1").html("The following item is not deliverable to your location "+_params.pincode),$("html, body").animate({scrollTop:$("#address_select_form").offset().top-50},500))}}return!1},addAddressForm:function(id,ext){var errors=0,fname=$.trim($("#"+id+" #"+ext+"firstname").val()),lname=$.trim($("#"+id+" #"+ext+"lastname").val()),nameFilter=/^[a-zA-Z\s]*$/,phoneVal=$.trim($("#"+id+" #"+ext+"mobile").val()),numbers=phoneVal.split("").length,street=$("#"+id+" #"+ext+"street"),city=$("#"+id+" #"+ext+"city"),region=$("#"+id+" #"+ext+"region_txtbox"),country=$.trim($("#"+id+" #"+ext+"country_id").val()),region_select=$("#"+id+" #"+ext+"region_select"),postcode=$("#"+id+" #"+ext+"postcode");if("First Name"==fname||""==fname?($("#"+id+" #"+ext+"fnameError").css("display","block"),$("#"+id+" #"+ext+"firstname").parent().addClass("input_error"),errors=1):nameFilter.test(fname)?($("#"+id+" #"+ext+"fnameError").css("display","none"),$("#"+id+" #"+ext+"firstname").parent().removeClass("input_error")):($("#"+id+" #"+ext+"fnameError").css("display","block"),$("#"+id+" #"+ext+"firstname").parent().addClass("input_error"),errors=1),"Last Name"==lname||""==lname?($("#"+id+" #"+ext+"lnameError").css("display","block"),$("#"+id+" #"+ext+"lastname").parent().addClass("input_error"),errors=1):nameFilter.test(lname)?($("#"+id+" #"+ext+"lnameError").css("display","none"),$("#"+id+" #"+ext+"lastname").parent().removeClass("input_error")):($("#"+id+" #"+ext+"lnameError").css("display","block"),$("#"+id+" #"+ext+"lastname").parent().addClass("input_error"),errors=1),""==phoneVal)$("#"+id+" #"+ext+"mobileError").css("display","block"),$("#"+id+" #"+ext+"mobileError1").css("display","none"),$("#"+id+" #"+ext+"mobile").parent().addClass("input_error"),errors=1;else if(10==numbers&&0==phoneVal.charAt(0))$("#"+id+" #"+ext+"mobileError").css("display","none"),$("#"+id+" #"+ext+"mobileError1").css("display","block"),$("#"+id+" #"+ext+"mobile").parent().addClass("input_error"),errors=1;else{var phoneRegExp=/^((\+)?[1-9]{1,2})?([-\s\.])?((\(\d{1,4}\))|\d{1,4})(([-\s\.])?[0-9]{1,12}){1,2}$/;10==numbers&&phoneRegExp.test(phoneVal)?($("#"+id+" #"+ext+"mobileError").css("display","none"),$("#"+id+" #"+ext+"mobileError1").css("display","none"),$("#"+id+" #"+ext+"mobile").parent().removeClass("input_error")):(errors=1,$("#"+id+" #"+ext+"mobileError").css("display","block"),$("#"+id+" #"+ext+"mobileError1").css("display","none"),$("#"+id+" #"+ext+"mobile").parent().addClass("input_error"))}if(""==$.trim(street.val())?(street.parent().addClass("input_error"),$("#"+id+" #"+ext+"streetError").css("display","block"),errors=1):(street.parent().removeClass("input_error"),$("#"+id+" #"+ext+"streetError").css("display","none")),""==$.trim(city.val()))$("#"+id+" #"+ext+"cityEmptyError").css("display","block"),$("#"+id+" #"+ext+"cityError").css("display","none"),city.parent().addClass("input_error"),errors=1;else{var city1=$.trim(city.val());nameFilter.test(city1)?($("#"+id+" #"+ext+"cityError").css("display","none"),$("#"+id+" #"+ext+"cityEmptyError").css("display","none"),city.parent().removeClass("input_error")):($("#"+id+" #"+ext+"cityError").css("display","block"),$("#"+id+" #"+ext+"cityEmptyError").css("display","none"),city.parent().addClass("input_error"),errors=1)}return""==$.trim(region.val())?"IN"!=country?(region.parent().addClass("input_error"),$("#"+id+" #"+ext+"region_txtboxError").show(),errors=1):(region.parent().removeClass("input_error"),$("#"+id+" #"+ext+"region_txtboxError").hide()):($("#"+id+" #"+ext+"region_txtbox").parent().removeClass("input_error"),$("#"+id+" #"+ext+"region_txtboxError").hide()),""==$.trim(region_select.val())&&"IN"!=country?(region_select.parent().addClass("input_error"),errors=1):region_select.parent().removeClass("input_error"),""==$.trim(postcode.val())?($("#"+id+" #"+ext+"pincode-error-msg").css("display","block"),postcode.parent().addClass("input_error"),errors=1):($("#"+id+" #"+ext+"pincode-error-msg").css("display","none"),postcode.parent().removeClass("input_error")),0==errors},disableShippingFormSubmit:function(){$("#address_select_form button.btn_blue").addClass(".btn_disable")},deleteItem:function(product_id,error){if(void 0!==product_id){var _url=root_url+"/cart/removeitem/"+product_id+"/1/1",_additionalParams={pid:product_id};utils.makeRequest(_url,"POST",{},o.handleDeleteItemResponse,o.handleError,"",_additionalParams)}else 1==$(".ck-sku-row-content").length?o.removecartgtm(product_id):alert("Please select an item to delete.")},removecartgtm:function(product_id){if(itemData.length>0){var cartItemData={};for(var i in itemData)if(itemData.hasOwnProperty(i)){var items=itemData[i];if(items.id==product_id){items.qty=$("#t_"+product_id).val(),cartItemData=items;break}}}utils.pushToDataLayer({event:"removeFromCart",ecommerce:{remove:{products:[cartItemData]}}})},handleDeleteItemResponse:function(data,_params){o.removecartgtm(_params.product_id),o.handleCartBehaviour(data,_params.product_id),o.updateShipTogetherStatus(data.ships_together)},handleCartBehaviour:function(data,product_id,type){if(void 0!==data.data&&void 0!==data.data.status&&"success"===data.data.status){var extra_discount=0,additional_discount=0,shipping_charge=0,growtree_amount=0,coupon=data.coupon,total_tax=0,total_discount=0,exchange_discount=0,isProceed=1;if(void 0!==data.online_shipping_charge&&$("#shipping_handling").length>0&&($("#shipping_handling").attr("data-shipping-handling-amount",data.online_shipping_charge),0==data.online_shipping_charge?($("#shipping_handling .ck-price-detail-col .ck-free-txt").is(":visible")||$("#shipping_handling .ck-price-detail-col .ck-free-txt").show(),$("#shipping_handling .price-nmbr").html("Rs. "+data.online_shipping_charge)):($("#shipping_handling .ck-price-detail-col .ck-free-txt").hide(),$("#shipping_handling .price-nmbr").html("Rs. "+data.online_shipping_charge))),coupon instanceof Object&&void 0!==coupon.success&&1==coupon.success&&$("#additional_discount").length>0){o.updateRowDiscount(coupon.items_discount,data.cart_item),$("#additional_discount").attr("data-additional-discount-amount",parseInt(coupon.discount_amount)).find(".price-nmbr").html("-Rs. "+utils.currencyFormat(Math.ceil(parseInt(coupon.discount_amount)))),$("#coupon-msgs").html(coupon.message);var tax=coupon.tax_info;total_tax=parseInt(tax.total_tax),$("#taxes").attr("data-total-tax",total_tax).find(".price-nmbr").html("Rs. "+utils.currencyFormat(Math.ceil(total_tax))),0==total_tax&&$("#taxes").slideUp()}else $("#coupon_code").val("").removeAttr("readonly"),$("#coupon-msgs").slideUp(500),$("#additional_discount").attr("data-additional-discount-amount","0"),$("#taxes").attr("data-total-tax","0"),$("#offer_price").attr("data-offer-price","0"),$("#additional_discount,#taxes,#offer_price").slideUp(500);o.applyFurnitureExchangeDiscount(data.furniture_exchange),o.addOrRemoveGiftCardData(data.free_gift,data.total_amount,data.free_gift_data,data.is_free_gift_in_cart,data.delete_free_item),$("#extra_discount").length>0&&(total_discount+=extra_discount=parseInt($("#extra_discount").attr("data-extra-discount-amount"))),$("#additional_discount").length>0&&(total_discount+=additional_discount=parseInt($("#additional_discount").attr("data-additional-discount-amount"))),$("#shipping_handling").length>0&&(shipping_charge=parseInt($("#shipping_handling").attr("data-shipping-handling-amount")),o.handleShippingChargesMsg(shipping_charge)),$("#growtree_contribution").length>0&&(growtree_amount=parseInt($("#growtree_contribution").attr("data-growtree-amount"))),$("#fe_points").length>0&&$("#fe_points").is(":checked")&&(exchange_discount=parseInt($("#fe_discount").attr("fe-discount-amount")));var _pin=utils.readCookie("serviceable_pincode");void 0!==_pin&&_pin&&("OrderSummary"==o.pageType?$(".order_summary_pincode_btn").click():"AddressSelection"==o.pageType&&o.checkAssemblyPincode(_pin)),$("#taxes").length>0&&(total_tax=parseInt($("#taxes").attr("data-total-tax")));var cart_total_pay=parseInt(Math.ceil(data.total_amount));o.updateOfferPrice(cart_total_pay,total_discount);var total_pay=cart_total_pay+total_tax+growtree_amount+shipping_charge-additional_discount-extra_discount-exchange_discount;$("#item_total").attr("data-total-amount",cart_total_pay).find(".price-nmbr").html("Rs. "+utils.currencyFormat(Math.ceil(cart_total_pay))),$("#total_pay_coupon").html("Rs. "+utils.currencyFormat(Math.ceil(total_pay)));var cart_qty=0;$(".item_list_input").each(function(){cart_qty+=parseInt($(this).val())}),$("#shoppingcart").length>0&&$("#shoppingcart span").html(cart_qty),o.emiOptionDisplay(),$("#address_select_form").length>0&&$(".ck-sku-row-wrap .delivery-details  .checkout-message").is(":visible")&&(isProceed=0),$("#ckOosProductSlider").children(".ck-non-del-product-slide").length>0&&(isProceed=0),isProceed&&($(".btn_blue").removeClass("disabled"),isFreeGiftErrorshow||$(".btn_green, .btn_green_big").removeClass("disabled")),o.handlePanasonicErrorMsg(),$(".gb-loader").hide(),(0==data.total_amount||PF.CHECKOUT.disabled_proceed_to_checkout)&&($(".btn_green_big").addClass("disabled"),$(".btn_green").addClass("disabled"))}},handleShippingChargesMsg:function(shipping_charges){0!=shipping_charges?$("#free_shipping_msg").slideUp("slow",function(){$("#shipping_charges_msg").slideDown("slow"),$("#top_shipping_msg").length>0&&(0!=shipping_charges?$("#top_shipping_msg").show():$("#top_shipping_msg").hide())}):$("#shipping_charges_msg").slideUp("slow",function(){$("#free_shipping_msg").slideDown("slow"),$("#top_shipping_msg").length>0&&(0!=shipping_charges?$("#top_shipping_msg").show():$("#top_shipping_msg").hide())})},updateOfferPrice:function(item_total,discount){var offer_price=parseInt(item_total-discount);$("#offer_price").attr("data-offer-price",offer_price),offer_price=utils.currencyFormat(offer_price),$("#offer_price .price-nmbr").html("<strong>Rs. "+offer_price+"<strong>")},removeNonServiceableItem:function(){if($(".cart-loader").show(),$(".ck-sku-row-content").length==o.non_serviceable_items.length)o.non_serviceable_items.length=0,o.emptyCart();else{var _url=root_url+"/cart/removeNonServiceableItem",_params={product_data:o.non_serviceable_items},_data={product_data:o.non_serviceable_items};utils.makeRequest(_url,"POST",_data,o.removeNonServiceableItemsResponse,o.handleError,"",_params)}$("a.btn_green").removeClass("btn_disable").attr("onclick","PF.CHECKOUT.addressselect();")},removeNonServiceableItemsResponse:function(result,_params){var data="";$(".cart-loader").hide();try{data=$.parseJSON(result)}catch(_error){data=result}$.each(_params.product_data,function(j,id){o.handleCartBehaviour(data,id,1)}),o.non_serviceable_items.length=0,o.removeServiceableError(),0==$(".ck-sku-row-content").length&&o.emptyCart()},removeServiceableError:function(){$("#form_serviceablity_error_msg .error_msg_pincode").html(""),$("#form_serviceablity_error_msg").slideUp(),$("#form_serviceablity_error_product_msg .prod").remove(),$("#form_serviceablity_error_product_msg").slideUp(),$("#serviceablity_error_msg .error_msg_pincode").html(""),$("#serviceablity_error_msg").slideUp(),$("#serviceablity_error_product_msg .prod").remove(),$("#serviceablity_error_product_msg").slideUp()},totalPay:function(){var item_total=0,total_pay=0,extra_discount=0,additional_discount=0,shipping_charge=0,growtree_amount=0,total_tax=0,exchange_discount=0,gc_physical_shipping_charge=0;return $("#item_total").length>0&&(item_total=parseInt($("#item_total").attr("data-total-amount"))),$("#fe_points").length>0&&$("#fe_points").is(":checked")&&(exchange_discount=parseInt($("#fe_discount").attr("fe-discount-amount"))),$("#extra_discount").length>0&&(extra_discount=parseInt($("#extra_discount").attr("data-extra-discount-amount"))),$("#additional_discount").length>0&&(additional_discount=parseInt($("#additional_discount").attr("data-additional-discount-amount"))),$("#shipping_handling").length>0&&(shipping_charge=parseInt($("#shipping_handling").attr("data-shipping-handling-amount"))),$("#growtree_contribution").length>0&&(growtree_amount=parseInt($("#growtree_contribution").attr("data-growtree-amount"))),$("#taxes").length>0&&(total_tax=parseInt($("#taxes").attr("data-total-tax"))),$("#physical_gc_charge").length>0&&(gc_physical_shipping_charge=parseInt($("#physical_gc_charge").attr("data-gc-amount"))),total_pay=item_total+total_tax+shipping_charge+growtree_amount+gc_physical_shipping_charge-extra_discount-additional_discount-exchange_discount,total_pay=utils.currencyFormat(Math.ceil(total_pay)),$("#total_pay_coupon").html("Rs. "+total_pay),{total_pay:total_pay,exchange_discount:exchange_discount,item_total:item_total}},emptyCart:function(event){void 0!==event&&(event.preventDefault?event.preventDefault():event.returnValue=!1);var _url=root_url+"/cart/emptycart/2";utils.makeRequest(_url,"POST",{},o.handleEmptyCartResponse,o.handleError)},handleEmptyCartResponse:function(_data){var data;try{data=$.parseJSON(_data)}catch(_error){data=_data}void 0!==data.data.status&&"success"==data.data.status&&(utils.eraseCookie("furnitureExchange"),"/cart"!=utils.l.pathname&&(utils.l.href=root_url+"/checkout/cart"))},updateCartQty:function(){var data=$("#cart_form").serialize(),_url=root_url+"/cart/updatecart/1";utils.makeRequest(_url,"POST",data,o.handleUpdateCartQtyResposne,o.handleError)},handleUpdateCartQtyResposne:function(result){var data="";try{data=$.parseJSON(result)}catch(_error){data=result}var cart=data.cart_item,coupon=data.coupon,valid_item=data.valid_items,item_total=0,total_pay=0,shipping_charge=0,growtree_amount=0,total_tax=0,total_discount=0,cart_qty=0;o.addOrRemoveGiftCardData(data.free_gift,data.total_amount,data.free_gift_data,data.is_free_gift_in_cart,data.delete_free_item),o.applyFurnitureExchangeDiscount(data.furniture_exchange);var _couponStatus=!1;try{_couponStatus=coupon.success}catch(_err){}if(void 0!==_couponStatus&&!0===_couponStatus&&$("#additional_discount").length>0){var _discAmt=parseInt(coupon.discount_amount);$("#additional_discount").attr("data-additional-discount-amount",_discAmt).find(".price-nmbr").html("-Rs. "+utils.currencyFormat(Math.ceil(_discAmt))),$("#coupon-msgs").html(coupon.message);var tax=data.coupon.tax_info,totalTax=parseInt(tax.total_tax);$("#taxes").attr("data-total-tax",totalTax).find(".price-nmbr").html("Rs. "+utils.currencyFormat(Math.ceil(totalTax)))}void 0!==data.online_shipping_charge&&$("#shipping_handling").length>0&&($("#shipping_handling").attr("data-shipping-handling-amount",data.online_shipping_charge),0==data.online_shipping_charge?$("#shipping_handling .ck-price-detail-col .ck-free-txt").is(":visible")||$("#shipping_handling .ck-price-detail-col .ck-free-txt").show():$("#shipping_handling .ck-price-detail-col .ck-free-txt").hide(),$("#shipping_handling .price-nmbr").html("Rs. "+data.online_shipping_charge)),$("#fe_points").length>0&&$("#fe_points").is(":checked")&&(total_discount+=parseInt($("#fe_discount").attr("fe-discount-amount"))),$("#extra_discount").length>0&&(total_discount+=parseInt($("#extra_discount").attr("data-extra-discount-amount"))),$("#additional_discount").length>0&&(total_discount+=parseInt($("#additional_discount").attr("data-additional-discount-amount")),o.removeRowDiscount()),$("#shipping_handling").length>0&&(shipping_charge=parseInt($("#shipping_handling").attr("data-shipping-handling-amount")),o.handleShippingChargesMsg(shipping_charge)),$("#growtree_contribution").length>0&&(growtree_amount=parseInt($("#growtree_contribution").attr("data-growtree-amount"))),$("#taxes").length>0&&(total_tax=parseInt($("#taxes").attr("data-total-tax"))),$.each(cart,function(j,val){$("#t_"+j).attr("data-val",val.quantity),$("#t_"+j).val(val.quantity),1==val.quantity&&$("#t_"+j).siblings(".ck-sku-qty-minus").addClass("disabled"),o.setPricing(data,j);var unit_price=parseInt(val.price);void 0===unit_price&&(unit_price=0);var total_price=unit_price*parseInt(val.quantity);cart_qty+=parseInt(val.quantity),item_total+=total_price,$("#cartitem_"+j).length>0&&(1==val.is_free_gift&&0==Math.ceil(total_price)?$("#cartitem_"+j).find(".final_pricing").html('<span class="txt-red"> Free!</span>'):$("#cartitem_"+j).find(".final_pricing").html("Rs. "+utils.currencyFormat(Math.ceil(total_price))))}),void 0!==_couponStatus?o.updateRowDiscount(coupon.items_discount,cart):""!=$("#coupon_code").val()&&$("#cancel_coupon").click(),total_discount>0&&o.updateOfferPrice(item_total,total_discount),total_pay=item_total+total_tax-total_discount+shipping_charge,$(".header_tab.cart .count_alert").length>0&&$(".header_tab.cart .count_alert").html(cart_qty),$("#item_total").length>0&&($("#item_total").attr("data-total-amount",item_total).find(".price-nmbr").html("Rs. "+utils.currencyFormat(Math.ceil(item_total))),$("#total_pay_coupon").html("Rs. "+utils.currencyFormat(Math.ceil(total_pay+growtree_amount))),$("#total_pay_amount").val(total_pay)),$("#payment_form").length>0&&($("#payment_form").find(".final-pricing-checkout .txt-red").html("Rs. "+utils.currencyFormat(Math.ceil(total_pay+growtree_amount))),$("#total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(total_pay+growtree_amount))),$(".total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(total_pay+growtree_amount))));valid_item=parseInt(valid_item)>1?valid_item+" Items":valid_item+" Item";$("h2.ck-pg-title span").text("("+valid_item+")"),o.displayCashbackMessage(),o.emiOptionDisplay(),$(".cart-loader").hide()},createPincodeErrorblock:function(data_pincode_failed){var pin_fld_html="",del_prds="";$.each(data_pincode_failed,function(inx,el){$("#cartitem_"+inx).slideUp(),pin_fld_html+='<div id="rm_cartitem_'+inx+'" class="ck-non-del-product-slide pf-padding-10">',pin_fld_html+='    <div class="ck-non-del-product-img">',pin_fld_html+='      <a target="_blank" href="'+root_url+"/"+el.url+'"><img src="'+js_cdn_img_1+el.image+'"></a>',pin_fld_html+="    </div>",pin_fld_html+='    <div class="ck-non-del-product-dtl">',pin_fld_html+='        <a target="_blank" href="'+root_url+"/"+el.url+'" class="pf-text-light-grey font-12 ck-non-del-product-ttl">'+el.name+"</a>",void 0!==typeof el.is_rental&&1==el.is_rental?pin_fld_html+='        <span data-parent_id = "'+el.parent_id+'" data-id="'+inx+'" class="ck-non-del-rmv-link"></span>':pin_fld_html+='        <a href="javascript:void(0)" data-parent_id = "'+el.parent_id+'" data-id="'+inx+'" class="ck-non-del-rmv-link">Add to wishlist</a>',pin_fld_html+="    </div>",pin_fld_html+="</div>",del_prds+=""==del_prds?inx:","+inx});var sibl='<span class="ck-non-del-product-cnt font-12 pf-semi-bold-text"><span class="ck-non-del-product-cnt-no">'+Object.keys(data_pincode_failed).length+'</span> items</span><a href="javascript:void(0)" id="ck-non-del-product-prev" class="ck-bill-addr-prev inactive"></a><a href="javascript:void(0)" id="ck-non-del-product-next" class="ck-bill-addr-next"></a>';$(".os-non-del-ext-wrap .ck-non-del-product-slider-wrap,.ck-non-del-product-cnt,#ck-non-del-product-prev,#ck-non-del-product-next").remove(),$(".os-non-del-ext-wrap .ck-non-del-product").prepend('<div class="ck-non-del-product-slider-wrap" id="ckNonDelSilder" style=""></div>'),$(".ck-non-del-rm-btn").attr("data-id",del_prds),$("#ckNonDelSilder").html("").append(pin_fld_html),$(".ck-non-del-product").append(sibl),o.osNonDelSlider()},resetBankSelection:function(){var partPayID="",partPayIDChk="",isEmi=0;$("#emi_disc").css("display","none"),$("#partPayOptionArea").is(":visible")?(partPayID=":not(#partPayDropDownOption)",partPayIDChk="partPayDropDownOption",isEmi=0):"EMI"==$("#payment_method").val()&&(isEmi=1),isEmi||($("#ckPaymentMethodContainer select"+partPayID+" option:eq(0)").attr("selected","selected"),$("#ckPaymentMethodContainer select"+partPayID).each(function(){var defaultSelected=$(this).find("option:first").val(),defaultSelectedText=$(this).find("option:first").text(),elID=$(this).attr("id");void 0!==elID&&elID!=partPayIDChk&&($("#"+elID).val(defaultSelected),$("#select2-"+elID+"-container").html(defaultSelectedText))}))},setPaymentType:function(paymentType){var gcdamt=$("#gcdamt").val(),growtree_pay=$("#growtree_pay_amount").val(),giftcardamt=$("#total_card_amount").val();if(1==gcdamt){var total=parseInt(growtree_pay-giftcardamt);$("#newtotal_pay_amt").val(total)}else $("#newtotal_pay_amt").val(growtree_pay);$("#shipping_cod").html("Rs."+$("#online_shipping_charge").val()),o.changeButtonState("original"),o.resetBankSelection();var growTreeSelect=$("#growTree").prop("checked");$("#payment_form")[0].reset(),growTreeSelect&&$("#growTree").prop("checked","checked"),$("#payment_option_selected").val(""),$("#checkoutPaySecureBtn").removeClass("disabled"),$(".btn_green_big").removeClass("btn_disable").attr("onclick","javascript:PF.CHECKOUT.saveOrder();"),$("#payment_options_area").html("").hide(),$("#view_partpay_details, #paymenttype_select").hide(),$("#view_partpay_details, #partpay_payment-selection").hide(),$("#part_payment_breakupdetails").show(),$("#part_pay").val(0),$(".emi_tables_wrap").css("display","none"),$(".emi_options_table").css("display","none"),$("#no_bank").css("display","block"),$("#emi_note").css("display","none"),$("#payment_method").val(paymentType),$("#show_checkout_error").slideUp(250,"linear"),$(".btn_green_big").removeClass("btn-loader"),$("#payment_form .payment_tab_header_list ul li a[class=red_border]").removeClass("red_border");$("#payment_form .payment_tab_header_list ul li a[class=active]").attr("rel");$(" #bank_select_visa").hide(),$(" #bank_select_master").hide(),$(" #bank_select_maestro").hide(),$(" #credit_bank_select").hide(),$(" #s2id_bank_select_visa").hide(),$(" #s2id_bank_select_master").hide(),$(" #s2id_bank_select_maestro").hide(),$(" #s2id_credit_bank_select").hide(),$("#credit_bank_select").siblings(".select2-container").hide(),$("#bank_select_visa").siblings(".select2-container").hide(),$("#bank_select_master").siblings(".select2-container").hide(),$(" #bank_select_maestro").siblings(".select2-container").hide(),$("#emi_bank_name").html(""),$(".emi-bank-container").hide(),$("#cbc_added_amount").attr("data-cbc-amount",0),$("#show_checkout_agreement_error").slideUp(250,"linear");$("#giftcard_enable").val();if("COD"==paymentType)$("#growTree").prop("checked")&&(o.handleGrowTree(),$("#growTree").attr("checked",!1)),$("#growTree").attr("disabled","disabled").val(""),$('input[name="payment_donation"]').val(""),$("#cod_note").css("display","block"),$(".checkout-charity").hide(),$("#cod_note").show(),$("#cod_note_gift").hide(),utils.eraseCookie("donate");else if("GIFT_CARD"==paymentType)$("#grow-tree-contri").css("display","none"),PF.CHECKOUT.giftcard.disableGrowTree();else if(void 0!==PF.CHECKOUT.giftcard.giftcard_applied&&PF.CHECKOUT.giftcard.giftcard_applied.length>0)PF.CHECKOUT.giftcard.disableGrowTree();else{var is_disabled=$("#growTree").is(":disabled");$(".checkout-charity").show(),$("#cod_note").hide(),$("#cod_note_gift").hide(),1==is_disabled&&($("#growTree").removeAttr("disabled"),$("#cod_note").css("display","none"),$("#cod_note_gift").css("display","none"))}if("WALLET"==paymentType?o.handleWalletError():"PART_PAY"==paymentType&&o.handlePartPay("unchecked"),"EMI"==paymentType?$(" #s2id_emi_bank_select").show():"NET_BANKING"==paymentType&&($(" #s2id_bank_select").show(),$(".netbanking").select2()),"CBC"==paymentType&&($("#cashpayDoorstep, #cashpayDeposit").parent().removeClass("active"),$("#cbc_collect_cash, #cbc_deposit_cash, #cbc_charge_show, #non-refund-cbc-note, .cbc_charges, .cbc_radio_block .bank_select_wrap").hide(),$("#cbc_default_option").show()),$(".cbc_charges").hide(),"PART_PAY"!=paymentType){if(parseInt($("#total_card_amount").val())>0)total_pay=parseInt($("#total_pay_without_gc").val());else var total_pay=parseInt($("#newtotal_pay_amt").val());$("#payment_form").find(".final-pricing-checkout .txt-red").html("Rs. "+utils.currencyFormat(Math.ceil(total_pay))),$("#total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(total_pay))),$(".total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(total_pay))),$("#total_pay_coupon1").html("Rs. "+utils.currencyFormat(Math.ceil(total_pay)))}},giftcard:{giftcard_enable:$("#giftcard_enable").val(),giftcard_applied:[],response_array:{},disableGrowTree:function(){"on"==$("#payment_donation").val()&&($("#payment_donation").val(""),o.handleGrowTree()),$("#cod_note").hide(),$("#growTree").attr("disabled","disabled").val(""),$('input[name="payment_donation"]').val(""),$("#cod_note_gift").css("display","block"),$(".checkout-charity").hide(),$("#cod_note_gift").show(),utils.eraseCookie("donate")},inputValidate:function(){var card_number=$(".input-gv-number").val(),pin=$(".input-gv-pin").val();16==card_number.length&&6==pin.length&&!isNaN(parseInt(card_number))&&isFinite(card_number)?($("#gvSubmit").hasClass("disabled")&&$("#gvSubmit").removeClass("disabled"),$("#gvSubmit").hasClass("btn-loader")&&$("#gvSubmit").removeClass("btn-loader")):$("#gvSubmit").addClass("disabled")},gift_voucher_apply:function(event){event.preventDefault();var _url=root_url+"/checkout/checkGiftCardBalance",card_number=$(".input-gv-number").val(),total_card_amount=parseInt($("#total_card_amount").val()),total_amount=parseInt($("#total_pay_amount").val());if(void 0!==PF.CHECKOUT.giftcard.giftcard_applied&&PF.CHECKOUT.giftcard.giftcard_applied.length>0&&-1!==$.inArray(card_number,PF.CHECKOUT.giftcard.giftcard_applied))$(".success").hide(),$(".fail").hide(),$("#gvInvalidDetails").html("Gift Card already applied.").show();else if(total_amount==total_card_amount)$(".success").hide(),$(".fail").hide(),$("#gvInvalidDetails").html("Total payable amount is zero, no more cards can be applied.").show();else{var _data={gv_number:$(".input-gv-number").val(),gv_pin:$(".input-gv-pin").val()},_beforeSend=PF.CHECKOUT.giftcard.addRemoveButtonLoader($("#gvSubmit"));utils.makeRequest(_url,"POST",_data,PF.CHECKOUT.giftcard.handleGiftCardResponse,o.handleError,_beforeSend)}},handleGiftCardResponse:function(data){var response=$.parseJSON(data);if(PF.CHECKOUT.giftcard.addRemoveButtonLoader($("#gvSubmit")),response.status&&response.amount>0){$(".fail").hide(),$("#card_number_span").text(response.card),$("#gvAppliedSuccess").show();var growtree_pay=$("#growtree_pay_amount").val(),giftcardamt=response.amount;parseInt(growtree_pay-giftcardamt)<flag_NCE_RSCHK&&($(".eminote").hide(),$(".ck-emi-choose-bank").hide(),$(".ck-emi-notavlble").show()),$("#gvRemovedSuccess").hide();var total_amount=$("#total_pay_without_gc").val(),amount_payable=total_amount-response.amount;amount_payable<=0&&(response.amount=total_amount,amount_payable=0);var total_card_amount=$("#total_card_amount").val();total_card_amount=parseInt(total_card_amount)+parseInt(response.amount),$("#total_card_amount").val(total_card_amount);var amount_html=utils.currencyFormat(Math.ceil(amount_payable));if(total_card_amount==$("#total_pay_amount").val())$("#ckPaymentMethodNav li:not(#checkoutGIFT_CARD)").addClass("disabled"),$("#pay_secure_btn_top").text("Proceed to Pay Securely");else{$("#pay_secure_btn_top").text("Pay the remaining amount");var enable_pgs=$.parseJSON($("#gc_disable_pgs").val());$("#ckPaymentMethodNav").find("li").each(function(){var pg_name=$(this).attr("id");-1!=$.inArray(pg_name,enable_pgs)&&$(this).addClass("disabled")})}$("#gfcard_amt").css("display","block");var html='<div class="ck-pgc"><a class="ck-pgc-remove pf-text-brown" href="javascript:void(0)" data-card_number="'+$(".input-gv-number").val()+'">Remove</a> <span>(-) Pepperfry Gift Card : Rs. '+utils.currencyFormat(Math.ceil(response.amount))+'<label class="card-nmbr">'+response.card+"</label> </span></div>";$(".ck-form-amnt").append(html),$("#total_pay_coupon1").html(amount_html),$("#total_pay_coupon_top").html(amount_html),$(".total_pay_coupon_top").html(amount_html),$("#total_pay_without_gc").val(amount_payable),response.card=$(".input-gv-number").val(),PF.CHECKOUT.giftcard.response_array[response.card]=response,PF.CHECKOUT.giftcard.giftcard_applied.push(response.card),$("#gc_card_details").val(btoa(JSON.stringify(PF.CHECKOUT.giftcard.response_array)));var gcamt=btoa(JSON.stringify(PF.CHECKOUT.giftcard.response_array)),jsonObj=$.parseJSON(atob(gcamt)),total_gcamt=0;for(i in jsonObj)total_gcamt+=parseInt(jsonObj[i].amount);$("#card_amt").html("Rs. "+utils.currencyFormat(Math.ceil(total_gcamt))),$("#gcdamt").val("1"),$(".input-gv-number").val(""),$(".input-gv-pin").val(""),$("#payment_gift_card").val($("#gift_card_pay").val()),$("#payment_option_selected").val($("#gift_card_pay").val())}else!0===response.status&&0==response.amount?($(".input-gv-number").val(""),$(".input-gv-pin").val(""),$(".fail").hide(),$("#gvNoBalance").show(),$(".success").hide()):($(".input-gv-number").val(""),$(".input-gv-pin").val(""),$(".fail").hide(),$(".success").hide(),-1!==response.message.indexOf("Could not find card")?$("#gvInvalidDetails").show():-1!==response.message.indexOf("deactivated")?$("#gvInvalidDetails").html("This Gift Card is deactivated.").show():-1!==response.message.indexOf("not activated")?$("#gvInvalidDetails").html("This Gift Card is not activated.").show():-1!==response.message.indexOf("Either card number or card pin is incorrect")?$("#gvInvalidDetails").html("Either card number or card pin is incorrect.").show():-1!==response.message.indexOf("expired")?$("#gvExpired").show():$("#gvInvalidDetails").html("There was an error processing your request. Please try again.").show());void 0!==PF.CHECKOUT.giftcard.giftcard_applied&&5==PF.CHECKOUT.giftcard.giftcard_applied.length?($(".gv-apply-wrap").hide(),$(".gv-msg ck-gc-applied success").hide(),$(".gv-msg ck-gc-expired fail").hide(),$("#payGiftMaxSubttl").show()):($(".gv-apply-wrap").show(),$(".gv-msg ck-gc-applied success").show(),$(".gv-msg ck-gc-expired fail").show(),$("#payGiftMaxSubttl").hide())},remove_giftvocher:function(){var card_number=$(this).data("card_number");$("#gcdamt").val("0");var _pos=$.inArray(String(card_number),PF.CHECKOUT.giftcard.giftcard_applied);if(void 0!==PF.CHECKOUT.giftcard.giftcard_applied&&-1!==_pos){$(".fail").hide(),$(".success").hide(),$(this).closest(".ck-pgc").slideUp(function(){$(this).remove();var gcamt=btoa(JSON.stringify(PF.CHECKOUT.giftcard.response_array)),jsonObj=$.parseJSON(atob(gcamt)),total_gcamt=0;for(i in jsonObj)total_gcamt+=parseInt(jsonObj[i].amount);if($("#card_amt").html("Rs. "+utils.currencyFormat(Math.ceil(total_gcamt))),$("#gcdamt").val("1"),0==PF.CHECKOUT.giftcard.giftcard_applied.length&&$("#gfcard_amt").css("display","none"),$(".ck-pgc-remove").length<5&&($(".ck-payment-form").show(),$("#ck-payment-ttl").show()),$("#total_card_amount").val()<$("#total_pay_amount").val()){$("#pay_secure_btn_top").text("Pay the remaining amount");var enable_pgs=$.parseJSON($("#gc_disable_pgs").val());$("#ckPaymentMethodNav").find("li").each(function(){var pg_name=$(this).attr("id");-1==$.inArray(pg_name,enable_pgs)&&$(this).removeClass("disabled")})}});var gift_number_to_show="XXXX"+String(card_number).slice(-5);$("#removed_card_number_span").text(gift_number_to_show),$("#gvAppliedSuccess").hide(),$("#gvRemovedSuccess").show(),parseInt($("#growtree_pay_amount").val())>flag_NCE_RSCHK&&($(".eminote").show(),$(".ck-emi-choose-bank").show(),$(".ck-emi-notavlble").hide());var card_data=PF.CHECKOUT.giftcard.response_array[card_number],total_amount=$("#total_pay_without_gc").val(),card_amount=card_data.amount,amount_payable=parseInt(card_amount)+parseInt(total_amount),amount_html=utils.currencyFormat(Math.ceil(amount_payable)),total_card_amount=$("#total_card_amount").val();total_card_amount=parseInt(total_card_amount)-parseInt(card_amount),$("#total_card_amount").val(total_card_amount),$("#total_pay_coupon1").html(amount_html),$("#total_pay_coupon_top").html(amount_html),$(".total_pay_coupon_top").html(amount_html),$("#total_pay_without_gc").val(amount_payable),PF.CHECKOUT.giftcard.giftcard_applied.splice(_pos,1),delete PF.CHECKOUT.giftcard.response_array[card_number],$("#gc_card_details").val(btoa(JSON.stringify(PF.CHECKOUT.giftcard.response_array))),0==PF.CHECKOUT.giftcard.giftcard_applied.length&&($("#cod_note").css("display","none"),$("#payment_gift_card").val(""),$("#payment_option_selected").val(""),$("#ckPaymentMethodNav li").removeClass("disabled"))}},addRemoveButtonLoader:function(ele){ele.hasClass("btn-loader")?ele.removeClass("btn-loader"):ele.addClass("disabled").addClass("btn-loader")}},handleGrowTree:function(status){var total_pay=0,extra_discount=0,additional_discount=0,shipping_charge=0,item_count=0,growtree_deduction=!0,total_tax=0,exchange_discount=0;if($("#extra_discount").length>0&&(extra_discount=parseInt($("#extra_discount").attr("data-extra-discount-amount"))),$("#additional_discount").length>0&&(additional_discount=parseInt($("#additional_discount").attr("data-additional-discount-amount"))),$("#shipping_handling").length>0&&(shipping_charge=parseInt($("#shipping_handling").attr("data-shipping-handling-amount"))),$("#item_total").length>0&&(item_count=parseInt($("#item_total").attr("data-total-amount")),growtree_deduction=!1),$("#taxes").length>0&&(total_tax=parseInt($("#taxes").attr("data-total-tax"))),$("#fe_discount").length>0&&"fe_points"==$('input[name="fe_exchange"]:checked').attr("id")&&(exchange_discount=parseInt($("#fe_discount").attr("fe-discount-amount"))),0==item_count&&(total_pay=$("#growtree_pay_amount").val(),total_pay=parseInt(total_pay)),void 0!==status&&"checked"==status){newtotal=Math.ceil(parseInt($(".checkout-partpay-amount").attr("data-netpayable")));total_pay=isNaN(newtotal)?total_pay+donation+item_count+shipping_charge+total_tax-extra_discount-additional_discount-exchange_discount:newtotal,$("#newpartamt_block").text(total_pay);var date=new Date;date.setTime(date.getTime()+6e5);growTreePay=Math.ceil(total_pay);$("#growtree_pay_amount").attr("value",growTreePay);var expires=date.toGMTString();document.cookie="donate=1; expires="+expires+"; path=/",$("#growtree_contribution").slideDown(200),$("#growtree_contribution").attr("data-growtree-amount",donation),$("#grow_tree").attr("checked","checked"),$("#growTree").length>0&&$("#payment_donation").val("on");finalyoupay=utils.currencyFormat(Math.ceil($("#growtree_pay_amount").val()));0==$(".ck-price-detail").length?$("#total_pay_coupon1").html("Rs. "+finalyoupay):$(".ck-price-detail").length>0&&($("#total_pay_coupon").html("Rs. "+finalyoupay),$("#total_pay_coupon1").html("Rs. "+finalyoupay))}else{var newtotal=Math.ceil(parseInt($(".checkout-partpay-amount").attr("data-netpayable")));total_pay=isNaN(newtotal)?total_pay+item_count+shipping_charge+total_tax-extra_discount-additional_discount-exchange_discount:newtotal,$("#newpartamt_block").text(total_pay),growtree_deduction&&(total_pay-=donation);var growTreePay=Math.ceil(total_pay);$("#growtree_pay_amount").attr("value",growTreePay),$("#growtree_contribution").slideUp(200),$("#growtree_contribution").attr("data-growtree-amount",0),$("#growTree").removeAttr("checked"),$("#growTree").length>0&&$("#payment_donation").val("");var finalyoupay=utils.currencyFormat(Math.ceil($("#growtree_pay_amount").val()));0==$(".ck-price-detail").length?$("#total_pay_coupon1").html("Rs. "+finalyoupay):$(".ck-price-detail").length>0&&($("#total_pay_coupon").html("Rs. "+finalyoupay),$("#total_pay_coupon1").html("Rs. "+finalyoupay)),utils.eraseCookie("donate")}if(document.cookie="newpartamt="+total_pay,$("#checkoutPartPayContainer").is(":visible")){var _price=utils.currencyFormat(Math.ceil(total_pay));$("#ckPaymentMethodNav").length?($("#total_pay_coupon1").html("Rs. "+_price),$("#total_pay_coupon_top").html("Rs. "+_price),$(".total_pay_coupon_top").html("Rs. "+_price)):$("#total_pay_coupon").html("Rs. "+_price),$("#payment_form").length>0&&($("#payment_form").find(".final-pricing-checkout .txt-red").html("Rs. "+_price),$("#total_pay_coupon_top").html("Rs. "+_price),$(".total_pay_coupon_top").html("Rs. "+_price));var part_remaining_amount=parseInt($("#net_part_payment_remaining").attr("data-net_part_payment_remaining"));if(!isNaN(part_remaining_amount)){total_pay-=part_remaining_amount;var convenience_fee=parseInt($("#convenience_fee").attr("data-convenience_fee"));isNaN(convenience_fee)||(total_pay+=convenience_fee)}}else{var total_pay=parseInt($("#total_pay_amount").val()),payment_donation=$("#payment_donation").val();"on"==payment_donation&&(total_pay+=donation),$("#total_pay_coupon1").html("Rs. "+utils.currencyFormat(Math.ceil(total_pay))),$("#total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(total_pay))),$(".total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(total_pay))),$("#newtotal_pay_amt").val(total_pay);var emi_bank_select=$("#emi_bank_select option:selected");parseInt(emi_bank_select.val())&&o.setPaymentMethod(emi_bank_select.val(),emi_bank_select.text()),"on"==payment_donation?"undefined"!=typeof no_cost_emi_price_check&&total_pay>=parseInt(no_cost_emi_price_check)&&($("#non_emi_note").css("display","none"),$(".addGrowTree").css("display","block")):"undefined"!=typeof no_cost_emi_price_check&&total_pay<parseInt(no_cost_emi_price_check)&&($("#non_emi_note").css("display","block"),$(".addGrowTree").css("display","none"),$(".emi-bank-container").css("display","none"))}o.displayCashbackMessage(),o.emiOptionDisplay()},handleWalletError:function(){var prepend="",gcdamt=$("#gcdamt").val(),isPartPay=$("#checkoutPartPayContainer").css("display");if("none"!=isPartPay&&void 0!==isPartPay&&(prepend="partpay_"),$("#payment_method").length>0){var totalPay=parseInt($("#growtree_pay_amount").val()),paymentMethod=$("#payment_method").val().toLowerCase();if("wallet"==paymentMethod){if(1==gcdamt){var growtree_pay=$("#growtree_pay_amount").val(),giftcardamt=$("#total_card_amount").val(),total=parseInt(growtree_pay-giftcardamt);$("#newtotal_pay_amt").val(total)}totalPay=parseInt($("#newtotal_pay_amt").val())}else totalPay=parseInt($("#growtree_pay_amount").val());if(""!=prepend){var part_pay_amt=parseInt($(".checkout-partpay-amount").attr("data-netpayable")),newtotal_pay_amt=parseInt($("#newtotal_pay_amt").val());parseInt($("#total_pay_amount").val());(isChecked=$("#growTree").is(":checked"))?(part_pay_amt+=donation)>totalPay&&(newtotal_pay_amt+=donation,$("#newtotal_pay_amt").val(newtotal_pay_amt)):(part_pay_amt<=totalPay&&(newtotal_pay_amt-=donation,$("#newtotal_pay_amt").val(newtotal_pay_amt)),"wallet"==paymentMethod&&$("#newtotal_pay_amt").val($("#total_pay_amount").val())),totalPay=part_pay_amt,$("#growtree_pay_amount").val(part_pay_amt);var paymenttype=$("#part_pay").val();$("#payment_donation").val();"on"?($("#total_pay_coupon1").html("Rs. "+utils.currencyFormat(Math.ceil(part_pay_amt))),$("#total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(part_pay_amt))),$(".total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(part_pay_amt)))):1==paymenttype&&($("#total_pay_coupon1").html("Rs. "+utils.currencyFormat(Math.ceil(part_pay_amt))),$("#total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(part_pay_amt))),$(".total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(part_pay_amt))))}if(totalPay>parseInt(wallet_price_check)){if($(".wallet_err").show(),$("#"+prepend+"checkoutWALLETContainer").find("label").addClass("disabled"),$("#"+prepend+"checkoutWALLETContainer").find("input[type='radio']").each(function(){$(this).prop("disabled",!0)}),"wallet"==paymentMethod){var isChecked=$("#growTree").is(":checked");$("#payment_form")[0].reset(),isChecked&&$("#growTree").attr("checked",!0),$("#payment_form .payment_tab_container .active").removeClass("active"),$("#payment_option_selected").val(""),$(".btn_green_big").addClass("disabled").removeAttr("onclick")}$("#"+prepend+"checkoutWALLETContainer .ck-wallet-available").hide(),$("#"+prepend+"checkoutWALLETContainer .wallet-unavlbl-sec").show()}else $(".wallet_err").hide(),$("#"+prepend+"checkoutWALLETContainer").find("label").removeClass("disabled"),$("#"+prepend+"checkoutWALLETContainer").find('input[type="radio"]').each(function(){$(this).removeProp("disabled")}),"wallet"==paymentMethod&&$(".btn_green_big").removeClass("disabled").attr("onclick","PF.CHECKOUT.saveOrder();"),$("#"+prepend+"checkoutWALLETContainer .ck-wallet-available").show(),$("#"+prepend+"checkoutWALLETContainer .wallet-unavlbl-sec").hide()}},handlePartPay:function($change,$remainingAmt,$payAmt){if("checked"==$change)$("#part_payment_breakupdetails").slideUp("slow",function(){$("#view_partpay_details").slideDown("slow"),$("#partpay_payment-selection").slideDown("slow")}),$("#part_pay").val(1),$(".btn_green").removeClass("disabled").attr("onclick","PF.CHECKOUT.saveOrder();"),$("#s2id_partPayDropDownOption").show();else{$("#payment_option_selected").val(""),$("#payment_method").val("PART_PAY"),$("#paymenttype_select").next(".custom-combobox").find("input").val(""),$(".btn_green").addClass("disabled").removeAttr("onclick"),$("#view_partpay_details,#partpay_payment-selection").slideUp("slow",function(){$("#payment_options_area").slideUp("slow",function(){$("#payment_options_area").html(""),$("#part_payment_breakupdetails").slideDown("slow")})});var netpayable=parseInt($(".checkout-partpay-amount").attr("data-netpayable"));$("#growTree").is(":checked")&&(netpayable+=donation),$(".final-pricing-checkout .txt-red").html("Rs. "+utils.currencyFormat(netpayable)),$("#total_pay_coupon_top").html("Rs. "+utils.currencyFormat(netpayable)),$(".total_pay_coupon_top").html("Rs. "+utils.currencyFormat(netpayable)),$("#part_pay").val(0),$("#s2id_partPayDropDownOption").select2("val",$("#partPayDropDownOption option:eq(0)").val()),$("#s2id_partPayDropDownOption").hide();var _dropdownID=$("#partPayOptionArea").find("select:visible").attr("id");void 0!==_dropdownID&&($("#s2id_"+_dropdownID).select2("val",$("#"+_dropdownID).find("option:eq(0)").val()),$("#s2id_"+_dropdownID).hide()),$("#partPayOptionArea").find('input[type="radio"]').prop("checked",!1),$("#partPayOptionArea").hide()}},checkCBCrange:function(total_pay){$("#payment_method").val();var cbc_data,payment_id=$("#payment_option_selected").val();try{cbc_data=$.parseJSON(cbc_agent_data)}catch(_error){cbc_data=cbc_agent_data}$.each(cbc_data,function(index,value){$.each(value,function(index1,value1){if(parseInt(index1)==parseInt(payment_id)){var min=parseInt(value1.min),max=parseInt(value1.max);if(total_pay<min||total_pay>=max){var error_msg="To use Cash Pay option your payable amount should be in the range "+utils.currencyFormat(min)+" to "+utils.currencyFormat(max-1);$("#pay_secure_btn_top").addClass("disabled"),$("#show_checkout_error").text(error_msg).slideDown(250,"linear",function(){$("html, body").animate({scrollTop:$(this).offset().top-160},500)}),$(".btn_green_big").removeClass("btn-loader")}else $("#show_checkout_error").slideUp(250,"linear"),$("#payment_form .payment_tab_header_list ul li a[class=red_border]").removeClass("red_border")}})})},showBanksList:function(cardType){var preId="",isPartPay=$("#checkoutPartPayContainer").css("display");return"none"!=isPartPay&&void 0!==isPartPay&&(preId="partpay_"),$(" #"+preId+"payment_option_selected").val("0"),$(" #"+preId+"bank_select_visa").hide(),$(" #"+preId+"bank_select_master").hide(),$(" #"+preId+"bank_select_maestro").hide(),$(" #"+preId+"credit_bank_select").hide(),$(" #s2id_"+preId+"bank_select_visa").hide(),$(" #s2id_"+preId+"bank_select_master").hide(),$(" #s2id_"+preId+"bank_select_maestro").hide(),$(" #s2id_"+preId+"credit_bank_select").hide(),$("#bank_select_visa").siblings(".select2-container").hide(),$("#bank_select_master").siblings(".select2-container").hide(),$("#bank_select_maestro").siblings(".select2-container").hide(),$("#credit_bank_select").siblings(".select2-container").hide(),"visa"==cardType?($(" #s2id_"+preId+"bank_select_visa").show(),$(" #"+preId+"bank_select_visa").show(),$(" #"+preId+"bank_select_visa").siblings(".select2-container").show()):"master"==cardType?($(" #s2id_"+preId+"bank_select_master").show(),$(" #"+preId+"bank_select_master").show(),$(" #"+preId+"bank_select_master").siblings(".select2-container").show()):"maestro"==cardType?($("#bank_select_maestro").select2(),$(" #s2id_"+preId+"bank_select_maestro").show(),$(" #"+preId+"bank_select_maestro").show(),$(" #"+preId+"bank_select_maestro").siblings(".select2-container").show()):"american"==cardType&&($("#credit_bank_select").select2(),$(" #s2id_"+preId+"credit_bank_select").show(),$(" #"+preId+"credit_bank_select").show(),$(" #"+preId+"credit_bank_select").siblings(".select2-container").show()),!1},saveOrder:function(){$(".btn_green_big").addClass("btn-loader");var payment_method=$("#payment_method").val(),payment_id=$("#payment_option_selected").val();if(o.changeButtonState("loading"),0==payment_id){var error_msg="";switch(payment_method){case"DEBIT_CARD":error_msg="Please choose a Debit Card first";break;case"CREDIT_CARD":error_msg="Please choose a Credit Card first";break;case"EMI":error_msg="Please select an EMI option from the drop-down",void 0===$("#emi_bu").val()&&(error_msg=$("#non_emi_note").html());break;case"NET_BANKING":error_msg="Please choose a bank first";break;case"PAYPAL":error_msg="Please select PayPal option first";break;case"COD":error_msg="Please select the Cash on Delivery option first";break;case"WALLET":error_msg="Please choose a Wallet first";break;case"PAYUMONEY":error_msg="Please select the PayUMoney option first";break;case"PREPAID_CARD":error_msg="Please select prepaid card option first";break;case"INTERNATIONAL_PAYMENT":error_msg="Please select your card type first";break;case"PART_PAY":error_msg="Please select Proper payment option from Part Pay";break;case"CBC":error_msg="none"==$(".cbc_radio_block").css("display").toLowerCase()?"Please select other Payment Option to proceed":"Please Select a Payment Option for CashPay";break;case"GIFT_CARD":var giftcard_enable=$("#giftcard_enable").val(),amount_payable=$("#total_pay_without_gc").val();giftcard_enable&&amount_payable>0&&(error_msg="Please select other Payment Option to proceed");break;default:error_msg="Please Select Proper Payment Option From "+payment_method}$("#show_checkout_error").text(error_msg).slideDown(250,"linear",function(){$("html, body").animate({scrollTop:$(this).offset().top-160},500)}),$(".btn_green_big").removeClass("btn-loader"),$("#payment_form .payment_tab_header_list ul li a[class=active]").addClass("red_border");rel=$("#payment_form .payment_tab_header_list ul li a[class=active]").attr("rel");return $("#"+rel).css({border:"1px solid #ec1e20"}),o.changeButtonState("original"),!1}if("CBC"==payment_method)if($("#show_checkout_error").is(":visible"))$("#show_checkout_error").slideDown(250,"linear",function(){$("html, body").animate({scrollTop:$(this).offset().top-160},500)}),$(".btn_green_big").removeClass("btn-loader");else{$("#show_checkout_error").slideUp(250,"linear"),$("#payment_form .payment_tab_header_list ul li a[class=red_border]").removeClass("red_border");rel=$("#payment_form .payment_tab_header_list ul li a[class=active]").attr("rel");$("#"+rel).css({border:"1px solid #d7d7d7"}),$("#codAgreement1").is(":checked")?(utils.eraseCookie("billing_address_changed"),$("#payment_form").submit(),$("#pay_secure_btn_top").addClass("btn_loader")):($("#show_checkout_agreement_error").text("Please accept the cash to be collected from your doorstep").slideDown(250,"linear",function(){$("html, body").animate({scrollTop:$(this).offset().top-160},500)}),o.changeButtonState())}else if("GIFT_CARD"==payment_method){var card_amount=parseInt($("#total_card_amount").val()),total_amount=parseInt($("#total_pay_amount").val()),total_pay_without_gc=parseInt($("#total_pay_without_gc").val());if(total_amount!=card_amount&&total_pay_without_gc>0){$("#show_checkout_error").text("Please pay the remaining amount with other payment method.").slideDown(250,"linear",function(){$("html, body").animate({scrollTop:$(this).offset().top-160},500)}),$(".btn_green_big").removeClass("btn-loader"),$("#payment_form .payment_tab_header_list ul li a[class=active]").addClass("red_border");rel=$("#payment_form .payment_tab_header_list ul li a[class=active]").attr("rel");$("#"+rel).css({border:"1px solid #ec1e20"}),o.changeButtonState("original")}else{$("#show_checkout_error").slideUp(250,"linear"),$("#payment_form .payment_tab_header_list ul li a[class=red_border]").removeClass("red_border");rel=$("#payment_form .payment_tab_header_list ul li a[class=active]").attr("rel");$("#"+rel).css({border:"1px solid #d7d7d7"}),utils.eraseCookie("billing_address_changed"),$("#payment_form").submit(),$("#pay_secure_btn_top").addClass("btn_loader")}}else{$("#show_checkout_error").slideUp(250,"linear"),$("#payment_form .payment_tab_header_list ul li a[class=red_border]").removeClass("red_border");var rel=$("#payment_form .payment_tab_header_list ul li a[class=active]").attr("rel");$("#"+rel).css({border:"1px solid #d7d7d7"}),utils.eraseCookie("billing_address_changed"),$("#payment_form").submit(),$("#pay_secure_btn_top").addClass("btn_loader")}},setPaymentMethod:function(payment_method_id,payment_method_name){var paymentMethod=$("#payment_method").val().toLowerCase(),isPartPay=($("#partPayDropDownOption").val(),$("#checkoutPartPayContainer").is(":visible"));if("emi"!=paymentMethod||isNaN(parseInt(payment_method_id))?isNaN(parseInt(payment_method_id))?($("#payment_method").val(payment_method_id),"net_banking"==payment_method_id.toLowerCase()&&$("#s2id_partpay_bank_select").show()):isNaN(parseInt(payment_method_id))||"none"==isPartPay||void 0===isPartPay?($("#payment_option_selected").val(payment_method_id),$("#payment_"+paymentMethod).val(payment_method_id)):($('input[name="payment_id['+$("#payment_method").val()+'][]"]').val(payment_method_id),$("#payment_option_selected").val(payment_method_id)):($("#payment_option_selected").val(""),$("#payment_"+paymentMethod).val(""),o.setEMIOptions(payment_method_id,payment_method_name)),"cbc"==paymentMethod){var cbc_charge=0,growtreeVal=0;$("#growTree").is(":checked")&&(growtreeVal=donation);var cbc_charge=cbcObj.charge,payable_amount=(cbcObj.oid,parseInt($("#total_pay_amount").val())),cbc_added=payable_amount*cbc_charge/100,total_pay=payable_amount+Math.ceil(cbc_added)+growtreeVal;$("#cbc_added_amount").attr("data-cbc-amount",Math.ceil(cbc_added)),$("#payment_form").find(".final-pricing-checkout .txt-red").html("Rs. "+utils.currencyFormat(Math.ceil(total_pay))),$("#total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(total_pay))),$(".total_pay_coupon_top").html("Rs. "+utils.currencyFormat(Math.ceil(total_pay))),o.checkCBCrange(total_pay)}$(".payment_option_radio").change(function(){parseInt($(this).val())}),$("#payment_method").length>0&&("net_banking"===paymentMethod&&$("#checkoutNET_BANKINGContainer").find('input[type="radio"]:checked').prop("checked",!1).parent().removeClass("active"),1==isPartPay&&$("#partpay_checkoutNET_BANKINGContainer").find('input[type="radio"]:checked').prop("checked",!1).parent().removeClass("active"))},setEMIOptions:function(bankpos,bankname){var preId="",isPartPay=$("#checkoutPartPayContainer").css("display");"none"!=isPartPay&&void 0!==isPartPay&&(preId="#checkoutPartPayContainer"),bankpos>0?($(preId+" #emi_note").hide(),$(preId+" #no_bank").show(),$('.ck-emi-table.emi-bank-container .ck-emi-table-content:visible input[type="radio"]:checked').prop("checked",!1),$(".ck-emi-table.emi-bank-container .ck-emi-table-content").hide(),$(preId+" #emi_bank_name").html(bankname),$(preId+" #emi_table_"+bankpos).find(".ck-emi-tr").each(function(){o.showEMIValues(parseInt($(this).attr("id")))}),$(".ck-emi-table.emi-bank-container").show(),$(".ck-emi-table.emi-bank-container #emi_table_"+bankpos).show()):($(preId+" #emi_note").hide(),$(preId+" #no_bank").show(),$("#payment_form")[0].reset(),$("#payment_option_selected").val(""),$(".ck-tab-content").find(".active").removeClass("active"),$("#payment_form")[0].reset()),bankpos>0?($(".emi_options_text span").text(bankname),$(".emi_tables_wrap").show(100),$("#checkoutEMIContainer .bank_select_wrap").addClass("active"),$(".emi_options_table").hide(),$(preId+" #emi_table_"+bankpos).fadeIn(200)):($("#checkoutEMIContainer .bank_select_wrap").removeClass("active"),$(".emi_options_table").hide(),$(".emi_tables_wrap").fadeOut(100))},showEMIValues:function(id){var preId="",totalAMt=$("#newtotal_pay_amt").val(),isPartPay=$("#checkoutPartPayContainer").css("display");"none"!=isPartPay&&void 0!==isPartPay&&(preId="#checkoutPartPayContainer",totalAMt=o.getTotalPartPayAmt());var emi_breakup_values=$(preId+" #emi_bu").val(),emi_breakup={};if(void 0!==emi_breakup_values){try{emi_breakup=$.parseJSON(emi_breakup_values)}catch(_error){emi_breakup=emi_breakup_values}}if(void 0!==id&&id>0&&emi_breakup.hasOwnProperty(id)){var rate=emi_breakup[id].rate,bu=emi_breakup[id].bu,is_no_cost_emi=void 0===emi_breakup[id].no_cost_emi?0:1,discounted_interest=0;if(totalAMt>0&&rate>0&&bu>0){var payment=o.PMT(rate/1200,bu,-totalAMt).toFixed(2);if(payment>0){var TOTAL=(payment*bu).toFixed(2),INTEREST=(TOTAL-totalAMt).toFixed(2);if(1==is_no_cost_emi&&1==no_cost_emi_option&&(INTEREST=discounted_interest=totalAMt-o.PMTR(rate/1200,bu,totalAMt).toFixed(2),payment=totalAMt/bu),$(preId+" #"+id+" label").text(bu+" Months"),$(preId+" #"+id+" .rate").text(rate+"%"),$(preId+" #"+id+" .interest").text("Rs."+utils.currencyFormat(Math.round(INTEREST))),$(preId+" #"+id+" .installment").text("Rs."+utils.currencyFormat(Math.round(payment))),1==no_cost_emi_option){var totalAmountCal=0==is_no_cost_emi?TOTAL:totalAMt;$(preId+" #"+id+" .nc-amt-payable").text("Rs."+utils.currencyFormat(Math.round(totalAmountCal))),$(preId+" #"+id+" .nc-emi-discount").text(discounted_interest>0?"(-) Rs."+utils.currencyFormat(Math.round(discounted_interest)):discounted_interest)}}}}},getTotalPartPayAmt:function(){var part_remaining_amount=parseInt($("#net_part_payment_remaining").attr("data-net_part_payment_remaining")),total_pay=parseInt($("#total_pay_amount").val());if(!isNaN(part_remaining_amount)){total_pay-=part_remaining_amount;var convenience_fee=parseInt($("#convenience_fee").attr("data-convenience_fee"));isNaN(convenience_fee)||(total_pay+=convenience_fee)}return total_pay},changeState:function(){"IN"!=$("#country_id").val()?($("#region_txtbox").css("display","inline-block"),$("#region_select").css("display","none"),$("#region_txtbox").prop("name","region"),$("#region_select").prop("name","region_select"),$("#region_select").removeClass("required inputerror"),$("#region_txtbox").next().css("display","block"),$("#region_txtbox").addClass("required"),$("#city").val(""),$("#postcode").attr("maxlength",10),$(".btn_green_big").addClass("disabled")):($("#region_txtbox").css("display","none"),$("#region_select").css("display","inline-block"),$("#region_select").prop("name","region"),$("#region_txtbox").prop("name","region_text"),$("#region_txtbox").removeClass("required inputerror"),$("#region_txtbox").next().css("display","none"),$("#region_select").addClass("required"),$("#postcode").attr("maxlength","6")),"IN"!=$("#bill_country_id").val()?($("#bill_region_txtbox").css("display","inline-block"),$("#bill_region_select").css("display","none"),$("#bill_region_txtbox").prop("name","bill_region"),$("#bill_region_select").prop("name","bill_region_select"),$("#bill_region_select").removeClass("required inputerror").removeClass("required inputerror"),$("#bill_region_txtbox").addClass("required"),$("#bill_region_txtbox").next().css("display","block"),$("#bill_city").val(""),$("#bill_postcode").attr("maxlength",10)):($("#bill_region_txtbox").css("display","none"),$("#bill_region_select").css("display","inline-block"),$("#bill_region_select").prop("name","bill_region"),$("#bill_region_txtbox").prop("name","bill_region_text"),$("#bill_region_txtbox").removeClass("required inputerror"),$("#bill_region_txtbox").next().css("display","none"),$("#bill_region_select").addClass("required"),$("#bill_postcode").attr("maxlength","6"))},postCodeCheck:function(){$("#postcode").keyup(function(e){var post_code=$(this).val();$("#country_id").val();if(6==post_code.length&&window.last_verified_pin!=post_code){window.last_verified_pin=post_code;var id=e.target.id;$(this).parents("#address_select_form").length&&o.checkAssemblyPincode(post_code,id),e.preventDefault()}}),$("#bill_postcode").keyup(function(e){var post_code=$(this).val();if("IN"!=$("#bill_country_id").val()&&$("#bill_postcode").attr("maxlength",10),6==post_code.length){window.last_bill_pin=post_code;var id=e.target.id;o.checkAssemblyPincode(post_code,id),e.preventDefault()}})},pinFormComplete:function(postcode,id){var cityId="",regionId="",country="";if(id.indexOf("bill_")>-1?(cityId="bill_city",regionId="bill_region_select",country=$("#bill_country_id").val()):(cityId=$("#city").length>0?"city":"city_txtbox",regionId="region_select",country=$("#country_id").val()),"IN"==country){var data=new Array;void 0!==postcode&&0!=postcode&&(data={pincode:postcode},o.pincodeDetailsAutoComplete(data,cityId,regionId))}},pincodeDetailsAutoComplete:function(data,cityId,regionId){var _url=root_url+"/config_pincode/getpindata",_data=data,_params={cityId:cityId,regionId:regionId};utils.makeRequest(_url,"POST",_data,o.handleAutoCompleteResponse,o.handleError,"",_params)},handleAutoCompleteResponse:function(result,_params){if($("#"+_params.cityId).val(""),$("#"+_params.cityId).parent().removeClass("input-filled"),$("#"+_params.regionId).select2("val",$("#"+_params.regionId+" option:first").val()),"bill_city"==_params.cityId?void 0!=$("#bill_street2").data("ui-autocomplete")&&$("#bill_street2").autocomplete("destroy"):void 0!=$("#street2").data("ui-autocomplete")&&$("#street2").autocomplete("destroy"),result+""!="false"){var data="";try{data=$.parseJSON(result)}catch(_error){data=result}try{data=$.parseJSON(data),$("#"+_params.cityId).val(data.city),$("#"+_params.cityId).parent().addClass("input-filled"),void 0!==data.state&&""!=data.state||(data.state=$("#"+_params.regionId+" option:first").val()),$("#"+_params.regionId+' option[value="'+data.state+'"]').length>0?$("#"+_params.regionId).select2("val",data.state):$("#"+_params.regionId).select2("val",$("#"+_params.regionId+" option:first").val());var locality=$.parseJSON(data.locality);if("bill_city"==_params.cityId){autocompleteID=$("#bill_street2").parent().parent().find(".gb-scroll").attr("id");$("#bill_street2").autocomplete({source:locality,appendTo:"#"+autocompleteID})}else{var autocompleteID=$("#street2").parent().parent().find(".gb-scroll").attr("id");$("#street2").autocomplete({source:locality,appendTo:"#"+autocompleteID})}$.ui.autocomplete.filter=function(array,term){var matcher=new RegExp("^"+$.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value)})}}catch(_error){}}else"bill_city"==_params.cityId?$("#bill_street2").empty():$("#street2").empty(),$("#"+_params.cityId).val(""),$("#"+_params.regionId).select2("val"," ")},resetForm:function(){$(".error-text").hide(),$("#shippingAddressFormCont").is(":visible")&&($("#firstname").val(""),$("#lastname").val(""),$("#mobile").val(""),$("#street").val(""),$("#street2").val(""),$("#landmark").val(""),$("#postcode").val(""),$("#city").val(""),$("#region_txtbox").val("").hide(),$("#region_select").select2("val"," "),$("#region_select").select2("enable"),$("#country_id").select2("val","IN")),$("#billingAddressFormCont").is(":visible")&&($("#bill_firstname").val(""),$("#bill_lastname").val(""),$("#bill_mobile").val(""),$("#bill_street").val(""),$("#bill_street2").val(""),$("#bill_landmark").val(""),$("#bill_postcode").val(""),$("#bill_city").val(""),$("#billregion_txtbox").val("").hide(),$("#bill_region_select").select2("val"," "),$("#bill_region_select").select2("enable"),$("#bill_country_id").select2("val","IN")),$("#update_id").val(""),$("#bill_update_id").val("")},handleError:function(x,y,_z){$(".cart-loader").hide(),$(".ck-pin-input-wrap .btn-loader").hide(),$(".cart-loader").hide();try{$("#cpn_check_btn").removeAttr("disabled"),$("#cpn_check_btn").removeClass("disabled")}catch(_error){}},feCheckBoxChange:function(){if(parseInt($(this).val()),$("#fe_discount").slideToggle(500),this.checked){var date=new Date;date.setTime(date.getTime()+6e5);var expiresfe=date.toGMTString();utils.createCookie("furnitureExchange",1,expiresfe)}else utils.eraseCookie("furnitureExchange")},OOSNotification:function(obj){var itemId=$(obj).attr("data-id"),email_id_from=$("#notify_id").val(),filter=/^[a-zA-Z0-9._-]+@([0-9a-z][0-9a-z.-]+\.)+[a-zA-Z]{2,4}$/i,emailValue=$.trim(email_id_from);if(1!=filter.test(emailValue))$("#notify_id").val("").focus(),$(".ck-oos-email-wrap").addClass("invld-pin"),$(".notify-input-error-wrap").show();else{$("#notify_form_wrap .error-text").hide();var data={email:emailValue,pids:itemId,checkIfExists:1},url=root_url+"/site_product/oos_notify_request",_params={itemId:itemId};utils.makeRequest(url,"POST",data,o.oosResponse,o.handleError,"",_params)}},oosResponse:function(data,_params){var oos_res_data=$.parseJSON(data);""!==oos_res_data.already_exists||""!==oos_res_data.Success?(""!==oos_res_data.already_exists&&o.deleteProductFromCart(".ck-non-oos-rm-btn"),$(".ck-non-del-wrap").slideUp(),$(".ck-oos-rmd-msg-wrap").slideDown(600),$(".notify-input-error-wrap").hide()):$("#availability_message_"+_params.itemId).val("There is some error, please try again")},deliveryFailed:function(obj){""!=$(obj).attr("data-id")&&o.deleteProductFromCart(".ck-non-del-rm-btn")},OOSfailed:function(obj){""!=$(obj).attr("data-id")&&o.deleteProductFromCart(".ck-non-oos-rm-btn")},removeBtnDisabled:function(){$(".notify_form_wrap").is(":visible")||($(".btn_blue").removeClass("disabled"),isFreeGiftErrorshow||$(".btn_green, .btn_green_big").removeClass("disabled")),o.handlePanasonicErrorMsg()},removeFePoints:function(){$("#fe_points").is(":checked")&&$("#fe_points").trigger("click"),$("#fe_error_msg").slideUp(),$("#form_fe_error_msg").slideUp()},handleShipTogetherFinalPage:function(){if($("#shipTogether").is(":checked")&&o.isShipTogetherOpted){o.isShipTogetherOpted=1;var _url=root_url+"/checkout/updateshipstogether";utils.makeRequest(_url,"POST",{},o.handleShipTogetherResponse,o.handleShipTogetherError)}},handleShipTogetherResponse:function(data){var response;try{response=$.parseJSON(data)}catch(e){response=data}if(1==response){o.isShipTogetherOpted=1,$("#shptFinalPage").css("backgroundImage","none"),$(".shipstogetherUncheck").removeClass("show").addClass("hide"),$(".shipstogetherCheck").removeClass("hide").addClass("show");for(var pids=$("#showHidePID").val().split(","),i=0;i<pids.length;i++)$("#cnf_"+pids[i]).remove();$("#shiptogetherwrap").show()}else 2==response&&($("#shptFinalPage").css("backgroundImage","none"),$(".shipstogetherUncheck").removeClass("show").addClass("hide"),$(".shipstogetherCheck").removeClass("show").addClass("hide"))},handleShipTogetherError:function(_x,_y,_z){o.isShipTogetherOpted=0,$("#shipTogether").prop("checked",!1)},handleShipTogether:function(){$("#shipTogether").is(":checked")?($(".shipstogetherUncheck").removeClass("hide").addClass("show"),$(".shipstogetherCheck").removeClass("show").addClass("hide"),o.setShipTogetherCookies(0)):($(".shipstogetherUncheck").removeClass("show").addClass("hide"),$(".shipstogetherCheck").removeClass("hide").addClass("show"),o.setShipTogetherCookies(1));var _pin=utils.readCookie("serviceable_pincode");o.checkAssemblyPincode(_pin)},setShipTogetherCookies:function(flag){if(flag=parseInt(flag),!isNaN(flag))switch(flag){case 0:utils.eraseCookie("ship_together"),utils.eraseCookie("ship_together_pids");break;case 1:utils.createCookie("ship_together",1),utils.createCookie("ship_together_pids",$("#shipTogetherPID").val())}},updateShipTogetherStatus:function(data){var showShipTogether=!1;1==data.status&&(showShipTogether=!0);var showDateRange=0,dateRange=data.date_range,displayDateRange="";null!==utils.readCookie("serviceable_pincode")&&void 0!==dateRange&&""!=dateRange.start_date&&""!=dateRange.end_date&&(showDateRange=1,displayDateRange=data.date_range.start_date+" - "+data.date_range.end_date);var showST="hide",isOptionSelected=0,showUnselectedText=1,defaultClass="wopin",_checkAssembly=0;showShipTogether&&(null!==utils.readCookie("ship_together")&&(isOptionSelected=1,showUnselectedText=0,_checkAssembly=1),null!==utils.readCookie("serviceable_pincode")&&(defaultClass=""),showST="show"),"hide"==showST?$("#ship_together_block").hide():$("#ship_together_block").show(),1==showDateRange?($(".withdate").css("display","inline-block"),$(".t-black").text(displayDateRange)):($(".withdate").css("display","none"),$(".t-black").text("")),$(".shipstogetherUncheck span.txt-cnt").text(data.count),$(".shipstogetherCheck span.txt-cnt").text(data.count),data.pids&&$("#shipTogetherPID").val(data.pids.join(",")),""!=defaultClass&&$(".shipstogetherCheck").addClass(defaultClass),1==showUnselectedText?($(".shipstogetherUncheck").removeClass("hide").addClass("show"),$(".shipstogetherCheck").removeClass("show").addClass("hide")):($(".shipstogetherUncheck").removeClass("show").addClass("hide"),$(".shipstogetherCheck").removeClass("hide").addClass("show")),isOptionSelected?($("#shipTogether").attr("checked","checked"),o.setShipTogetherCookies(1)):($("#shipTogether").attr("checked",!1),o.setShipTogetherCookies(0)),$("#ships-product-scroll").empty();var _d="";if(data.pidImages)for(i=0;i<data.pidImages.length;i++)_d+='<span class="ships-product-scroll-slide">',_d+='<img src="'+product_image_url+data.pidImages[i]+'" style="max-width:60px;">',_d+="</span>";if($("#ships-product-scroll").html(_d),1==_checkAssembly)for(var i=0;i<data.pids.length;i++){var _text=data.date_range.start_date+" - "+data.date_range.end_date;$("#delivery_date_cart_"+data.pids[i]).text(_text)}},handlePanasonicErrorMsg:function(_data){void 0!==_data?void 0!==_data.free_gift_panasonic_details&&(isFreeGiftErrorshow=_data.free_gift_panasonic_details.dummy_id_present,isFreeGiftErrorshow?$("#panasonic_error_msg").show():$("#panasonic_error_msg").hide()):isFreeGiftErrorshow?$("#panasonic_error_msg").show():$("#panasonic_error_msg").hide()},allInputReset:function(){$(".home-login-guest-modal input[type=text],.home-login-guest-modal input[type=password],.home-login-reg-wrap input[type=text],.home-login-reg-wrap input[type=radio],.home-login-reg-wrap input[type=number],.home-login-reg-wrap input[type=password]").val(""),$(".home-login-guest-modal input,.home-login-reg-wrap input").parent("div").removeClass("frm-error-wrap"),$(".home-login-guest-modal input,.home-login-reg-wrap input").parent("div").removeClass("frm-success-wrap"),$(".ck-reg-gender input").attr("checked",!1).closest(".ck-reg-gender-wrap").removeClass("frm-error-wrap")},form_fild_reset:function(){$(".popup-close").on("click",function(){$(".animate-input").parent().removeClass("input-filled")}),$(".popup_overlay").on("click",function(){$(".animate-input").parent().removeClass("input-filled")})},productSlider:function(id,productCol,shiftBy){var $this=$("#"+id),i=0,$slider=$this,$product=$slider.find(productCol),slidingSpan=parseInt($product.outerWidth(!0)*shiftBy),sliderWidth=$product.length*$product.outerWidth(!0),totalShifts=sliderWidth/slidingSpan,lastShiftWidth=sliderWidth%slidingSpan,actualCompleteShift=Math.floor(totalShifts),$next=$this.siblings(".ck-bill-addr-next"),$prev=$this.siblings(".ck-bill-addr-prev");$slider.width(sliderWidth),$next.on("click",function(){if(++i<actualCompleteShift)$slider.css({marginLeft:-slidingSpan*i},500),$prev.removeClass("inactive");else{var shift=parseInt($slider.css("marginLeft"))+-lastShiftWidth;$slider.css({marginLeft:shift},500),$(this).addClass("inactive"),$prev.removeClass("inactive")}}),$prev.on("click",function(){if(i--,$next.removeClass("inactive"),i<actualCompleteShift)$slider.css({marginLeft:-slidingSpan*i},500),0===i&&$(this).addClass("inactive");else{var shift=parseInt($slider.css("marginLeft"))+-lastShiftWidth;$slider.css({marginLeft:shift},500),$(this).addClass("inactive")}})},osNonDelSlider:function(){$(".os-non-del-ext-wrap .ck-non-del-product-slider-wrap").each(function(){var children=$(this).children(".ck-non-del-product-slide").length;$(this).siblings(".ck-non-del-product-cnt ").children(".ck-non-del-product-cnt-no").text(children),children>2?o.productSlider($(this).attr("id"),".ck-non-del-product-slide",2):$(".os-non-del-ext-wrap .ck-bill-addr-prev,.os-non-del-ext-wrap .ck-bill-addr-next,.os-non-del-ext-wrap .ck-non-del-product-cnt").hide()})},osOosSlider:function(){$(".os-oos-ext-wrap .ck-non-del-product-slider-wrap").each(function(){var children=$(this).children(".ck-non-del-product-slide").length;$(this).siblings(".ck-non-del-product-cnt ").children(".ck-non-del-product-cnt-no").text(children),children>2?o.productSlider($(this).attr("id"),".ck-non-del-product-slide",2):$(".os-oos-ext-wrap .ck-bill-addr-prev,.os-oos-ext-wrap .ck-bill-addr-next,.os-oos-ext-wrap .ck-non-del-product-cnt").hide()})},addDelAddrFirstUserSlider:function(){$(".ck-addr-frm-wrap .ck-non-del-product-slider-wrap").each(function(){var children=$(this).children(".ck-non-del-product-slide").length;$(this).siblings(".ck-non-del-product-cnt").children(".ck-non-del-product-cnt-no").text(children),children>8?o.productSlider($(this).attr("id"),".ck-non-del-product-slide",8):$(".ck-addr-frm-wrap .ck-bill-addr-prev,.ck-addr-frm-wrap .ck-bill-addr-next,.ck-addr-frm-wrap .ck-non-del-product-cnt").hide()})},addDelAddrSlider:function(){$(".ck-del-addr-add-frm-wrap .ck-non-del-product-slider-wrap").each(function(){var children=$(this).children(".ck-non-del-product-slide").length;$(this).siblings(".ck-non-del-product-cnt").children(".ck-non-del-product-cnt-no").text(children),children>8?o.productSlider($(this).attr("id"),".ck-non-del-product-slide",8):$(".ck-del-addr-add-frm-wrap .ck-bill-addr-prev,.ck-del-addr-add-frm-wrap .ck-bill-addr-next,.ck-del-addr-add-frm-wrap .ck-non-del-product-cnt").hide()})},editDelAddrSlider:function(){$(".ck-del-addr-edit-frm-wrap .ck-non-del-product-slider-wrap").each(function(){var children=$(this).children(".ck-non-del-product-slide").length;$(this).siblings(".ck-non-del-product-cnt").children(".ck-non-del-product-cnt-no").text(children),children>8?o.productSlider($(this).attr("id"),".ck-non-del-product-slide",8):$(".ck-del-addr-edit-frm-wrap .ck-bill-addr-prev,.ck-del-addr-edit-frm-wrap .ck-bill-addr-next,.ck-del-addr-edit-frm-wrap .ck-non-del-product-cnt").hide()})},addrSelNonSlider:function(){$(".ck-del-addr-list-item .ck-non-del-product-slider-wrap").each(function(){var children=$(this).children(".ck-non-del-product-slide").length;$(this).siblings(".ck-non-del-product-cnt").children(".ck-non-del-product-cnt-no").text(children),children>8?o.productSlider($(this).attr("id"),".ck-non-del-product-slide",8):$(".ck-del-addr-list-item .ck-bill-addr-prev,.ck-del-addr-list-item .ck-bill-addr-next,.ck-del-addr-list-item .ck-non-del-product-cnt").hide()})},billAddrSelSlider:function(){$(".ck-bil-addr-slider-wrap").each(function(){var children=$(this).children(".ck-bil-addr-slide").length;$(this).siblings(".ck-addr-cnt").children(".ck-addr-cnt-no").text(children),children>3?o.productSlider($(this).attr("id"),".ck-bil-addr-slide",3):$(".ck-bil-addr-sel-wrap .ck-bill-addr-prev,.ck-bil-addr-sel-wrap .ck-bill-addr-next,.ck-bil-addr-sel-wrap .ck-addr-cnt").hide()})},ocIntItemSlider:function(){$(".oc-int-pro-slider-wrap").each(function(){$(this).children(".oc-int-pro-slide").length>4?o.productSlider($(this).attr("id"),".oc-int-pro-slide",4):$(".oc-int-pro-slider-ext-wrap .ck-bill-addr-prev,.oc-int-pro-slider-ext-wrap .ck-bill-addr-next").hide()})},ocMultiSkuDetail:function(){$(".ck-oc-sku-list .ck-sku-row-wrap").children(".ck-sku-row-content").length>1?($(".oc-order-dtl-arrow").show(),$(".oc-order-details-content").addClass("oc-unexpanded"),$(".oc-order-dtl-arrow").on("click",function(){$(this).toggleClass("active"),$(".oc-order-details-content").toggleClass("oc-unexpanded")})):$(".oc-order-details-content").removeClass("oc-unexpanded")},serviceCallForSelectedAddress:function(){if(void 0!==o.pageType&&"AddressSelection"==o.pageType){var pincode=$("input[name=shipping_address_id][type=radio]:checked").siblings(".hidden_shipping_pincode").val();utils.createCookie("serviceable_pincode",pincode),utils.createCookie("pincode_service_call","select_address"),o.checkAssemblyPincode()}},initSliders:function(){o.osNonDelSlider(),o.osOosSlider(),o.addDelAddrFirstUserSlider(),o.addDelAddrSlider(),o.addrSelNonSlider(),o.ocIntItemSlider(),o.ocMultiSkuDetail()}};z.CHECKOUT=o}(PF,$),$(document).ready(function(){$(document).on("mouseenter mouseleave",".ck-logged-in",function(){$(".ck-logged-in .ck-loggedin-options").stop().slideToggle(300)}),PF.CHECKOUT.init(),$(".ck-oos-check-wrap label").on("click",function(){$("input#ckOosCheck").is(":checked")?($(".os-oos-ext-wrap .ck-rmv-email-wrap").hide(),$(".os-oos-ext-wrap .ck-non-oos-rm-btn").css("display","inline-block")):($(".os-oos-ext-wrap .ck-non-oos-rm-btn").hide(),$(".os-oos-ext-wrap .ck-rmv-email-wrap").css("display","inline-block"))}),$(".ck-cpn-rmv").click(function(){$("#cpn_code_in").val(""),$("#coupon_code").attr("placeholder","Have a Coupon Code?"),$(".ck-cpn-applied-wrap,.ck-cpn-error-wrap").hide(),$(".ck-cpn-input-wrap").show()})}));
//# sourceMappingURL=checkout.min.js.map