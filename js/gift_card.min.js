$(document).ready(function(){function right_side_form(abc){$(".prcd-topay-btn a").addClass("disabled"),$("."+abc+" .frrm-sendto-blck input").keyup(function(){var frmChk=!0;$("."+abc+"  .frrm-sendto-blck input").each(function(){""==$(this).val()&&(frmChk=!1)}),frmChk?$(".prcd-topay-btn a").removeClass("disabled"):$(".prcd-topay-btn a").addClass("disabled")})}function scroll_for_animate(){var heightFromTop=$(".mega-menu-ext-wrap").offset().top;$("html, body").animate({scrollTop:heightFromTop},"slow")}if($pinCodeSet=0,$("#gift_card_shipping_charges").html(giftCardShippingCharges),$.isEmptyObject(physicalProduct))$(".door-step-open").addClass("disabled"),$(".select-cta .door-step-open").text("Coming Soon");else{str='<option value="" data-id="">Gift Card Value</option>';$.each(physicalProduct,function(key,value){str+='<option value="'+value+'" data-id="'+key+'">'+value+"</option>"}),$(".gcValue[id^='domination_physical_']").html(str)}if($.isEmptyObject(ecardProduct))$(".email-step-open").addClass("disabled"),$(".select-cta .email-step-open").text("Coming Soon");else{var str='<option value="" data-id="">Gift Card Value</option>';$.each(ecardProduct,function(key,value){str+='<option value="'+value+'" data-id="'+key+'">'+value+"</option>"}),$(".gcValue[id^='domination_virtual_']").html(str)}$(".btn-green-pin").click(function(){$(this).addClass("btn-loader");var pincode=$("#pincode").val();if(""!=$.trim(pincode)){$pinCodeSet=pincode,$("#pincode").attr("validate","1");var _pin=PF.UTILITIES.readCookie("serviceable_pincode");if($.isEmptyObject(physicalSerchPinArr))return $("#pincode").siblings(".error-msg").html('<span class="pf-text-red">Gift card not available.</span>').show(),$(".btn-green-pin").removeClass("btn-loader"),!1;$.ajax({url:"/pincode/is_product_serviceable",data:{region_check:"1",pincode:pincode,prc_code:physicalSerchPinArr.prc_code,sku:physicalSerchPinArr.sku,supplier:physicalSerchPinArr.supplier,cod_exist:physicalSerchPinArr.cod_exist,brand_id:physicalSerchPinArr.brand_id,assembly_check:physicalSerchPinArr.assembly_check,product_id:physicalSerchPinArr.product_id},type:"post",success:function(data){$(".btn-green-pin").removeClass("btn-loader"),$("#pincode").attr("check","1"),data=$.trim(data);try{data=$.parseJSON(data)}catch(e){return $("#pincode").siblings(".error-msg").html("Enter valid pincode (e.g. 400001)</span>").show(),"Not a valid pincode"==data&&$("#pincode").siblings(".error-msg").html("Enter a valid pincode").css("display","block").removeClass(""),!1}if("not available"==data.serviceable||0==data.serviceable)$("#pincode").parent().removeClass("frm-success-wrap").addClass("frm-error-wrap"),$(".btn-green-pin").addClass("disabled"),$("#pincode").siblings(".error-msg").html("The Gift Card cannot be delivered to : "+pincode).css("display","inline-block");else if(("available"==data.serviceable||1==data.serviceable)&&($("#pincode").parent().removeClass("frm-error-wrap").addClass("frm-success-wrap"),$(".btn-green-pin").removeClass("disabled"),serv_str="Delivery between "+data.tentative_delivery_date.start_day+"-"+data.tentative_delivery_date.end_day,$(".giftcard_pincode_success").html(serv_str).show(),$("#pincode").siblings(".error-msg").hide(),!_pin)){var date=new Date;date.setTime(date.getTime()+2592e6);var expires=date.toGMTString();document.cookie="serviceable_pincode="+pincode+"; expires="+expires+"; path=/"}},error:function(){$(".btn-green-pin").removeClass("btn-loader"),$(".pin-err-gft").html('<span class="red">please try later</span>')}})}else $("#pincode").parent().removeClass("frm-success-wrap").addClass("frm-error-wrap"),$("#pincode").siblings(".error-msg").html("Required").show()}),$(".btn-green-pin").removeClass("loading"),$("#ecardsubmit,#physicalcardsubmit").click(function(){var currentid=$(this).attr("id"),FormName="",FormType="",mainProductId="";if("ecardsubmit"==currentid)FormName="ecard-form",FormType="ecard",mainProductId=ecardMainProduct,giftcardtype="virtual";else{FormName="physicalcard-form",FormType="physicalcard",giftcardtype="physical";var _pin=PF.UTILITIES.readCookie("serviceable_pincode");if(mainProductId=physicalMainProduct,"1"!=$("#pincode").attr("check"))return errormsg='<p class="txt-red custom-error">Click on the Check button to know if we can deliver to your pincode</p>',$("#pincode").siblings(".error-msg").html(errormsg).show(),!1}$(".custom-error").remove();$("#"+FormName+' [validate="1"]');error=!1;if(PF.HEADER.validateForm("",FormName))var error=!0;(error=!!validateGiftcardSelections(giftcardtype)||error)||($("#"+currentid).addClass("btn-loader"),$(".prcd-topay-btn a").addClass("disabled"),formdata=$("#"+FormName).serialize(),$.ajax({url:secure_url+"/cart/validgiftcard",data:formdata+"&mainProductId="+mainProductId+"&type="+FormType,type:"post",dataType:"json",success:function(data){if($("#"+currentid).removeClass("btn-loader"),data&&null!=data)try{if(1==data.status){if("physicalcard"==FormType&&!_pin){var date=new Date;date.setTime(date.getTime()+2592e6);var expires=date.toGMTString();pincode=$("#pincode").val(),document.cookie="serviceable_pincode="+pincode+"; expires="+expires+"; path=/"}return window.location=secure_url+"/checkout/cart",!0}return $("#"+currentid).removeClass("btn-loader"),"pincode"==data.type?(errormsg='<span class="txt-red"><img src="'+image_url+'images/valid_pin_gftcrd.png" alt="suc"> &nbsp;'+data.msg+"</span>",$("#pincode").siblings(".error-msg").html(errormsg).show()):$("#selection_error_"+giftcardtype).html(data.msg).show(),!1}catch(e){}$(".prcd-topay-btn a").removeClass("disabled")}}))}),$(".gift-balance-form input").keyup(function(){var empty=!0;$(".gift-balance-form input").each(function(){""==$(this).val()&&(empty=!1)}),empty?$(".check-btn-bal").removeClass("disabled"):$(".check-btn-bal").addClass("disabled")}),$(".selct-drp-dwn, drp-dwn-icn").on("click",".init",function(e){$(this).closest(".selct-drp-dwn ").children("li:not(.init)").toggle(),e.stopPropagation()}),$("body").on("click",function(){$(".selct-drp-dwn ").children("li:not(.init)").hide()});var allOptions=$(".selct-drp-dwn ").children("li:not(.init)");$(".selct-drp-dwn ").on("click","li:not(.init)",function(){var productId=0,productQty=0;allOptions.removeClass("selected"),$(this).addClass("selected"),$(".selct-drp-dwn ").children(".init").html($(this).html()),allOptions.slideUp(),productId=$(this).attr("data-id"),(productQty=$("#input_"+productId).val())?$(".qty_input").val(productQty):$(".qty_input").val(0)}),$("#check_balance_msg").hide(),$(".check-btn-bal").on("click",function(){var giftcard_no=$("#gft-crd-no").val(),giftcard_pin=$("#gft-crd-pin").val();""!=giftcard_no&&""!=giftcard_pin?($(".check-btn-bal").addClass("btn-loader"),$.ajax({url:secure_url+"/checkout/checkGiftCardBalance",data:{gv_number:giftcard_no,gv_pin:giftcard_pin},type:"post",success:function(data){if(data&&null!=data){var response;try{response=$.parseJSON(data)}catch(e){response=data}}if(!0===response.status){var balanceStr="<p><span>Balance :</span> <span>Rs. "+response.amount+"</span></p>",expiryStr="<p><span>Expiry Date: </span> <span> "+response.expiryDate+"</span></p>";$("#check_balance_msg").html(balanceStr+expiryStr).removeClass("pf-text-red").addClass("pf-primary-color").show(),$("#check_balance_note_msg").show()}else $("#check_balance_msg").html(response.message).addClass("pf-text-red").removeClass("pf-primary-color").show(),$("#check_balance_note_msg").show();$(".check-btn-bal").removeClass("btn-loader")},error:function(){$("#check_balance_msg").html("Please Try Later").addClass("pf-text-red").removeClass("pf-primary-color").show(),$(".check-btn-bal").removeClass("btn-loader")}})):($("#check_balance_msg").html("Please enter a valid Gift Card Number and Pin").addClass("pf-text-red").removeClass("pf-primary-color").show(),$("#check_balance_note_msg").hide())}),$(".door-delivery-block").hide(),$(".door-step-open").on("click",function(){if($.isEmptyObject(physicalProduct))return!1;$(".door-delivery-block").fadeIn(400),$(".gft-door-row").fadeOut(400),right_side_form("door-delivery-block"),scroll_for_animate(),$(".gft-cpn-bxs").html(""),count=1}),$(".back-to-prev-door").on("click",function(){$(".door-delivery-block").hide(),$(".door-delivery-block").fadeOut("slow"),$(".gft-door-row").fadeIn("slow"),$(".gft-cpn-bxs").html(""),$(".frrm-sendto-blck input").val(""),$(".selct-drp-dwn ").children(".init").html("Select Amount"),$(".selct-drp-dwn li").removeClass("selected"),$(".qty_input").val(0),count=1}),$(".email-delivery-block").hide(),$(".email-step-open").on("click",function(){if($.isEmptyObject(ecardProduct))return!1;$(".email-delivery-block").fadeIn(400),$(".gft-door-row").fadeOut(400),right_side_form("email-delivery-block"),scroll_for_animate(),$(".gft-cpn-bxs").html(""),count=1}),$(".back-to-prev-email").on("click",function(){$(".email-delivery-block").hide(),$(".email-delivery-block").fadeOut("slow"),$(".gft-door-row").fadeIn("slow"),$(".page-title").show(),$(".gft-cpn-bxs").html(""),$(".frrm-sendto-blck input").val(""),$(".selct-drp-dwn ").children(".init").html("Select Amount"),$(".selct-drp-dwn li").removeClass("selected"),$(".qty_input").val(0),count=1}),$("#pincode").on("keyup change",function(){""==$(this).val()?$(".gft-frm-check-pin a").addClass("disabled"):$(".gft-frm-check-pin a").removeClass("disabled")}),$(".giftcard_pincode_success").hide();var count=1,curr_amt="";$("body").on("click",".plussign",function(){$(".selct-drp-dwn ").children("li:not(.init)").hide();var currentFormId=$(this).parents("form").attr("id"),gft_sel_amnt=$("#"+currentFormId+" .selct-drp-dwn").find(".selected").data("value"),selectedID=$("#"+currentFormId+" .selct-drp-dwn").find(".selected").data("id"),$qty=$(this).closest("div").find(".qty_input"),currentVal=parseInt($qty.val()),qtyArr="";if($(".gc-error").hide(),$(".selct-drp-dwn").removeClass("gc-error-bdr"),$(".choose-qty-block").removeClass("gc-error-bdr"),null===selectedID||""==selectedID)return $("#"+currentFormId+" .gc-error").show(),$("#"+currentFormId+" .selct-drp-dwn").addClass("gc-error-bdr"),!1;if(gft_amnt_no=currentVal+1,(qtyArr="physicalcard-form"==currentFormId?physicalProductQty:ecardProductQty)[selectedID]<gft_amnt_no){var errorStr="You can only order a maximum of "+qtyArr[selectedID]+"  quantities  for this Denomination";return $("#"+currentFormId+" .gc-error").html(errorStr).show(),$("#"+currentFormId+" .choose-qty-block").addClass("gc-error-bdr"),!1}if(isNaN(currentVal)||$qty.val(currentVal+1),$("#"+currentFormId+" #div_"+selectedID).length>0)$("#"+currentFormId+" #div_"+selectedID+" p.multiple-of-cpn span.gft_amount_no_val").text(gft_amnt_no),$("#"+currentFormId+" #input_"+selectedID).val(gft_amnt_no);else{if(5==$(".cpncrd-blck").length)return!1;var divStr='<div class="cpncrd-blck" id="div_'+selectedID+'">\n                     <input type="hidden" name="giftcardvalue['+selectedID+']" value="'+gft_sel_amnt+'" id="giftcardvalueinput_'+selectedID+'"><input type="hidden" name="dimenitaion['+selectedID+']" value="'+gft_amnt_no+'" id="input_'+selectedID+'"><div class="cpn-crd">\n                     <span class="amount-gft-vch">'+gft_sel_amnt+'</span><a href="javascript:void(0)" class="gftcrd-close-icn">\n                </a></div>\n                <p class="multiple-of-cpn">x \n                <span  class="gft_amount_no_val">'+gft_amnt_no+"</span></p></div>";1==count?($("#"+currentFormId+" .gft-cpn-bxs").append(divStr+'<a href="javascript:void(0)" class="add-another-blck">Add Another</a>'),$("#"+currentFormId+" .anmt-fly-blck").addClass("anmt-fly-blck-on")):($("#"+currentFormId+" .cpncrd-blck:first-child").before(divStr),$("#"+currentFormId+" .anmt-fly-blck").addClass("anmt-fly-blck-on"))}count++,curr_amt=gft_sel_amnt,$(".cpncrd-blck").length>=5&&$(".add-another-blck").hide()}),$(".minussign").on("click",function(){$(".gc-error").hide(),$(".selct-drp-dwn").removeClass("gc-error-bdr"),$(".choose-qty-block").removeClass("gc-error-bdr");var currentFormId=$(this).parents("form").attr("id"),$qty=$(this).closest("div").find(".qty_input"),minus_cur_val=$(this).closest(".slect-gft-qty").siblings(".slect-gft-vchr").find(".selct-drp-dwn"),selectedID=$(minus_cur_val).find(".selected").data("id"),currentVal=parseInt($qty.val());if(tempValue=currentVal-1,!isNaN(tempValue)&&tempValue>0)$qty.val(tempValue),$("#div_"+selectedID+" p.multiple-of-cpn span.gft_amount_no_val").text(tempValue),$("#input_"+selectedID).val(tempValue);else{if(tempValue<0)return!1;$qty.val(tempValue),$("#div_"+selectedID).remove(),0==$("#"+currentFormId+" .cpncrd-blck").length&&($("#"+currentFormId+" .gft-cpn-bxs").html(""),count=1)}}),$("#f_name_mail").on("keypress change keyup",function(){$("#fnme-frm-usr").text($(this).val())}),$("#message_id").on("keypress change keyup",function(){$("#msg-cpy-usr").text($(this).val())}),$("#frm_f_name_mail").on("keypress change keyup",function(){$("#frm-cpy-usr").text($(this).val())}),$("body").on("click",".add-another-blck, .drp-dwn-icn",function(e){$(".selct-drp-dwn .init").trigger("click"),e.stopPropagation()}),$("body").on("click",".gftcrd-close-icn",function(){$(this).parent().parent(".cpncrd-blck").remove(),$(".cpncrd-blck").length<=0&&($(".gft-cpn-bxs").html(""),count=1),$(".cpncrd-blck").length<5&&$(".add-another-blck").show(),$(".prcd-topay-btn a").removeClass("disabled")}),$("#pincode").blur(function(){$(this).val()!=$pinCodeSet&&$(".giftcard_pincode_success").html("").hide()});var virtualGiftCardCounter=1,physicalGiftCardCounter=1;$(".email-gft-card ").on("click",function(){$(this).parents(".column-wrap").hide(),$(".emial-gft-card-wrap").fadeIn("slow"),initAddMoreGiftCard("virtual",virtualGiftCardCounter),initDominationQuantity("virtual")}),$(".physcl-gft-card").on("click",function(){$(this).parents(".column-wrap").hide(),$(".physcl-gft-card-wrap").fadeIn("slow"),initAddMoreGiftCard("physical",physicalGiftCardCounter),initDominationQuantity("physical")}),$(".go-back-btn").on("click",function(){$(".emial-gft-card-wrap, .physcl-gft-card-wrap").fadeOut(),$(".column-wrap").fadeIn();var loadTab=location.href.split("#")[1];void 0!==loadTab&&""!=loadTab&&history.pushState("","Gift Card",location.href.replace("#"+loadTab,"")),clearBlockInputs()}),$("#pincode").on("keypress change keyup",function(){6==$(this).val().length?$(".btn-green-pin").removeClass("disabled"):$(".btn-green-pin").addClass("disabled")}),$("#f_name_mail").on("keypress change keyup",function(){$("#fnme-frm-usr").text($(this).val())}),$("#l_name_mail").on("keypress change keyup",function(){$("#lnme-frm-usr").text($(this).val())}),$("#message_id").on("keypress change keyup",function(){$("#msg-cpy-usr").text($(this).val())}),$("#frm_f_name_mail").on("keypress change keyup",function(){$("#frm-cpy-usr").text($(this).val())}),$(".event-gallery-image-thumb ul li").on("click",function(){var dataImg=$(this).data("img");$(this).closest(".event-gallery-image-thumb").siblings(".event-gallery-image").find("img").attr("src",dataImg),$(".event-gallery-image-thumb ul li").removeClass("active"),$(this).addClass("active")}),$("#message_id").on("keypress change keyup",function(){$(this).val().length>0?$("#msg-cpy-usr").text($(this).val()):$("#msg-cpy-usr").text("Your Personalised Message Will Be Here")}),$("#frm_f_name_mail").on("keypress change keyup",function(){$("#senderFname-txt").text($(this).val())}),$("#frm_l_name_mail").on("keypress change keyup",function(){$("#senderLname-txt").text($(this).val())}),$(".gcValue, .gcQuantity ").select2({minimumResultsForSearch:-1});var initSelect2=function(){$(".gcValue, .gcQuantity ").select2({minimumResultsForSearch:-1})},setQuantity=function(){$(".gcValue").on("change",function(){var giftcardtype=$(this).attr("id").split("_")[1];if(""!=$(this).siblings(".gcQuantity").select2("val")&&""!=$(this).val())validateGiftcardSelections(giftcardtype);else if(""==$(this).siblings(".gcQuantity").select2("val")&&""!=$(this).val()){var Obj=$(this);setTimeout(function(){Obj.siblings(".gcQuantity").select2("val",Obj.siblings(".gcQuantity").find("option:eq(1)").val()),validateGiftcardSelections(giftcardtype)},300)}}),$(".gcQuantity").on("change",function(){var giftcardtype=$(this).siblings(".gcValue").attr("id").split("_")[1];validateGiftcardSelections(giftcardtype)})};setQuantity();var resetGiftcardSelection=function(giftcardtype){var removeGiftcardSelection=!1;$(".slct-yr-gft-card-lst[id^=div_giftcard_list_"+giftcardtype+"_]").each(function(){removeGiftcardSelection?$(this).children(".add-more-gft-card-"+giftcardtype).off("click").parent().remove():($(this).find(".gcValue").val("").removeAttr("disabled").siblings(".gcQuantity").val("").trigger("change").siblings(".gb-select-val").hide().siblings(".add-more-gft-card-"+giftcardtype).off("click").hide().siblings(".cancel-more-gft-card").off("click").hide(),createDenomination(giftcardtype,$(this).attr("id").split("_")[4]),removeGiftcardSelection=!0)}),$("#selection_error_"+giftcardtype).hide(),$("#purchase_value_"+giftcardtype).html(0)},clearBlockInputs=function(){$("input[type=text], textarea").val("").siblings(".error-msg").html("").hide().parent().removeClass("frm-success-wrap").removeClass("frm-error-wrap"),resetGiftcardSelection("virtual"),resetGiftcardSelection("physical"),$(".note").hide(),$("#card_value_virtual_1").html(0),$("#card_value_virtual_2").html(0)},initAddMoreGiftCard=function(giftcardtype){$(".add-more-gft-card-"+giftcardtype).on("click",function(){triggerAddMoreEvent(giftcardtype,this)})},triggerAddMoreEvent=function(giftcardtype,AddMoreObj){$(AddMoreObj).hide(),$("#selection_error_"+giftcardtype).hide(),"virtual"==giftcardtype&&$(".note").show(),$(".gcValue, .gcQuantity ").select2("destroy");var lastGiftCardObj=$(".slct-yr-gft-card-lst[id^=div_giftcard_list_"+giftcardtype+"_]").last();Number(lastGiftCardObj.attr("id").split(/[_ ]+/).pop());cloneObjects(lastGiftCardObj,giftcardtype)},cloneObjects=function(Obj,giftcardtype){var cloneCount="virtual"==giftcardtype?virtualGiftCardCounter:physicalGiftCardCounter;Obj.find(".gb-select-val .close-btn").css("display","inline-block"),Obj.clone().attr("id","div_giftcard_list_"+giftcardtype+"_"+(cloneCount+1)).insertAfter($("[id^=div_giftcard_list_"+giftcardtype+"_]:last"));var AddMoreObj=$("#div_giftcard_list_"+giftcardtype+"_"+(cloneCount+1)).find(".add-more-gft-card-"+giftcardtype);$("#div_giftcard_list_"+giftcardtype+"_"+(cloneCount+1)).find(".gcValue").val("").removeAttr("disabled").siblings(".gcQuantity").val("").siblings(".cancel-more-gft-card").css("display","inline-block").siblings(".gb-select-val").css("display","none").siblings(".add-more-gft-card-"+giftcardtype).off("click").on("click",function(){triggerAddMoreEvent(giftcardtype,AddMoreObj)}).css("display","none").siblings(".gcValue").attr("id","domination_"+giftcardtype+"_"+(cloneCount+1)),createDenomination(giftcardtype,cloneCount+1),initDominationQuantity(giftcardtype),removeGiftCard(giftcardtype),initDominationSelection(giftcardtype),initSelect2(),setQuantity(),Obj.find(".gcValue").attr("disabled","disabled"),"virtual"==giftcardtype?virtualGiftCardCounter++:physicalGiftCardCounter++},initDominationQuantity=function(giftcardtype){$(".gb-select").on("change",function(){if(""!=$(this).val()&&""!=$(this).siblings("select").val()){var LastID=$(".slct-yr-gft-card-lst[id^=div_giftcard_list_"+giftcardtype+"_]").last().attr("id"),divID=$(this).parent().attr("id");1==$(".slct-yr-gft-card-lst[id^=div_giftcard_list_"+giftcardtype+"_]").length&&$(".slct-yr-gft-card-lst[id^=div_giftcard_list_"+giftcardtype+"_]").last().find(".gb-select-val .close-btn").css("display","none"),LastID==divID&&$(this).parent().find(".gcValue").find("option").size()>2&&$(this).siblings(".add-more-gft-card-"+giftcardtype).css("display","inline-block"),$(this).siblings(".cancel-more-gft-card").hide(),$(this).siblings(".gb-select-val").css("display","inline-block").find("span").html($(this).val()*$(this).siblings("select").val()),calculateGiftCardAmount(giftcardtype),initDominationSelection(giftcardtype)}else 1==$(".slct-yr-gft-card-lst[id^=div_giftcard_list_"+giftcardtype+"_]").length?($(this).siblings(".cancel-more-gft-card").hide(),$(this).siblings(".gb-select-val").css("display","none"),$(this).siblings(".add-more-gft-card-"+giftcardtype).css("display","none"),calculateGiftCardAmount(giftcardtype)):($(this).siblings(".gb-select-val").css("display","none"),$(this).siblings(".cancel-more-gft-card").show(),$(this).siblings(".add-more-gft-card-"+giftcardtype).css("display","none"),calculateGiftCardAmount(giftcardtype))})},onRemoveGiftCardAction=function(giftcardtype){var lastGiftCardObj=$(".slct-yr-gft-card-lst[id^=div_giftcard_list_"+giftcardtype+"_]").last(),LastGiftCardValue=lastGiftCardObj.find(".gcValue").val();calculateGiftCardAmount(giftcardtype),createDenomination(giftcardtype,lastGiftCardObj.attr("id").split("_")[4]),initDominationSelection(giftcardtype),lastGiftCardObj.find(".gcValue").val(LastGiftCardValue).removeAttr("disabled");switch(1==$(".slct-yr-gft-card-lst[id^=div_giftcard_list_"+giftcardtype+"_]").length&&""!=lastGiftCardObj.find(".gcValue").val()&&""!=lastGiftCardObj.find(".gcQuantity").val()?"lastGiftCardSelectedValues":1==$(".slct-yr-gft-card-lst[id^=div_giftcard_list_"+giftcardtype+"_]").length?"lastGiftCardNonSelectedValues":""!=lastGiftCardObj.find(".gcValue").val()&&""!=lastGiftCardObj.find(".gcQuantity").val()?"GiftCardSelectedValues":"GiftCardNonSelectedValues"){case"lastGiftCardSelectedValues":lastGiftCardObj.find(".cancel-more-gft-card").css("display","none"),lastGiftCardObj.find(".add-more-gft-card-"+giftcardtype).css("display","inline-block"),lastGiftCardObj.find(".gb-select-val .close-btn").css("display","none"),$(".note").hide();break;case"lastGiftCardNonSelectedValues":lastGiftCardObj.find(".cancel-more-gft-card").css("display","none"),lastGiftCardObj.find(".add-more-gft-card-"+giftcardtype).css("display","none"),$(".note").hide();break;case"GiftCardSelectedValues":lastGiftCardObj.find(".cancel-more-gft-card").css("display","none"),lastGiftCardObj.find(".add-more-gft-card-"+giftcardtype).css("display","inline-block"),$(".note").show();break;case"GiftCardNonSelectedValues":lastGiftCardObj.find(".cancel-more-gft-card").css("display","inline-block"),lastGiftCardObj.find(".add-more-gft-card-"+giftcardtype).css("display","none"),$(".note").show()}validateGiftcardSelections(giftcardtype)},removeGiftCard=function(giftcardtype){$(".cancel-more-gft-card").on("click",function(){$(this).siblings(".add-more-gft-card-"+giftcardtype).off("click"),$(this).parent().remove(),onRemoveGiftCardAction(giftcardtype)}),$(".close-btn").on("click",function(){$(".slct-yr-gft-card-lst[id^=div_giftcard_list_"+giftcardtype+"_]").length>1&&($(this).siblings(".add-more-gft-card-"+giftcardtype).off("click"),$(this).parent().parent().remove(),onRemoveGiftCardAction(giftcardtype))})},calculateGiftCardAmount=function(giftcardtype){var totalAmount=0;$(".slct-yr-gft-card-lst[id^=div_giftcard_list_"+giftcardtype+"_]").each(function(){totalAmount+=Number($(this).find(".gcValue").val())*Number($(this).find(".gcQuantity").val())}),$("#purchase_value_"+giftcardtype).html(totalAmount),"virtual"==giftcardtype&&($("#card_value_"+giftcardtype+"_1").html(totalAmount),$("#card_value_"+giftcardtype+"_2").html(totalAmount))},createDenomination=function(giftcardtype,counter){if("virtual"==giftcardtype)if($.isEmptyObject(ecardProduct))$(".door-step-open").addClass("disabled"),$(".select-cta .door-step-open").text("Coming Soon");else{str='<option value="" data-id="">Gift Card Value</option>';$.each(ecardProduct,function(key,value){str+='<option value="'+value+'" data-id="'+key+'">'+value+"</option>"}),$("#domination_virtual_"+counter).html(str)}else if($.isEmptyObject(physicalProduct))$(".email-step-open").addClass("disabled"),$(".select-cta .email-step-open").text("Coming Soon");else{var str='<option value="" data-id="">Gift Card Value</option>';$.each(physicalProduct,function(key,value){str+='<option value="'+value+'" data-id="'+key+'">'+value+"</option>"}),$("#domination_physical_"+counter).html(str)}},validateGiftcardSelections=function(giftcardtype){$("#"+giftcardtype+"_hidden_data").html();var giftcardSelectionError=!1,error=!1;if($("div[id^=div_giftcard_list_"+giftcardtype+"_]").length>0){$("#"+giftcardtype+"_hidden_data").html("");var hiddenData="";$(".slct-yr-gft-card-lst[id^=div_giftcard_list_"+giftcardtype+"_]").each(function(){var domination=$(this).children(".gcValue").val(),data_id=$(this).find("option:selected").data("id"),qty=$(this).children(".gcQuantity").val();""!=domination&&""!=qty?(hiddenData+='<input type="hidden" name="giftcardvalue['+data_id+']" value="'+domination+'" id="giftcardvalueinput_'+data_id+'">',hiddenData+='<input type="hidden" name="dimenitaion['+data_id+']" value="'+qty+'" id="input_'+data_id+'">'):(""==domination&&($(this).find(".gcValue").addClass("frm-error-gftcrd"),giftcardSelectionError=!0,error=!0),""==qty&&($(this).find(".gcQuantity").addClass("frm-error-gftcrd"),giftcardSelectionError=!0,error=!0))}),$("#"+giftcardtype+"_hidden_data").html(hiddenData)}else error=!0;return giftcardSelectionError?$("#selection_error_"+giftcardtype).html("Select a Gift Card Value and Quantity").show():$("#selection_error_"+giftcardtype).html("").hide(),error},initDominationSelection=function(giftcardtype){var usedCards=[];$(".slct-yr-gft-card-lst[id^=div_giftcard_list_"+giftcardtype+"_]").each(function(){""!=$(this).find(".gcValue").val()&&usedCards.push($(this).find(".gcValue").val())}),$(".slct-yr-gft-card-lst[id^=div_giftcard_list_"+giftcardtype+"_]").each(function(){$(this).find(".gcValue").attr("id");var obj=$(this);$.each(usedCards,function(index,item){""!=item&&obj.find(".gcValue").val()!=item&&obj.find(".gcValue option[value='"+item+"']").remove()})})};$(window).bind("hashchange",function(){clearBlockInputs();var loadTab=location.hash.replace(/^#/,"");"eGiftCard"==loadTab?($(".physcl-gft-card-wrap").fadeOut(),$(".email-gft-card").trigger("click")):"physicalGiftCard"==loadTab?($(".emial-gft-card-wrap").fadeOut(),$(".physcl-gft-card").trigger("click")):$(".go-back-btn").trigger("click")});!function(url){var loadTab=url.split("#")[1];"eGiftCard"==loadTab?$(".email-gft-card").trigger("click"):"physicalGiftCard"==loadTab&&$(".physcl-gft-card").trigger("click"),scroll_for_animate()}(location.href)});
//# sourceMappingURL=gift_card.min.js.map