function loadMoreOrders(){var slimit=$("#load-more").attr("pid");$.ajax({url:root_url+"/customer_trackOrder/trackOrderDetails",data:{slimit:slimit,is_load:1},type:"POST",async:!0,beforeSend:function(){$("#load-more").addClass("btn-loader")},success:function(data){$(".view-more-return-orders").remove(),$("#order-wrapper").append(data),$("#load-more").removeClass("btn-loader")}})}function TrackData(orderid,productid){var tid=orderid+""+productid;$.ajax({url:root_url+"/customer_trackOrder/trackItem/"+orderid+"/"+productid+"/timeline",beforeSend:function(){$("#"+tid).parent().parent().parent().parent().find(".time-container").css("display","block")},success:function(data){$("#"+tid).parent().parent().parent().parent().find(".time-container").html(data),$("#"+tid).parent().parent().parent().parent().find(".time-container").css("display","block").find(".row.tyo-track-dtl-row").css("display","block")}})}function mousePosition(el,node){var elOffsetLeft=el.offset().left,elOffsetTop=el.offset().top,elWidth=el.outerWidth(!0),elHeight=el.outerHeight(!0),elHalfWidth=elWidth/2,wrapperDiv=$(".track_your_order_wrap"),tooltipDiv=$("#track-order-tooltip");tooltipDiv.outerWidth(!0),tooltipDiv.offset().top,tooltipDiv.outerHeight(!0),wrapperDiv.offset().top,wrapperDiv.outerHeight(!0);el.hasClass("first")?$(".tyo_hover_details").css("marginLeft",-49):el.hasClass("last")?$(".tyo_hover_details").css("marginLeft",-288):$(".tyo_hover_details").css("marginLeft",-165),$(node).offset({left:elOffsetLeft+elHalfWidth,top:elOffsetTop+elHeight})}function IsEmail(email){return!!/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(email)}function showHidefilter(event){filterInput.className="inpt active",filterHolder.style.display="block",document.addEventListener("click",hidefilter),event.stopPropagation()}function searchFilter(){for(var filter=filterInput.value.toLowerCase(),i=0;i<filterLiList.length;i++)filterLiList[i].innerText.toLowerCase().indexOf(filter)>-1?filterLiList[i].style.display="block":filterLiList[i].style.display="none"}function hidefilter(event){$(event.target).closest("#furex-filter-holder").length<1&&filterInput.classList.contains("active")&&(event.stopPropagation(),filterInput.className="inpt",filterHolder.style.display="none",filterInput.value="",showAllFilterOption(),checkInput())}function showAllFilterOption(){for(var i=0;i<filterLiList.length;i++)filterLiList[i].style.display="block"}function checkInput(){for(var li in filterLiList)filterLiList.hasOwnProperty(li)&&void 0!=filterLiList[li]&&(filterLiList[li].classList.contains("selected")?filterLiList[li].querySelector("input").checked=!0:filterLiList[li].querySelector("input").checked=!1);document.removeEventListener("click",hidefilter)}function applyFurnitureFilter(event){event.preventDefault();for(var li in filterLiList)if(filterLiList.hasOwnProperty(li)&&void 0!=filterLiList[li])if(filterLiList[li].querySelector("input").checked&&filterLiList[li].classList.contains("selected"));else if(filterLiList[li].querySelector("input").checked&&!filterLiList[li].classList.contains("selected")){filterLiList[li].className="selected";var newLi=document.createElement("li");newLi.innerHTML=filterLiList[li].innerText.trim()+"<a href='javascript:void(0)' class='filter-remove'></a>",filterResult.querySelector("ul").appendChild(newLi),newLi.querySelector(".filter-remove").addEventListener("click",filterRemove),filterInputVal.push(filterLiList[li].innerText.trim())}else if("false"!==filterLiList[li].querySelector("input").checked&&filterLiList[li].classList.contains("selected")){filterLiList[li].className="",filterLiList[li].querySelector("input").checked=!1;for(var filterList in filterResult.querySelectorAll("li"))filterResult.querySelectorAll("li").hasOwnProperty(filterList)&&void 0!=filterResult.querySelectorAll("li")[filterList]&&filterResult.querySelectorAll("li")[filterList].innerText.trim()===filterLiList[li].innerText.trim()&&(filterResult.querySelectorAll("li")[filterList].outerHTML="");for(var i=0;i<filterInputVal.length;i++)filterInputVal[i].trim()===filterLiList[li].innerText.trim()&&filterInputVal.splice(i,1)}else filterLiList[li].className="",filterLiList[li].querySelector("input").checked=!1,filterLiList[li].style.display="block";0==filterInputVal.length?filterInputHidden.value="":filterInputHidden.value=JSON.stringify(filterInputVal),filterInput.parentElement.className="furniture-ex-search-wrap",filterInput.nextElementSibling.style.display="none",document.body.click(),document.querySelector(".furniture-ex-search-wrap .error-msg").style.display="none",filterResult.style.display="block"}function resetFurnitureFilter(event){event.preventDefault();for(var li in filterLiList)filterLiList.hasOwnProperty(li)&&void 0!=filterLiList[li]&&(filterLiList[li].className="",filterLiList[li].querySelector("input").checked=!1,filterLiList[li].style.display="block");filterResult.querySelector("ul").innerHTML="",0==(filterInputVal=[]).length?filterInputHidden.value="":filterInputHidden.value=JSON.stringify(filterInputVal),document.body.click()}function filterRemove(event){for(var li in filterLiList)filterLiList.hasOwnProperty(li)&&void 0!=filterLiList[li]&&filterLiList[li].querySelector("input").checked&&filterLiList[li].innerText.trim()===this.parentElement.innerText&&(filterLiList[li].className="",filterLiList[li].querySelector("input").checked=!1,removeFilterVal(this.parentElement.innerText.trim()),this.parentElement.outerHTML="")}function removeFilterVal(parentElementText){for(var i=0;i<filterInputVal.length;i++)filterInputVal[i]===parentElementText&&filterInputVal.splice(i,1);0==filterInputVal.length?filterInputHidden.value="":filterInputHidden.value=JSON.stringify(filterInputVal)}$(function(){$(document).on("click tap",".tyo-loggedin-track-button",function(){$(this).closest(".tyo-direct-order-sku-wrapper").find(".tyo_timeline_warp").length>0&&($(this).closest(".tyo-direct-order-sku-wrapper").find(".tyo_timeline_warp").slideDown(),$(this).hide(),$(this).siblings(".tyo-loggedin-close-button").show())}),$(document).on("click tap",".tyo-loggedin-close-button",function(){var self=$(this);$(this).closest(".tyo-direct-order-sku-wrapper").find(".tyo_timeline_warp").slideUp(function(){self.hide(),self.siblings(".tyo-loggedin-track-button").show()})}),$(".writeus-tabs li a").click(function(){var tab_id=$(this).attr("data-tab");$(".writeus-tabs li a").removeClass("current-tab"),$(".writeus-tabs-content").removeClass("current-tab"),$(this).addClass("current-tab"),$("#"+tab_id).addClass("current-tab")}),$("[data-pid=1]").click()}),$(document).on("mouseenter",".bottom_timeline_content a",function(){$(".tyo_strip_"+$(this).attr("data-tip")).show(),mousePosition($(this),".tyo_strip_"+$(this).attr("data-tip"))}),$(document).on("mouseleave",".bottom_timeline_content a",function(){$(".tyo_strip_"+$(this).attr("data-tip")).hide()}),$(function(){function verifyComment(frmId){var commentIp=$("#"+frmId).find(".comments");""===commentIp.val()?commentIp.parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"):commentIp.parent("div").removeClass("frm-error-wrap").addClass("frm-success-wrap")}function verifyFirstname(frmId){var fnameIp=$("#"+frmId).find(".fname-ip");""===fnameIp.val()?fnameIp.parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"):fnameIp.parent("div").removeClass("frm-error-wrap").addClass("frm-success-wrap")}function verifyEmailId(frmId){var emailIp=$("#"+frmId).find(".email-ip");!1===IsEmail(emailIp.val())?emailIp.parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"):emailIp.parent("div").removeClass("frm-error-wrap").addClass("frm-success-wrap")}function verifyMobileNo(frmId){var mobileIp=$("#"+frmId).find(".mobile-ip"),mobileIpVal=mobileIp.val();""===mobileIpVal?mobileIp.parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"):mobileIpVal.length<10?mobileIp.parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"):mobileIpVal.length>10?mobileIp.parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"):isNaN(mobileIpVal)?mobileIp.parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"):mobileIp.parent("div").removeClass("frm-error-wrap").addClass("frm-success-wrap")}function verifyOrderNo(frmId){var mobileIp=$("#"+frmId).find(".orderid-ip"),mobileIpVal=mobileIp.val();""===mobileIpVal?mobileIp.parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"):mobileIpVal.length<9?mobileIp.parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"):isNaN(mobileIpVal)?mobileIp.parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"):mobileIp.parent("div").removeClass("frm-error-wrap").addClass("frm-success-wrap")}function verifyErLoginEmail(){!1===IsEmail($(".ck-login-frm-wrap .log-email").val())?($(".ck-login-frm-wrap .log-email").parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"),eremailFlag=0):($(".ck-login-frm-wrap .log-email").parent("div").removeClass("frm-error-wrap").addClass("frm-success-wrap"),eremailFlag=1)}function verifyErLoginPwd(){""===$(".ck-login-frm-wrap .log-pwd").val()?($(".ck-login-frm-wrap .log-pwd").parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"),erpwdFlag=0):$(".ck-login-frm-wrap .log-pwd").val().length<6?($(".ck-login-frm-wrap .log-pwd").parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"),erpwdFlag=0):($(".ck-login-frm-wrap .log-pwd").parent("div").removeClass("frm-error-wrap").addClass("frm-success-wrap"),erpwdFlag=1)}function verifyResetEmail(){!1===IsEmail($(".ck-login-forgot-initial-wrap .log-email").val())?($(".ck-login-forgot-initial-wrap .log-email").parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"),$(".ck-forgot-email-sub-text").hide()):($(".ck-login-forgot-initial-wrap .log-email").parent("div").removeClass("frm-error-wrap").addClass("frm-success-wrap"),$(".ck-login-frm-wrap,.ck-login-forgot-wrap").hide(),$(".ck-login-forgot-reseted-wrap,.ck-forgot-email-sub-text").show(),$("#forgotemailid").html($("#emailid_forgot").val()))}function allInputReset(){$(".ck-login-guest-modal input[type=text],.ck-login-guest-modal input[type=password],.ck-login-reg-wrap input[type=text],.ck-login-reg-wrap input[type=radio],.ck-login-reg-wrap input[type=number],.ck-login-reg-wrap input[type=password]").val(""),$(".ck-login-guest-modal input").parent("div").removeClass("frm-error-wrap"),$(".ck-login-guest-modal input").parent("div").removeClass("frm-success-wrap")}function mousePosition(el){var elOffsetLeft=el.offset().left,elOffsetTop=el.offset().top,elWidth=el.outerWidth(!0),elHeight=el.outerHeight(!0),elHalfWidth=elWidth/2,wrapperDiv=$(".st-nh-tyo-wrap"),tooltipDiv=$("#track-order-tooltip");tooltipDiv.outerWidth(!0),tooltipDiv.offset().top,tooltipDiv.outerHeight(!0),wrapperDiv.offset().top,wrapperDiv.outerHeight(!0);el.hasClass("first")?$(".tyo_hover_details").css("marginLeft",-49):el.hasClass("last")?$(".tyo_hover_details").css("marginLeft",-288):$(".tyo_hover_details").css("marginLeft",-165),$("#track-order-tooltip").offset({left:elOffsetLeft+elHalfWidth,top:elOffsetTop+elHeight})}$(".st-nh-search-ip").on("keypress change keyup",function(){$(this).val().length>=3?$(this).parents(".st-nh-sr-ip-wrap").find(".st-nh-sr-sug-wrap").slideDown(300):0===$(this).val().length&&$(this).parents(".st-nh-sr-ip-wrap").find(".st-nh-sr-sug-wrap").slideUp(300)}),$(".st-nh-search-ip").on("focusout",function(){0===$(this).val().length&&$(this).parents(".st-nh-sr-ip-wrap").find(".st-nh-sr-sug-wrap").slideUp(300)}),$(".st-faq-sec-name-listitem").on("click",function(){var sectab_id=$(this).attr("data-tab");$(".st-faq-sec-name-listitem").removeClass("current-tab"),$(".st-faq-sec-content-int-wrap").removeClass("current-tab"),$(this).addClass("current-tab"),$("#"+sectab_id).addClass("current-tab")}),$(".wtu-tabs-row .wtu-tab").on("click",function(){var wtutab_id=$(this).attr("data-tab");$(".wtu-tabs-row .wtu-tab").removeClass("current-tab"),$(".wtu-tab-content-row .wtu-tab-int-content").removeClass("current-tab"),$(this).addClass("current-tab"),$("#"+wtutab_id).addClass("current-tab"),$(".wtu-frm-row input[type=text],.wtu-frm-row input[type=number],.wtu-frm-row textarea").val(""),$(".wtu-thank-wrap").hide(),$("#"+wtutab_id+"  .wtu-from-wrap").show(),$("#"+wtutab_id+"Frm").find("input,select,textarea,file,select2").each(function(){$(this).parent("div").removeClass("frm-error-wrap").removeClass("frm-success-wrap")}),$(".wtuUnResolvedComplaintFrm_orderid").css("display","none"),$(".wtuUnResolvedIssueFrm_orderid").css("display","none"),$(".wtuUnResolvedIssueFrm_block").css("display","none"),grecaptcha.reset(widgetId1),grecaptcha.reset(widgetId2),grecaptcha.reset(widgetId3),$(".error-msg,.pf-text-red,.error-text").css("display","none")}),$(".wtu-file-uploaded-wrap .wtu-file-uloaded-rmv").on("click",function(){var wtuUpFileLen=$(".wtu-file-uploaded-wrap").children(".wtu-file-uloaded-row").length;wtuUpFileLen>1?($(this).closest(".wtu-file-uloaded-row").siblings(".wtu-file-addmore-row").slideDown(200),$(this).parent(".wtu-file-uloaded-row").remove()):1===wtuUpFileLen&&($(this).closest(".wtu-file-uloaded-row").siblings(".wtu-file-addmore-row").hide(),$(this).parents(".wtu-upload-row").find(".wtu-file-upload-wrap").show(),$(this).parent(".wtu-file-uloaded-row").remove())}),$(document).on("click",".st-nh-results-list-item-q",function(){$(this).hasClass("active")?($(this).removeClass("active"),$(this).parents(".st-nh-results-list").find(".st-nh-results-list-item-a").slideUp(300)):($(this).parents(".st-nh-results-list").find(".st-nh-results-list-item-q").removeClass("active"),$(this).parents(".st-nh-results-list").find(".st-nh-results-list-item-a").slideUp(200),$(this).addClass("active"),$(this).siblings(".st-nh-results-list-item-a").slideDown(300))}),$(".wtu-frm-row .fname-ip").on("focusout",function(){verifyFirstname($(this).closest("form").attr("id"))}),$(".wtu-frm-row .email-ip").on("focusout",function(){verifyEmailId($(this).closest("form").attr("id"))}),$(".wtu-frm-row .mobile-ip").on("focusout",function(){verifyMobileNo($(this).closest("form").attr("id"))}),$(".wtu-frm-row .orderid-ip").on("focusout",function(){$(this).closest("form").attr("id")}),$(".wtu-frm-row .comments").on("focusout",function(){verifyComment($(this).closest("form").attr("id"))}),$("#wtuNewComplaintFrm .wtu-submit-btn").on("click",function(){}),$("#wtuUnResolvedComplaint .wtu-submit-btn,#wtuUnResolvedIssue  .wtu-submit-btn").on("click",function(){verifyOrderNo($(this).closest("form").attr("id"))}),$(".ck-login-frm-wrap .log-email").on("focusout",function(){verifyErLoginEmail()}),$(".ck-login-frm-wrap .log-pwd").on("keypress change keyup focus",function(){verifyErLoginPwd()}),$("#retrive-pwd-btn").on("click",function(){verifyResetEmail()}),$(".ck-login-m-forgot-link,.ck-pwd-reset-send-again").on("click",function(){$(".ck-login-frm-wrap,.ck-login-forgot-reseted-wrap").hide(),$(".ck-login-forgot-wrap").css("display","block")}),$(".ck-login-m-login-link").on("click",function(){$(".ck-login-forgot-reseted-wrap,.ck-login-forgot-wrap,.ck-login-reg-wrap").hide(),$(".ck-login-guest-modal,.ck-login-frm-wrap").show(),allInputReset()}),$("body").on("click",".st-nh-pro-tyo-btn",function(){$(this).parents(".tyo-mul-sku-dtl-row").find(".tyo-track-dtl-row").slideDown(300),$(this).hide(),$(this).siblings(".st-nh-pro-tyo-close-btn").css("display","block")}),$("body").on("click",".st-nh-pro-tyo-close-btn",function(){$(this).parents(".tyo-mul-sku-dtl-row").find(".tyo-track-dtl-row").parent(".time-container").css("display","none"),$(this).parents(".tyo-mul-sku-dtl-row").find(".tyo-track-dtl-row").slideUp(200),$(this).hide(),$(this).siblings(".st-nh-pro-tyo-btn").show()}),$(function(){$(".bottom_timeline_content a").each(function(){var $obj=$(this);$(this).on("mouseenter",function(){$("#track-order-tooltip").show(),mousePosition($obj)}).mouseleave(function(){$("#track-order-tooltip").hide()})})})}),$(document).ready(function(){$("#franCity").select2({placeholder:"Select City"}),$("#city").select2({placeholder:"Select City"}),$(".wtu-reason-sel").length>0&&$(".wtu-reason-sel").select2(),$(".st-er2-orders-list-row:first-child .st-nh-pro-tyo-btn").length>0&&$(".st-er2-orders-list-row:first-child .st-nh-pro-tyo-btn").trigger("click")});var filterInput=document.getElementById("furniture-filter-input"),filterInputHidden=document.getElementById("furniture-filter-input-val"),filterInputVal=[];filterHolder=document.getElementById("furex-filter-holder"),filterResult=document.getElementById("furex-filter-result"),furApply=document.getElementById("furApply"),furDiscard=document.getElementById("furDiscard"),filterLiList=filterHolder.querySelectorAll("li"),filterInput.addEventListener("click",showHidefilter),filterInput.addEventListener("keyup",searchFilter),furApply.addEventListener("click",applyFurnitureFilter),furDiscard.addEventListener("click",resetFurnitureFilter);var PF=PF||{};void 0===PF.UTILITIES&&function(){window.root_url="undefined"==typeof root_url?"http://"+window.location.hostname:root_url,window.secure_url="undefined"==typeof secure_url?"https://"+window.location.hostname:secure_url;var _node=document.createElement("script");_node.type="text/javascript",_node.src=("http:"===window.location.protocol?root_url:secure_url)+"/js/utilities.js",document.getElementsByTagName("head")[0].appendChild(_node)}(),void 0===PF.MYACCOUNT&&(!function(z,$){var utils=z.UTILITIES,o={d:$(document),w:$(window),processError:"An error has occurred. Please refresh the page and try again.",formErrorHtml:'<div class="error-text">{{ERROR}}</div>',lastEnteredPin:"",formErrorMsg:{file_error:{file:"Please select a file",file_extension:"Please select a valid file",file_size:"Max 5Mb allowed!",file_noselect_flag:!0,file_size_error:!0}},dashboard:{click:{".tab-inner-content a.track-item-link":["PF.MYACCOUNT.trackOrder","#page"],".return-order-submit":["PF.MYACCOUNT.submitReturnFrom","#page"],".add-more-file":["PF.MYACCOUNT.callUploadFile","#page"],".remove-file":["PF.MYACCOUNT.removeUploadedFile","#page"],"return-popup-show":["PF.MYACCOUNT.resetReturnItemPopup","#page"],".fdbck-wrprmyacc.ratable .feedback-rate input,.myacc-fdbcksbmt-btn":"PF.MYACCOUNT.save_rating",".myacc-fdbcksbmt-btnwrpr .myacc-fdbckskip-btn":"PF.MYACCOUNT.slideHtml"},change:{".rpImage":["PF.MYACCOUNT.uploadFileOnSelect","#page"]},mouseenter:{".myacnt-shrfdbck-container":"PF.MYACCOUNT.openRatingHtml"},mouseleave:{".myacnt-shrfdbck-container":"PF.MYACCOUNT.closeRatingHtml"}},orders:{click:{".tab-inner-content a.track-item-link":["PF.MYACCOUNT.trackOrder","#page"],".return-order-submit":["PF.MYACCOUNT.submitReturnFrom","#page"],".remove-file":["PF.MYACCOUNT.removeUploadedFile","#page"],".add-more-file":["PF.MYACCOUNT.callUploadFile","#page"],"return-popup-show":["PF.MYACCOUNT.resetReturnItemPopup","#page"],"#clear_order_search_box":"PF.MYACCOUNT.myOrdersClearSearchBox",".fdbck-wrprmyacc.ratable .feedback-rate input,.myacc-fdbcksbmt-btn":"PF.MYACCOUNT.save_rating",".myacc-fdbcksbmt-btnwrpr .myacc-fdbckskip-btn":"PF.MYACCOUNT.slideHtml"},change:{"#maOrderselect2":["PF.MYACCOUNT.myOrdersMonthFilter","#page"],".rpImage":["PF.MYACCOUNT.uploadFileOnSelect","#page"]},keyup:{"#order_no":["PF.MYACCOUNT.myOrdersSearchByOrderNo","#page"]},mouseenter:{".myacnt-shrfdbck-container":"PF.MYACCOUNT.openRatingHtml"},mouseleave:{".myacnt-shrfdbck-container":"PF.MYACCOUNT.closeRatingHtml"}},wishlist:{click:{"#wishlistTab a.remove-wishlist-item":["PF.MYACCOUNT.removeFromWishlist","#page"],"#wishlistTab #popup_login_form":["PF.MYACCOUNT.submitWishlistComment","#page"]}},account:{click:{".my-profile-container .editBtn":["PF.MYACCOUNT.editInputBoxes","#page"],"#save-basic-profile":["PF.MYACCOUNT.updateProfile","#page"],"#saveChangePassword":["PF.MYACCOUNT.updatePassword","#page"]},change:{"input[name='gender']":["PF.MYACCOUNT.verifyGender","#page"]}},addressBook:{click:{"#maEnterYourNewAdd #saveAddress":["PF.MYACCOUNT.saveAddress","#page"],".address_delete":["PF.MYACCOUNT.deleteAddress","#page"],".address_edit,.add-new-address":["PF.MYACCOUNT.editAddressModal","#page"]},change:{"#maEnterYourNewAdd .ck-state-select":["PF.MYACCOUNT.verifyState","#page"],"#maEnterYourNewAdd .ck-country-select":["PF.MYACCOUNT.verifyCountry","#page"],".ma-address-tab input.radio_select":["PF.MYACCOUNT.setDefaultAddress","#page"]},submit:{},keyup:{"#postcode":["PF.MYACCOUNT.pinAutoComplete","#page"]}},returnItem:{click:{".return-order-submit":["PF.MYACCOUNT.submitReturnFrom","#page"],".remove-file":["PF.MYACCOUNT.removeUploadedFile","#page"],".add-more-file":["PF.MYACCOUNT.callUploadFile","#page"],"return-popup-show":["PF.MYACCOUNT.resetReturnItemPopup","#page"],".view-more-return-orders":["PF.MYACCOUNT.loadOrders","#page"]},change:{".rpImage":["PF.MYACCOUNT.uploadFileOnSelect","#page"]}},returnItemLogin:{click:{}},dedicatedNotification:{click:{".feedback-rate input":["PF.MYACCOUNT.chooseRating","#page"]},change:{".rating-reason":["PF.MYACCOUNT.changeFeedbackReason","#page"]}},init:function(){if(o.oneTimeLoad=!0,o.addressBookLoad=!1,o.maxFilesToUpload=3,$(".rating-reason").length>0&&$(".rating-reason").select2({minimumResultsForSearch:1/0}),$("#maOrderselect2").select2({minimumResultsForSearch:-1}),$("#maInitiateReturnselect2").select2({minimumResultsForSearch:-1}),$("#selectCountry").select2(),$("#selectState").select2(),$("#selectCountry2").select2(),$("#selectState2").select2(),-1!==window.location.pathname.indexOf("customer/dashboard"))utils.listen(o.dashboard);else if(-1!==window.location.pathname.indexOf("customer/myorders")){utils.listen(o.orders);var currentPeriod=parseInt(utils.getParameterByName("period"));isNaN(currentPeriod)||$("#viewOrderTab div.month-filter-wrap select option").filter(function(){return parseInt($(this).val())===currentPeriod}).prop("selected",!0)}else-1!==window.location.pathname.indexOf("customer/wishlist")?utils.listen(o.wishlist):-1!==window.location.pathname.indexOf("customer/account")?utils.listen(o.account):-1!==window.location.pathname.indexOf("customer/address_book")?utils.listen(o.addressBook):-1!==window.location.pathname.indexOf("customer/returnitem")?utils.listen(o.returnItem):-1!==window.location.pathname.indexOf("customer/initiatereturnlogin")?utils.listen(o.returnItemLogin):-1!==window.location.pathname.indexOf("customer/dedicatedNotification")&&utils.listen(o.dedicatedNotification);XMLHttpRequest.prototype.sendAsBinary||(XMLHttpRequest.prototype.sendAsBinary=function(datastr){var ords=Array.prototype.map.call(datastr,function(x){return 255&x.charCodeAt(0)}),ui8a=new Uint8Array(ords);try{this.send(ui8a)}catch(e){this.send(ui8a.buffer)}})},pinAutoComplete:function(){var pin=parseInt($(this).val());if(6===pin.toString().length&&pin>0&&o.lastEnteredPin!==pin){o.lastEnteredPin=pin;var country=$("#selectCountry").val(),_url=secure_url+"/config_pincode/getpindata";"IN"===country&&utils.makeRequest(_url,"POST",{pincode:pin},o.pinAutoCompleteResponse,PF.ERROR.raiseError,"",{},{dataType:"json"})}},pinAutoCompleteResponse:function(d){d?(void 0!==(d=$.parseJSON(d)).city&&d.city.length>1?$("#city").val(d.city).parent().addClass("input-filled"):$("#city").val("").parent().removeClass("input-filled"),void 0!==d.state&&d.state.length>1&&$('#selectState option[value="'+d.state+'"]').length>0?$("#selectState").val(d.state).select2().removeClass("disabled"):$("#selectState").select2("val",$("#region option:first").val())):($("#form-area .ui-autocomplete,#form-area .ui-helper-hidden-accessible").remove(),$("#city").val("").removeClass("input-filled"),$("#selectState").val("").select2().removeClass("disabled"))},verifyState:function(){var frmId=$(".ck-state-select").closest("form").attr("id");if(!0===o.addressBookLoad)return!0;if("block"==$(".ck-state-select").parent("div").css("display"))""===(stateIpVal=(stateIp=$("#"+frmId).find(".ck-state-select")).val())?stateIp.addClass("error-inpt").parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"):stateIp.removeClass("error-inpt").parent("div").removeClass("frm-error-wrap").addClass("frm-success-wrap");else{var stateIp=$("#"+frmId).find(".ck-state-input"),stateIpVal=stateIp.val();""===stateIpVal?stateIp.parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"):stateIp.parent("div").removeClass("frm-error-wrap").addClass("frm-success-wrap")}},saveAddress:function(){var $this=$("#maEnterYourNewAdd"),error=!1,country=(parseInt($("#maEnterYourNewAdd #postcode").val()),$("#maEnterYourNewAdd #city").val().trim(),$("#maEnterYourNewAdd #selectCountry").val().trim()),state="";if(state="block"==$(".ck-state-select").parent("div").css("display")?$.trim($(".ck-state-select").val()):$.trim($(".ck-state-input").val()),"IN"===country||""===country){var pincodeval=$("#postcode").val().trim(),pincodelen=pincodeval.length;$("#postcode").parent("div").removeClass("frm-error-wrap").removeClass("frm-success-wrap"),""==pincodeval?($("#postcode").parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"),error=!0):6!=pincodelen?($("#postcode").parent("div").removeClass("frm-success-wrap1").addClass("frm-error-wrap"),error=!0):isNaN(pincodeval)?($("#postcode").parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"),error=!0):$("#postcode").parent("div").removeClass("frm-error-wrap").addClass("frm-success-wrap")}0==error&&(error=PF.HEADER.validateForm("","maEnterYourNewAdd"));var alphaOnly=/^[A-Za-z ]+$/;if(0!=error||""!==state&&state.match(alphaOnly)?"block"==$(".form-select").parent("div").css("display")?$(".ck-state-input").parent("div").removeClass("frm-error-wrap").removeClass("frm-success-wrap"):$(".form-state-select").parent("div").removeClass("frm-error-wrap").removeClass("frm-success-wrap"):("block"==$(".form-select").css("display")?$(".ck-state-input").parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"):$(".form-state-select").parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"),error=!0),!error){var _url=secure_url+"/address/addEditAddress/",_data=$this.serialize();$.ajax({url:_url,data:_data,type:"POST",beforeSend:function(){$("#saveAddress").attr("disabled","disabled").addClass("btn_loader")},success:function(response){if('"invalid"'==response)alert(o.processError);else{var _path=secure_url+"/customer/address_book";window.location=_path}},error:function(){alert("Some error occured")},complete:function(msg){$("#saveAddress").removeAttr("disabled").removeClass("btn_loader")}})}return!1},verifyCountry:function(){var frmId=$(".ck-country-select").closest("form").attr("id"),countryIp=$("#"+frmId).find(".ck-country-select"),countryIpVal=countryIp.val();$("#"+frmId).find(".ck-state-input").val(""),$("#"+frmId).find(".ck-state-select").val("").change(),"IN"!=countryIpVal?($(".ck-state-input").parent("div").css("display","block"),$(".ck-state-select").parent("div").css("display","none").attr("disabled"),$(".ck-state-input").removeAttr("disabled"),$(".ck-state-select").attr("disabled","true")):($(".ck-state-input").parent("div").css("display","none").attr("disabled"),$(".ck-state-select").parent("div").css("display","block").removeAttr("disabled"),$(".ck-state-input").attr("disabled","true"),$(".ck-state-select").removeAttr("disabled")),""===countryIpVal?countryIp.addClass("error-inpt").parent("div").addClass("frm-error-wrap").removeClass("frm-success-wrap"):countryIp.removeClass("error-inpt").parent("div").removeClass("frm-error-wrap").addClass("frm-success-wrap")},setDefaultAddress:function(e){$("input[name=address_select]").prop("checked",!1);var _url=secure_url+"/address/makeDefault/"+this.value;utils.makeRequest(_url,"GET",{},function(d,e){$("#addressBook_"+e.id).prop("checked",!0)},PF.ERROR.raiseError,"",{id:this.value})},deleteAddress:function(e){if(confirm("Do you want to delete this address?")){var id=$(this).attr("value"),_url=secure_url+"/address/deleteAddress";utils.makeRequest(_url,"POST",{address_id:id},function(d,e){$("#address-"+e.id).remove(),$("label.ship-address-main").each(function(i){var j=i+1;$(this).find("div:first").html("Address "+j)});var addressCnt=$(".ship-address-row").size();0===addressCnt&&$("#editAddressBlock").addClass("no-address"),addressCnt<10&&$("#editAddressBlock").show()},PF.ERROR.raiseError,"",{id:id})}},editAddressModal:function(e){var _modal=$(this).attr("modal-val");$(this).attr("data-modal",_modal),$("#my-addr-book-newaddr-popup").attr("data-modalname",_modal).find(".pf-semi-bold-text").html("Edit Address");var id=$(this).attr("data-id");$("#update_id").val(id),$("#maEnterYourNewAdd #name").val($.trim($("#fname-"+id).val())),$("#maEnterYourNewAdd #name2").val($.trim($("#lname-"+id).val())),$("#maEnterYourNewAdd #mobile").val($.trim($("#mobile-"+id).val())),$("#maEnterYourNewAdd #street").val($.trim($("#street-"+id).val())),$("#maEnterYourNewAdd #area").val($.trim($("#street1-"+id).val())),$("#maEnterYourNewAdd #landmark").val($.trim($("#landmark-"+id).val())),$("#maEnterYourNewAdd #city").val($.trim($("#city-"+id).val()));var state=$.trim($("#state-"+id).val())?$.trim($("#state-"+id).val()):"",countryName=""!=$("#countryid-"+id).val()&&"IN"!=$("#countryid-"+id).val()?$("#countryid-"+id).val():"IN";!1===$(this).hasClass("address_edit")&&($("#my-addr-book-newaddr-popup").find("h5").html("Enter a New Address"),o.addressBookLoad=!0,$("#selectCountry").val("IN").change()),$(this).hasClass("address_edit")&&$("#selectCountry").val(countryName).change(),$("#form-contry").removeClass("frm-error-wrap").removeClass("frm-success-wrap"),o.addressBookLoad=!1,"IN"===$.trim($("#countryid-"+id).val())||""===$.trim($("#countryid-"+id).val())?($("#form-state-select").css("display","block"),$("#form-state").css("display","none"),"add-address"!=_modal&&($("#maEnterYourNewAdd #selectState").val(state).change(),$("#form-state-select").removeClass("frm-error-wrap").removeClass("frm-success-wrap")),$("#selectState").removeAttr("disabled"),$("#state_input").val(state).attr("disabled","disabled")):("add-address"!=_modal&&$("#form-state").removeClass("frm-error-wrap").removeClass("frm-success-wrap"),$("#selectState").attr("disabled","disabled"),$("#state_input").val(state).removeAttr("disabled"),$("#form-state-select").css("display","none"),$("#form-state").css("display","block")),$("#maEnterYourNewAdd #postcode").val($.trim($("#postcode-"+id).val())),$("#maEnterYourNewAdd #country").val($.trim($("#countryid-"+id).val())).select2(),$("#popup_overlay").fadeIn(function(){$("[data-modalname="+_modal+"]").fadeIn(),$("body").addClass("active")}),$(document).on("click",".popup-close,.popup_overlay",function(e){$("[data-modalname="+_modal+"]").fadeOut(function(){$("#my-addr-book-newaddr-popup").attr("data-modalname","add-address").find("h5").html("Enter a New Address"),$("#popup_overlay").fadeOut(),$("body").removeClass("active")}),e.preventDefault()}),$(document).keyup(function(e){27===e.keyCode&&$("[data-modalname="+_modal+"]").fadeOut(function(){$("#my-addr-book-newaddr-popup").attr("data-modalname","add-address").find("h5").html("Enter a New Address"),$("#popup_overlay").fadeOut(),$("body").removeClass("active")})})},editInputBoxes:function(e){$(this).hide().siblings(".inpt").focus().removeClass("disabled"),$(this).parents(".edit-info-sec").find(".pf-btn").removeClass("disabled").addClass("pf-hover-primary-color")},updateProfile:function(e){!1===PF.HEADER.validateForm("","maEditAddress")&&$("#maEditAddress").submit()},verifyGender:function(){$("#save-basic-profile").removeClass("disabled").addClass("pf-hover-primary-color")},updatePassword:function(e){$("#maresetPass");PF.HEADER.validateForm("","maresetPass")||$("#maresetPass").submit()},removeFromWishlist:function(){var id=$(this).attr("data-id"),type=$(this).attr("data-type");if(!1===confirm("Do you want to remove this item from wishlist ?"))return!1;"bundle"==type?utils.removeFromWishlist(id,o.removeFromWishlistHandler,"",1):"look"==type?utils.removeFromWishlist(id,o.removeFromWishlistHandler,"",void 0,1):utils.removeFromWishlist(id,o.removeFromWishlistHandler)},removeFromWishlistHandler:function(d){d=parseInt(d),isNaN(d)||1!==d?alert(o.processError):window.location.reload()},submitWishlistComment:function(e){var id=$(this).closest("form").attr("data-id"),type=$(this).closest("form").attr("data-type"),$textarea=$("#wishlist_form-"+id).find("textarea"),formId="wishlist_form-"+id,validation=PF.HEADER.validateForm("",formId),comments=$.trim(o.escapeHtml($textarea.val()));if(!validation){if($textarea.html(comments),"bundle"==type)_url=secure_url+"/site_wardrobe/addComments";else if("look"==type)_url=secure_url+"/look/addComments";else var _url=secure_url+"/customer_wishlist/addComments";utils.makeRequest(_url,"POST",{comments:comments,item_id:id},o.submitWishlistCommentSuccess,PF.ERROR.raiseError,"",{id:id,comments:comments})}return!1},myOrdersSearchByOrderNo:function(){var $this=$(this),val=$.trim($this.val());isNaN(val)?$this.val(""):$this.parent().find("#clear_order_search_box").css("visibility",function(){return""!==val?$("#maSrchBtn").css("visibility","hidden"):$("#maSrchBtn").css("visibility","visible"),""!==val?"visible":"hidden"})},myOrdersMonthFilter:function(){var period=this.options[this.selectedIndex].value;window.location=isNaN(period)||0===period?secure_url+"/customer/myorders":secure_url+"/customer/myorders?period="+period},trackOrder:function(){var $this=$(this);if("disabled"!==$this.attr("disabled")){$this.attr("disabled","disabled");var id=$this.attr("data-id"),pid=$this.attr("data-pid"),_url=secure_url+"/customer_trackOrder/trackItem/"+id+"/"+pid+"/myorders";$(".tyo_popup_box").remove();var _container=$("#viewOrderTab").length>0?"#viewOrderTab":"#accountDashboardTab";utils.makeRequest(_url,"GET",{},function(d,e){$(".tyo_popup_box").remove(),$("#deliveryStatus").html(d),$this.removeAttr("disabled")},PF.ERROR.raiseError,function(){},{id:id,container:_container})}},submitReturnFrom:function(e){var currentItemId=$(this).attr("itemid");e.preventDefault();var is_valid=!0,$this=$(this),page_type=$this.attr("form-type"),reason=$("#reason_select_"+$this.attr("itemid")).val();$("#ws_comments_"+$this.attr("itemid")).val();currentItemId=$("#return-item-form-"+currentItemId+" .currentItemId").val();var fileSize=0,file="",file_extension="";if($(".file-uploaded-wrap .uploade-img-list").length>0&&(file_extension=(file=$(".file-uploaded-wrap .uploade-img-list:first").find("p").text()).split(".").pop().toLowerCase(),fileSize=parseInt($(".file-uploaded-wrap .uploade-img-list:first").attr("fsize"))),$("#return-item-form-"+currentItemId+" .invalid_file2").css({display:"none",color:"#969696"}),$("#return-item-form-"+currentItemId+" #invalid_file").html("Choose File .jpg, .jpeg, .png, .bmp Only. Max Size 5 Mb").css({color:"#969696"}),$this.find("#return-item-form-"+currentItemId+" .error-msg").css("display","none"),""==reason?($("#reason-wrap-"+$this.attr("itemid")).find(".error-msg").css("display","block"),is_valid=!1):$("#reason-wrap-"+$this.attr("itemid")).find(".error-msg").css("display","none"),""===file&&!0===is_valid&&"Incomplete items or contents missing"!=reason?($("#return-item-form-"+currentItemId+" .invalid_file2").css({display:"block",color:"#d0021b"}),is_valid=!1):$("#return-item-form-"+currentItemId+" .invalid_file2").css({display:"none",color:"#969696"}),""===file_extension&&!0===is_valid&&"Incomplete items or contents missing"!=reason?($("#return-item-form-"+currentItemId+" #invalid_file").css("color","#d0021b"),is_valid=!1):-1===$.inArray(file_extension,["doc","docx","jpg","jpeg","bmp","png"])&&!0===is_valid&&"Incomplete items or contents missing"!=reason?($("#return-item-form-"+currentItemId+" #invalid_file").css("color","#d0021b"),is_valid=!1):$("#return-item-form-"+currentItemId+" #invalid_file").css("color","#969696"),!0===is_valid&&(0==fileSize||fileSize>5247880)&&"Incomplete items or contents missing"!=reason?($("#return-item-form-"+currentItemId+" #invalid_file").css("color","#d0021b"),is_valid=!1):$("#return-item-form-"+currentItemId+" #invalid_file").css("color","#969696"),is_valid&&(is_valid=!PF.HEADER.validateForm("","return-item-form-"+currentItemId)),is_valid){$this.attr("disabled","disabled").addClass("btn-blue btn-loader");var formData=$("#return-item-form-"+$this.attr("itemid")).serialize();o.callBack(formData,$this,page_type)}},callBack:function(formData,t,page_type){var $this=t,_url=secure_url+"/customer/return_request",_ajaxSetUpOptions={processData:!1,cache:!1};utils.makeRequest(_url,"POST",formData,function(d){var return_data=$.parseJSON(d);if(1==return_data.status)1==page_type?($("#returnItemModal-"+$this.attr("itemid")).removeAttr("data-modal").attr("href","javascript:void(0);").css("cursor","default").addClass("disabled-tt").text("Return Initiated").attr("data-tooltip","Return Already initiated"),$(".popup-close").click(),$this.removeAttr("disabled").removeClass("btn-blue btn-loader")):($("#return-reason-form-"+$this.attr("itemid")).hide(),$("#return-form-success-message-"+$this.attr("itemid")).show());else{if($this.removeAttr("disabled").removeClass("btn-blue btn-loader"),2==return_data.status){$("div.error-text").remove();var errorHtml,file_warp=$("#file-wrap-"+$this.attr("itemid"));errorHtml="Upload error!!, Please select a file again"===return_data.error.upload_error?o.formErrorHtml.replace("{{ERROR}}",return_data.error.upload_error):o.formErrorHtml.replace("{{ERROR}}",return_data.error.invalid_size),file_warp.addClass("input-error").append(errorHtml),file_warp.find("div.error-text").show()}-1==return_data.status&&alert(return_data.message)}},PF.ERROR.raiseError,"",{},_ajaxSetUpOptions)},loadOrders:function(e){e.preventDefault();var current_element=$(this),current_page=parseInt(current_element.attr("page"))+1,_url=secure_url+"/customer/loadorders";utils.makeRequest(_url,"GET",{p:current_page},function(d,e){$(".view-more-return-orders").remove(),$("#return-orders-wrap-container").append(d),$("#return_item_load_btn").attr("page",current_page)},PF.ERROR.raiseError,"",{})},callUploadFile:function(){$(this).closest("form").find(".rpImage").trigger("click")},resetReturnItemPopup:function(){$(this).closest("form").trigger("trigger"),$(this).closest("file-uploaded-wrap").html("")},uploadFileOnSelect:function(){var currentItemId=$(this).closest("form").find(".return-order-submit").attr("itemId"),currentId=parseInt($("#return-item-form-"+currentItemId+" .file-uploaded-wrap .uploade-img-list").length)+1;currentId>0?$("#return-item-form-"+currentItemId+" .file-upload-wrap").hide():$("#return-item-form-"+currentItemId+" .file-upload-wrap").show();var type=$("#filesUpload-"+currentItemId)[0].files[0].name.split(".").pop().toLowerCase(),size=$("#filesUpload-"+currentItemId)[0].files[0].size;switch(type){case"doc":case"docx":case"jpg":case"jpeg":case"png":case"bmp":if(currentId>=o.maxFilesToUpload&&$("#return-item-form-"+currentItemId+" .add-more-file").hide(),!(size<=5247880))return 1==currentId&&$(".file-upload-wrap").show(),$("#return-item-form-"+currentItemId+" #invalid_file").html("Max 5Mb allowed!").css("color","#d0021b").show(),currentId>=o.maxFilesToUpload&&$("#return-item-form-"+currentItemId+" .add-more-file").hide(),!1;if($("#return-item-form-"+currentItemId+" #invalid_file").hide(),!(currentId<=o.maxFilesToUpload))return $("#return-item-form-"+currentItemId+" .add-more-file").hide(),$("#return-item-form-"+currentItemId+" #invalid_file").html("Max 5 files are allowed!").css("color","#d0021b"),currentId>=5&&$("#return-item-form-"+currentItemId+" .add-more-file").hide(),!1;o.getDataFeedback(type,currentId,currentItemId);break;default:$(".file-upload-wrap").show(),$("#return-item-form-"+currentItemId+" #invalid_file").css("color","#d0021b"),$("#return-item-form-"+currentItemId+" .return-order-submit").removeAttr("disabled"),$("#return-item-form-"+currentItemId+" .return-order-submit").removeClass("disabled"),$("#return-item-form-"+currentItemId+" .return-order-submit").val("Return Item");var file_warp=$("#return-item-form-"+currentItemId+" #file-wrap-"+currentItemId);$("div.error-text").remove();var errorHtml=o.formErrorHtml.replace("{{ERROR}}",o.formErrorMsg.file_error.file_extension);return file_warp.addClass("input-error").append(errorHtml),file_warp.find("div.error-text").show(),!1}},getDataFeedback:function(type,currentId,formId){var currentItemId=$("#return-item-form-"+formId+" .currentItemId").val();void 0===currentId&&(currentId="");var i=1,loaded=0,total=$("#filesUpload-"+currentItemId)[0].files[0].size,name=encodeURIComponent($("#return-item-form-"+currentItemId+" #filesUpload-"+currentItemId)[0].files[0].name),randName=Math.random().toString(36).substr(2,30),fileNameWA=name.split(".")[0];name=encodeURIComponent(fileNameWA+randName+"."+type);var resFlag=1,reader=(document.getElementById("feddback_rpImage_"+currentId),new FileReader);reader.onload=function(e){var xhr=new XMLHttpRequest,upload=xhr.upload;xhr.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var fileRes=xhr.responseText;if("invalid_file"===fileRes&&1===resFlag)return alert("Invalid image file!"),$("#invalid_size").html("Invalid image file!"),$("#feddback_rpImage_"+currentId).html("Choose File"),$("#return-item-form-"+formId+" .return-order-submit").removeClass("disabled"),$("#return-item-form-"+formId+" .return-order-submit").removeAttr("disabled"),$("#return-item-form-"+formId+" .return-order-submit").val("Return Item"),xhr.abort(),resFlag=0,void(loaded=100*total);if(5<i&&"image_size_exeeded"===fileRes&&1===resFlag)return alert("Image is too big! Please reduce the size of your photo using an image editor. Max 5 MB is allowed."),$("#invalid_file").html("Max 5Mb allowed!"),$("#feddback_rpImage_"+currentId).html("Choose File"),$("#return-item-form-"+formId+" .return-order-submit").removeClass("disabled"),$("#return-item-form-"+formId+" .return-order-submit").removeAttr("disabled"),$("#return-item-form-"+formId+" .return-order-submit").val("Return Item"),xhr.abort(),resFlag=0,void(loaded=100*total);if(loaded>=total){if($("#return-item-form-"+formId+" .return-order-submit").removeClass("disabled"),$("#return-item-form-"+formId+" .return-order-submit").removeAttr("disabled"),$("#return-item-form-"+formId+" .return-order-submit").val("Return Item"),resFlag){$("#return-item-form-"+currentItemId+" .rpImage").val("");var htmlStr="<div class='uploade-img-list' sr-no='"+(parseInt($("#return-item-form-"+currentItemId+" .file-uploaded-wrap .uploade-img-list").length)+1)+"' fsize='"+total+"'><p class='uploaded-img'>"+fileRes+"</p>  <a href='javascript:;' class='pf-text-brown remove-file font-12'>Remove</a> </div>";if(o.oneTimeLoad){$(".remove-file, .add-more-file").css({display:"inline-block","margin-top":"-1.5rem"});$("#return-item-form-"+currentItemId+" .file-uploaded-wrap").html(htmlStr);$(".remove-file").css({display:"inline-block","margin-top":"-1.5rem"}),o.oneTimeLoad=!1}else $("#return-item-form-"+currentItemId+" .file-uploaded-wrap .uploade-img-list").parent().append(htmlStr),$(".remove-file").css({display:"inline-block","margin-top":"-1.5rem"}),$("#return-item-form-"+currentItemId+" .uploade-img-list").length==o.maxFilesToUpload&&$("#return-item-form-"+currentItemId+".add-more-file").hide()}else $("#feddback_rpImage_"+currentId).html("Choose File");return xhr.abort(),resFlag=0,void(loaded=100*total)}}},upload.addEventListener("load",function(){var _p=(loaded+=1048576)/total*100;_p>100&&(_p=100),$("#return-item-form-"+currentItemId).find("input[type=submit]").addClass("btn-loader").attr("disabled","disabled"),loaded<=total?(blob=$("#filesUpload-"+currentItemId)[0].files[0].slice(loaded,loaded+1048576),reader.readAsBinaryString(blob,o.log)):(loaded=total,$("#return-item-form-"+currentItemId).find("input[type=submit]").removeClass("btn-loader").removeAttr("disabled"))},!1),resFlag&&(xhr.open("POST",root_url+"/customer/feedbackFileUpload?fileName="+name+"&fileType="+type+"&fileSize="+total+"&nocache="+(new Date).getTime()+"&totalRequest=5&currentId="+currentId+"&count="+i++),xhr.overrideMimeType("application/octet-stream"),xhr.sendAsBinary(e.target.result))};var blob=$("#filesUpload-"+currentItemId)[0].files[0].slice(0,1048576);reader.readAsBinaryString(blob,o.log)},removeUploadedFile:function(){var wrapLength=$(this).parent(".uploade-img-list").parent(".file-uploaded-wrap").find(".uploade-img-list").length;$(this).parents(".uploade-img-list").remove(),$(".rpImage").val(""),$(".rpImage").parent("div").find("label").text("Choose file"),1==wrapLength?(o.oneTimeLoad=!0,$(".file-upload-wrap").show(),$(".add-more-file").hide()):($(".file-upload-wraped").hide(),$(".add-more-file").show());var srno=$(this).parent("div.uploade-img-list").attr("sr-no");$.ajax({url:root_url+"/customer/delUploadedImage",data:{srno:srno},type:"POST",async:!0,success:function(data){}})},escapeHtml:function(unsafe){return unsafe.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},submitWishlistCommentSuccess:function(d,e){if(d=parseInt(d),isNaN(d)||1!==d)alert(o.processError);else{var commentsText=e.comments.length>50?e.comments.slice(0,50):e.comments,readmore=e.comments.length>50?"<a href='javascript:;' class='ma-comment-readmore' data-modal='wishlist_comment_popup_"+e.id+"'>Read More</a>":"";$("#comment_"+e.id).html(o.escapeHtml(commentsText)).append(readmore),$("#wishListCommentPopupClose").trigger("click")}},myOrdersClearSearchBox:function(){$(this).css("visibility","hidden"),$("#maSrchBtn").css("visibility","visible"),$("#order_no").val("").focus();var orderNo=parseInt(utils.getParameterByName("order_id"));isNaN(orderNo)||0===orderNo||(window.location=secure_url+"/customer/myorders")},chooseRating:function(){$(this).val()<="3"?($(this).parent(".feedback-rate").siblings(".Detail-Reason").show(),$(this).parent(".feedback-rate").siblings(".thank-for-reviewDetail").hide()):(saveRating($(this).closest("form").attr("id")),$(this).closest("form").find("input,select").attr("disabled","disabled"),$(this).parent(".feedback-rate").siblings(".Detail-Reason").hide(),$(this).parent(".feedback-rate").siblings(".thank-for-reviewDetail").show())},changeFeedbackReason:function(){$(this).parent().hide(".Detail-Reason"),$(this).parent(".Detail-Reason").siblings(".thank-for-reviewDetail").show(),$(this).val().trim().length>0&&(saveRating($(this).closest("form").attr("id")),$(this).closest("form").find("input,select").attr("disabled","disabled"))},openRatingHtml:function(){$(this).find(".myacnt-shrfdbck").addClass("strt-fdbckstp")},closeRatingHtml:function(){$(this).find(".myacnt-shrfdbck").removeClass("strt-fdbckstp")},slideHtml:function(){$(this).parents(".fdbck-wrprmyacc").addClass("slide"),$(this).parents(".fdbck-wrprmyacc").remove()},save_rating:function(){if(!$(this).hasClass("myacc-fdbcksbmt-btn")){var currentPositionDiv=$(this).closest(".myacc-fdbckcntnt"),feedbackScrnno=parseInt($(this).closest(".myacnt-shrfdbck").find(".fdbck-scrn-no").text());feedbackScrnno++,$(this).closest(".myacnt-shrfdbck").find(".fdbck-scrn-no").html(feedbackScrnno),$(currentPositionDiv).addClass("slide")}var $this=$(this),rating=$this.attr("value"),oId=$this.attr("order_id"),iId=$this.attr("item_id"),ratingType=$this.attr("rating_type");var comment="";if("comment"==ratingType){var feedbackBox=$("#feedback_text_"+oId+"_"+iId);""==(comment=feedbackBox.val().trim())?feedbackBox.next(".myacc-errmsg").addClass("show"):($(this).closest(".fdbck-wrprmyacc").addClass("slide"),$(this).closest(".fdbck-wrprmyacc").remove())}var _url=secure_url+"/customer/save_rating";utils.makeRequest(_url,"POST",{rating:rating,comment:o.escapeHtml(comment),order_id:oId,item_id:iId,rating_type:ratingType},function(d,e){"2"==$.parseJSON(d).status&&window.location.reload()},PF.ERROR.raiseError,"",{})}};z.MYACCOUNT=o}(PF,$),$(document).ready(function(){PF.MYACCOUNT.init()})),function($,window,document,undefined){"use strict";var old=$.fn.twbsPagination,TwbsPagination=function(element,options){if(this.$element=$(element),this.options=$.extend({},$.fn.twbsPagination.defaults,options),this.options.startPage<1||this.options.startPage>this.options.totalPages)throw new Error("Start page option is incorrect");if(this.options.totalPages=parseInt(this.options.totalPages),isNaN(this.options.totalPages))throw new Error("Total pages option is not correct!");if(this.options.visiblePages=parseInt(this.options.visiblePages),isNaN(this.options.visiblePages))throw new Error("Visible pages option is not correct!");if(this.options.totalPages<this.options.visiblePages&&(this.options.visiblePages=this.options.totalPages),this.options.onPageClick instanceof Function&&this.$element.first().on("page",this.options.onPageClick),this.options.href){var match,regexp=this.options.href.replace(/[-\/\\^$*+?.|[\]]/g,"\\$&");regexp=regexp.replace(this.options.pageVariable,"(\\d+)"),null!=(match=new RegExp(regexp,"i").exec(window.location.href))&&(this.options.startPage=parseInt(match[1],10))}var tagName="function"==typeof this.$element.prop?this.$element.prop("tagName"):this.$element.attr("tagName");return this.$listContainer="UL"===tagName?this.$element:$("<ul></ul>"),this.$listContainer.addClass(this.options.paginationClass),"UL"!==tagName&&this.$element.append(this.$listContainer),this.options.initiateStartPageClick?this.show(this.options.startPage):(this.render(this.getPages(this.options.startPage)),this.setupEvents()),this};TwbsPagination.prototype={constructor:TwbsPagination,destroy:function(){return this.$element.empty(),this.$element.removeData("twbs-pagination"),this.$element.off("page"),this},show:function(page){if(page<1||page>this.options.totalPages)throw new Error("Page is incorrect.");return this.render(this.getPages(page)),this.setupEvents(),this.$element.trigger("page",page),this},buildListItems:function(pages){var listItems=[];if(this.options.first&&listItems.push(this.buildItem("first",1)),this.options.prev){var prev=pages.currentPage>1?pages.currentPage-1:this.options.loop?this.options.totalPages:1;listItems.push(this.buildItem("prev",prev))}for(var i=0;i<pages.numeric.length;i++)listItems.push(this.buildItem("page",pages.numeric[i]));if(this.options.next){var next=pages.currentPage<this.options.totalPages?pages.currentPage+1:this.options.loop?1:this.options.totalPages;listItems.push(this.buildItem("next",next))}return this.options.last&&listItems.push(this.buildItem("last",this.options.totalPages)),listItems},buildItem:function(type,page){var $itemContainer=$("<li></li>"),$itemContent=$("<a></a>"),itemText=null;return itemText=this.options[type]?this.makeText(this.options[type],page):page,$itemContainer.addClass(this.options[type+"Class"]),$itemContainer.data("page",page),$itemContainer.data("page-type",type),$itemContainer.append($itemContent.attr("href",this.makeHref(page)).html(itemText)),$itemContainer},getPages:function(currentPage){var pages=[],half=Math.floor(this.options.visiblePages/2),start=currentPage-half+1-this.options.visiblePages%2,end=currentPage+half;start<=0&&(start=1,end=this.options.visiblePages),end>this.options.totalPages&&(start=this.options.totalPages-this.options.visiblePages+1,end=this.options.totalPages);for(var itPage=start;itPage<=end;)pages.push(itPage),itPage++;return{currentPage:currentPage,numeric:pages}},render:function(pages){var _this=this;this.$listContainer.children().remove();var items=this.buildListItems(pages);jQuery.each(items,function(key,item){_this.$listContainer.append(item)}),this.$listContainer.children().each(function(){var $this=$(this);switch($this.data("page-type")){case"page":$this.data("page")===pages.currentPage&&$this.addClass(_this.options.activeClass);break;case"first":$this.toggleClass(_this.options.disabledClass,1===pages.currentPage);break;case"last":$this.toggleClass(_this.options.disabledClass,pages.currentPage===_this.options.totalPages);break;case"prev":$this.toggleClass(_this.options.disabledClass,!_this.options.loop&&1===pages.currentPage);break;case"next":$this.toggleClass(_this.options.disabledClass,!_this.options.loop&&pages.currentPage===_this.options.totalPages)}})},setupEvents:function(){var _this=this;this.$listContainer.find("li").each(function(){var $this=$(this);$this.off(),$this.hasClass(_this.options.disabledClass)||$this.hasClass(_this.options.activeClass)?$this.on("click",!1):$this.click(function(evt){!_this.options.href&&evt.preventDefault(),_this.show(parseInt($this.data("page")))})})},makeHref:function(page){return this.options.href?this.makeText(this.options.href,page):"#"},makeText:function(text,page){return text.replace(this.options.pageVariable,page).replace(this.options.totalPagesVariable,this.options.totalPages)}},$.fn.twbsPagination=function(option){var methodReturn,args=Array.prototype.slice.call(arguments,1),$this=$(this),data=$this.data("twbs-pagination"),options="object"==typeof option?option:{};return data||$this.data("twbs-pagination",data=new TwbsPagination(this,options)),"string"==typeof option&&(methodReturn=data[option].apply(data,args)),void 0===methodReturn?$this:methodReturn},$.fn.twbsPagination.defaults={totalPages:1,startPage:1,visiblePages:5,initiateStartPageClick:!0,href:!1,pageVariable:"{{page}}",totalPagesVariable:"{{total_pages}}",page:null,first:"First",prev:"Previous",next:"Next",last:"Last",loop:!1,onPageClick:null,paginationClass:"pagination",nextClass:"next",prevClass:"prev",lastClass:"last",firstClass:"first",pageClass:"page",activeClass:"active",disabledClass:"disabled"},$.fn.twbsPagination.Constructor=TwbsPagination,$.fn.twbsPagination.noConflict=function(){return $.fn.twbsPagination=old,this}}(window.jQuery,window,document);
//# sourceMappingURL=myaccount.min.js.map